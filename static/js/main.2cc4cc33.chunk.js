(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(e,t,a){},25:function(e,t,a){e.exports=a(43)},42:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var r=a(3),n=a(4),i=a(6),o=a(5),c=a(7),s=a(0),l=a.n(s),u=a(1),d=a(22),g=a.n(d),p=a(8),h=a(2),m=a(24),v={CHANGE_SELECTED_BUTTON:"CHANGE_SELECTED_BUTTON",ADD_PICTURE_IN_TD:"ADD_PICTURE_IN_TD",REMOVE_PICTURE_IN_TD:"REMOVE_PICTURE_IN_TD"},b={REDUCE_HP:"REDUCE_HP",LOAD_MAP:"LOAD_MAP",ZOOM:"ZOOM"},f={SELECT_ROW:"SELECT_ROW",ROTATE_TANK:"ROTATE_TANK",ROTATE_TURRET:"ROTATE_TURRET",MOVE_TANK:"MOVE_TANK",MOVE_TANK_ROTATE_AND_FORWARD:"MOVE_TANK_ROTATE_AND_FORWARD",LOAD:"LOAD",START:"START",STOP:"STOP",PAUSE:"PAUSE",RESTART:"RESTART",NEXT_MOVE:"NEXT_MOVE",FIRE:"FIRE",SAVE_ALG:"SAVE_ALG",LOAD_ALG:"LOAD_ALG",CHANGE_SPEED:"CHANGE_SPEED"},k=b,S=v,E=f,w=function(e,t){return{type:v.CHANGE_SELECTED_BUTTON,payload:{index:e,className:t}}},T=function(e,t){return{type:v.ADD_PICTURE_IN_TD,payload:{className:e,indexRow:t}}},O=function(e,t){return{type:v.REMOVE_PICTURE_IN_TD,payload:{className:e,indexRow:t}}},y=function(e){return{type:f.SELECT_ROW,payload:e}},x=function(e,t){return{type:b.REDUCE_HP,payload:{i:e,j:t}}},N=function(e){return{type:b.LOAD_MAP,payload:e}},j=function(){return{type:b.ZOOM,payload:20}},_=function(){return{type:b.ZOOM,payload:-20}},R=function(e){return{type:f.ROTATE_TANK,payload:e}},P=function(e){return{type:f.ROTATE_TURRET,payload:e}},D=function(){return{type:f.MOVE_TANK,payload:!0}},A=function(){return{type:f.MOVE_TANK,payload:!1}},C=function(){return{type:f.MOVE_TANK_ROTATE_AND_FORWARD,payload:!0}},M=function(){return{type:f.MOVE_TANK_ROTATE_AND_FORWARD,payload:!1}},L=function(){return{type:f.LOAD}},X=function(){return{type:f.START}},I=function(){return{type:f.NEXT_MOVE}},Y=function(){return{type:f.STOP}},B=function(){return{type:f.PAUSE}},W=function(){return{type:f.RESTART,payload:""}},F=function(){return{type:f.FIRE}},z=function(){return{type:f.SAVE_ALG}},U=function(e){return{type:f.LOAD_ALG,payload:e}},H=function(){return{type:f.CHANGE_SPEED,payload:!0}},V=function(){return{type:f.CHANGE_SPEED,payload:!1}},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.CHANGE_SELECTED_BUTTON:var a=t.payload,r=a.index,n=a.className;return"gunner"===n?Object(u.a)({},e,{gunnerSelectedIndex:r}):"driver"===n?Object(u.a)({},e,{driverSelectedIndex:r}):"charger"===n?Object(u.a)({},e,{chargerSelectedIndex:r}):e;case v.ADD_PICTURE_IN_TD:var i=e.rows.slice(),o=t.payload,c=o.indexRow,s=o.className;for(i[c]={gunner:"gunner"===s?ne("gunner",e.gunnerSelectedIndex):i[c].gunner,driver:"driver"===s?ne("driver",e.driverSelectedIndex):i[c].driver,charger:"charger"===s?ne("charger",e.chargerSelectedIndex):i[c].charger};null!=i[i.length-1].gunner||null!=i[i.length-1].driver||null!=i[i.length-1].charger;)i.push({gunner:null,driver:null,charger:null});return Object(u.a)({},e,{rows:i});case v.REMOVE_PICTURE_IN_TD:var l=Object(m.a)(e.rows),d=t.payload,g=d.indexRow,p=d.className;for(l[g]={gunner:"gunner"===p?null:l[g].gunner,driver:"driver"===p?null:l[g].driver,charger:"charger"===p?null:l[g].charger};l.length>0&&null==l[l.length-1].gunner&&null==l[l.length-1].driver&&null==l[l.length-1].charger;)l.pop();return l.push({gunner:null,driver:null,charger:null}),Object(u.a)({},e,{rows:l})}return e},K=function(e){return{gunnerSelectedIndex:e.codeState.gunnerSelectedIndex,driverSelectedIndex:e.codeState.driverSelectedIndex,chargerSelectedIndex:e.codeState.chargerSelectedIndex,selectedRow:e.codeState.selectedRow,currentRow:e.codeState.currentRow,rows:e.codeState.rows,isPlay:e.codeState.isPlay}},Z=function(e){return{changeSelectedButton:Object(h.a)(w,e),addPictureInTD:Object(h.a)(T,e),removePictureInTD:Object(h.a)(O,e),selectRow:Object(h.a)(y,e),saveAlg:Object(h.a)(z,e),loadAlg:Object(h.a)(U,e)}},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b.REDUCE_HP:var a=e.map.slice(),r=t.payload,n=r.i,i=r.j;switch(a[i][n][0].tile){case $._3hp:return a[i][n][0]={tile:$._2hp},Object(u.a)({},e,{map:a});case $._2hp:return a[i][n][0]={tile:$._1hp},Object(u.a)({},e,{map:a});case $._1hp:return a[i][n]=[],Object(u.a)({},e,{map:a,targetCount:e.targetCount-1})}return e;case b.LOAD_MAP:var o=""===t.payload?e.initialMap:t.payload,c=null;try{if(window.DOMParser)c=(new DOMParser).parseFromString(o,"text/xml");else(c=new ActiveXObject("Microsoft.XMLDOM")).async=!1,c.loadXML(o);var s=0,l=c.getElementsByTagName("World")[0],d=Number(l.getAttribute("Width")),g=Number(l.getAttribute("Height")),p=Number(l.getAttribute("ShellDistance")),h=l.getElementsByTagName("Tank")[0],m=0;switch(h.getElementsByTagName("TurretStatus")[0].innerHTML){case"PartiallyLoaded":m=1;break;case"Ready":m=2}for(var v={X:Number(h.getAttribute("X")),Y:Number(h.getAttribute("Y")),TankDirection:ie(h.getElementsByTagName("TankDirection")[0].innerHTML),TurretDirection:ie(h.getElementsByTagName("TurretDirection")[0].innerHTML),TurretStatus:m},f=l.getElementsByTagName("Units")[0].children,k=[],S=0;S<g;S++){for(var E=[],w=0;w<d;w++)E.push([]);k.push(E)}for(var T=0;T<f.length;T++){var O=Number(f[T].getAttribute("X")),y=Number(f[T].getAttribute("Y")),x=f[T].getAttribute("XShift");x&&(x=Number(f[T].getAttribute("XShift")));var N=f[T].getAttribute("YShift");N&&(N=Number(f[T].getAttribute("YShift")));var j=$.empty;switch(f[T].tagName){case"Swamp":j=$.swamp;break;case"Rock":j=$.mountains;break;case"LittleRock":j=$.littleMountains;break;case"LittleSwamp":j=$.littleSwamp;break;case"LittlePillbox":s+=1,j=$._1hp;break;case"MediumPillbox":s+=1,j=$._2hp;break;case"BigPillbox":s+=1,j=$._3hp}k[y][O].push({XShift:x,YShift:N,tile:j})}return Object(u.a)({},e,{shellDistance:p,tank:v,mapWidth:d,mapHeight:g,map:k,mapTracers:[],initialMap:o,targetCount:s})}catch(R){alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u0444\u0430\u0439\u043b \u043a\u0430\u0440\u0442\u044b \u043d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e \u0441\u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u043d")}break;case b.ZOOM:var _=e.tileSize;return(_+=t.payload)<20&&(_=20),_>80&&(_=80),Object(u.a)({},e,{tileSize:_})}return e},q=function(e,t){var a=[0,0],r=re["".concat(e)];switch(function(e,t){switch(t=oe(t)){case 0:return re["".concat(e)].North;case 90:return re["".concat(e)].East;case 180:return re["".concat(e)].South;case-90:return re["".concat(e)].West;case-45:return re["".concat(e)].NorthWest;case 45:return re["".concat(e)].NorthEast;case-135:return re["".concat(e)].SouthWest;case 135:return re["".concat(e)].SouthEast}return"undefined"}(e,t)){case r.North:a=[0,-1];break;case r.NorthEast:a=[1,-1];break;case r.East:a=[1,0];break;case r.SouthEast:a=[1,1];break;case r.South:a=[0,1];break;case r.SouthWest:a=[-1,1];break;case r.West:a=[-1,0];break;case r.NorthWest:a=[-1,-1]}return a},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.SELECT_ROW:return Object(u.a)({},e,{codeState:Object(u.a)({},e.codeState,{selectedRow:t.payload})});case f.ROTATE_TURRET:var a=oe(ie(t.payload)+e.mapState.tank.TurretDirection);if(e.mapState.tank)return Object(u.a)({},e,{mapState:Object(u.a)({},e.mapState,{tank:Object(u.a)({},e.mapState.tank,{TurretDirection:a})})});break;case f.ROTATE_TANK:var r=oe(ie(t.payload)+e.mapState.tank.TankDirection),n=oe(ie(t.payload)+e.mapState.tank.TurretDirection);if(e.mapState.tank)return Object(u.a)({},e,{mapState:Object(u.a)({},e.mapState,{tank:Object(u.a)({},e.mapState.tank,{TankDirection:r,TurretDirection:n})})});break;case f.MOVE_TANK:var i=e.mapState.tank;if(i){var o=q("driver",i.TankDirection);return t.payload||(o[0]=-1*o[0],o[1]=-1*o[1]),Object(u.a)({},e,{mapState:Object(u.a)({},e.mapState,{tank:Object(u.a)({},e.mapState.tank,{X:i.X+o[0],Y:i.Y+o[1]})})})}break;case f.MOVE_TANK_ROTATE_AND_FORWARD:var c=e.mapState.tank;if(c){var s=oe(c.TankDirection+(t.payload?-45:45)),l=oe(c.TurretDirection+(t.payload?-45:45)),d=q("driver",s);return Object(u.a)({},e,{mapState:Object(u.a)({},e.mapState,{tank:Object(u.a)({},e.mapState.tank,{X:c.X+d[0],Y:c.Y+d[1],TankDirection:s,TurretDirection:l})})})}break;case f.LOAD:if(e.mapState.tank){var g=e.mapState.tank.TurretStatus+1;return 3===g&&(g=0),Object(u.a)({},e,{mapState:Object(u.a)({},e.mapState,{tank:Object(u.a)({},e.mapState.tank,{TurretStatus:g})})})}break;case f.START:var p=e.codeState.isPause?{}:J(e.mapState,{type:b.LOAD_MAP,payload:""});return Object(u.a)({},e,{codeState:Object(u.a)({},e.codeState,{isPlay:!0,currentRow:e.codeState.isPause?e.codeState.currentRow:0}),mapState:Object(u.a)({},e.mapState,p)});case f.STOP:return e.mapState.targetCount<=0?alert("\u0412\u0441\u0435 \u0446\u0435\u043b\u0438 \u0443\u043d\u0438\u0447\u0442\u043e\u0436\u0435\u043d\u044b. \u041f\u043e\u0437\u0434\u0440\u0430\u0432\u043b\u044f\u044e!!\n\u0411\u044b\u043b\u043e \u0437\u0430\u0434\u0435\u0439\u0441\u0442\u0432\u043e\u0432\u0430\u043d\u043e ".concat(e.codeState.rows.length-1," \u0441\u0442\u0440\u043e\u043a")):alert("\u041d\u0435 \u0432\u0441\u0435 \u0446\u0435\u043b\u0438 \u0443\u043d\u0438\u0447\u0442\u043e\u0436\u0435\u043d\u044b :(("),Object(u.a)({},e,{codeState:Object(u.a)({},e.codeState,{isPlay:!1,isPause:!1})});case f.PAUSE:return Object(u.a)({},e,{codeState:Object(u.a)({},e.codeState,{isPlay:!1,isPause:!0})});case f.RESTART:return Object(u.a)({},e,{mapState:Object(u.a)({},e.mapState,J(e.mapState,{type:b.LOAD_MAP,payload:""})),codeState:Object(u.a)({},e.codeState,{isPlay:!1,currentRow:0})});case f.NEXT_MOVE:if(e.codeState.isPlay){var h=e.codeState.currentRow+1;return Object(u.a)({},e,{codeState:Object(u.a)({},e.codeState,{currentRow:h})})}break;case f.FIRE:if(e.mapState.tank){console.log("FIRE from ".concat(e.mapState.tank.X,"-").concat(e.mapState.tank.Y));for(var m=e.mapState,v=m.map,k=m.tank,S=m.shellDistance,E=k.X,w=k.Y,T=q("gunner",k.TurretDirection),O=0;O<S&&(E+=T[0],w+=T[1],!(E>=e.mapState.mapWidth||E<0||w>=e.mapState.mapHeight||w<0));O++){if(v[w][E].length>0){var y=v[w][E][0].tile;if(y===$.mountains)break;if(y===$._3hp||y===$._2hp||y===$._1hp){e=Object(u.a)({},e,{mapState:Object(u.a)({},e.mapState,J(e.mapState,x(E,w)))});break}var N=-1*T[0],j=-1*T[1],_=void 0;for(_=0;_<3;_++){var R=0;for(R=0;R<v[w][E].length;R++){var P=v[w][E][R];if(N===P.XShift&&j===P.YShift&&P.tile===$.littleMountains)break}if(R!==v[w][E].length)break;N+=T[0],j+=T[1],e.mapState.mapTracers.push({tag:T[0]*T[1]===0?$.littleTrailVert:$.littleTrailDiag,X:E,Y:w,XShift:N,YShift:j,inverted:0===T[1]||T[0]*T[1]>0})}if(_<3)break}e.mapState.mapTracers.push({tag:T[0]*T[1]===0?$.trailVert:$.trailDiag,X:E,Y:w,inverted:0===T[1]||T[0]*T[1]>0})}return Object(u.a)({},e,{mapState:Object(u.a)({},e.mapState,{tank:Object(u.a)({},e.mapState.tank,{TurretStatus:0})})})}break;case f.SAVE_ALG:for(var D=document.implementation.createDocument("","",null),A=D.createElement("Program"),C=e.codeState.rows,M=0;M<C.length-1;M++){var L=D.createElement("Command"),X=null!==C[M].gunner?C[M].gunner.tag:re.gunner.Pause;L.appendChild(D.createElement(X)),X=null!==C[M].driver?C[M].driver.tag:re.driver.Pause,L.appendChild(D.createElement(X)),X=null!==C[M].charger?"LoadTurret_"+C[M].charger.tag:re.charger.Pause,L.appendChild(D.createElement(X)),A.appendChild(L)}D.appendChild(A);var I='<?xml version="1.0" encoding="utf-8"?>'+(new XMLSerializer).serializeToString(D),Y=new Blob([I],{type:"text/plain"});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(Y,"Program.tankcrewprogram");else{var B=document.createElement("a"),W=URL.createObjectURL(Y);B.href=W,B.download="Program.tankcrewprogram",document.body.appendChild(B),B.dataset.downloadurl=["text/plain",B.download,B.href].join(":"),B.click(),setTimeout(function(){document.body.removeChild(B),window.URL.revokeObjectURL(W)},0)}return e;case f.LOAD_ALG:var F=t.payload,z=null;try{if(window.DOMParser)z=(new DOMParser).parseFromString(F,"text/xml");else(z=new ActiveXObject("Microsoft.XMLDOM")).async=!1,z.loadXML(F);for(var U=z.getElementsByTagName("Program")[0].getElementsByTagName("Command"),H=[],V=0;V<U.length;V++){var G={gunner:null,driver:null,charger:null},K=U[V].childNodes[0],Z=U[V].childNodes[1],Q=U[V].childNodes[2];G.gunner=ne("gunner",K.nextSibling.nodeName),G.driver=ne("driver",Z.nextSibling.nodeName),G.charger=ne("charger",Q.nextSibling.nodeName),H.push(G)}for(;H.length>0&&H[H.length-1].gunner.tag===re.gunner.Pause&&H[H.length-1].driver.tag===re.driver.Pause&&H[H.length-1].charger.tag===re.charger.Pause;)H.pop();return H.push({gunner:null,driver:null,charger:null}),Object(u.a)({},e,{codeState:Object(u.a)({},e.codeState,{rows:H})})}catch(te){alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u0444\u0430\u0439\u043b \u0430\u043b\u0433\u043e\u0440\u0438\u0442\u043c\u0430 \u043d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e \u0441\u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u043d")}break;case f.CHANGE_SPEED:var ee=e.codeState.speed;return(ee+=100*(t.payload?-1:1))>500&&(ee=500),ee<100&&(ee=100),Object(u.a)({},e,{codeState:Object(u.a)({},e.codeState,{speed:ee})})}return e},$={mountains:"mountains",swamp:"swamp",littleMountains:"littleMountains",littleSwamp:"littleSwamp",trailVert:"trailVert",trailDiag:"trailDiag",littleTrailVert:"littleTrailVert",littleTrailDiag:"littleTrailDiag",tankBody:"tankBody",tankHead:"tankHead",tankStatus_NotLoaded:"tankStatus_NotLoaded",tankStatus_PartLoaded:"tankStatus_PartLoaded",tankStatus_Loaded:"tankStatus_Loaded",_3hp:"3hp",_2hp:"2hp",_1hp:"1hp",empty:"empty"},ee=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(ue+""==="undefined")return{};var r=t||ue.getState().mapState.tileSize,n={};switch(e){case $.mountains:case $.littleMountains:n={tag:e,backgroundImage:"url('../images/game/gametiles.svg')",backgroundPosition:"-".concat(r,"px 0px"),height:r,width:r};break;case $.swamp:case $.littleSwamp:n={tag:e,backgroundImage:"url('../images/game/gametiles.svg')",backgroundPosition:"-".concat(2*r,"px 0px"),height:r,width:r};break;case $.tankBody:n={tag:e,backgroundImage:"url('../images/game/gametiles.svg')",backgroundPosition:"-".concat(3*r,"px 0px"),height:r,width:r};break;case $.tankHead:n={tag:e,backgroundImage:"url('../images/game/gametiles.svg')",backgroundPosition:"-".concat(4*r,"px 0px"),height:r,width:r};break;case $.tankStatus_NotLoaded:n={tag:e,backgroundImage:"url('../images/game/gametiles.svg')",backgroundPosition:"-".concat(3*r,"px -").concat(2*r,"px"),height:r,width:r};break;case $.tankStatus_PartLoaded:n={tag:e,backgroundImage:"url('../images/game/gametiles.svg')",backgroundPosition:"-".concat(4*r,"px -").concat(2*r,"px"),height:r,width:r};break;case $.tankStatus_Loaded:n={tag:e,backgroundImage:"url('../images/game/gametiles.svg')",backgroundPosition:"-".concat(4*r,"px -").concat(3*r,"px"),height:r,width:r};break;case $._3hp:n={tag:e,backgroundImage:"url('../images/game/gametiles.svg')",backgroundPosition:"0px -".concat(r,"px"),height:r,width:r};break;case $._2hp:n={tag:e,backgroundImage:"url('../images/game/gametiles.svg')",backgroundPosition:"-".concat(r,"px -").concat(r,"px"),height:r,width:r};break;case $._1hp:n={tag:e,backgroundImage:"url('../images/game/gametiles.svg')",backgroundPosition:"-".concat(2*r,"px -").concat(r,"px"),height:r,width:r};break;case $.trailVert:console.log(1),n={tag:e,backgroundImage:"url('../images/game/gametiles.svg')",backgroundPosition:"-".concat(3*r,"px -").concat(r,"px"),height:r,width:r};break;case $.littleTrailVert:a=!0,n={tag:e,backgroundImage:"url('../images/game/gametiles.svg')",backgroundPosition:"-".concat(3*r,"px -").concat(r,"px"),height:r,width:r};break;case $.trailDiag:n={tag:e,backgroundImage:"url('../images/game/gametiles.svg')",backgroundPosition:"-".concat(4*r,"px -").concat(r,"px"),height:r,width:r};break;case $.littleTrailDiag:a=!0,n={tag:e,backgroundImage:"url('../images/game/gametiles.svg')",backgroundPosition:"-".concat(4*r,"px -").concat(r,"px"),height:r,width:r};break;default:n={tag:"empty",backgroundImage:"url('../images/game/gametiles.svg')",backgroundPosition:"0px 0px",height:r,width:r}}if(a){var i=n.backgroundPosition.split(" "),o=Number(i[0].slice(0,i[0].length-2))/3,c=Number(i[1].slice(0,i[1].length-2))/3;n=Object(u.a)({},n,{backgroundPosition:"".concat(Math.floor(o),"px ").concat(Math.floor(c),"px"),backgroundSize:"".concat(5*r/3+2,"px ").concat(5*r/3+2,"px"),height:n.height/3,width:n.width/3,border:"none"})}else n=Object(u.a)({},n,{backgroundSize:"".concat(5*r,"px ").concat(5*r,"px")});return n},te=9,ae=12,re={gunner:{North:"PauseGunner",East:"TurnTurretClockwise90",South:"TurnTurretAround",West:"TurnTurretCounterClockwise90",NorthWest:"TurnTurretCounterClockwise45",NorthEast:"TurnTurretClockwise45",SouthWest:"TurnTurretCounterClockwise135",SouthEast:"TurnTurretClockwise135",Fire:"FireCommand",Pause:"PauseGunner"},driver:{North:"StopDriver",East:"TurnTankClockwise90",South:"TurnTankAround",West:"TurnTankCounterClockwise90",NorthWest:"TurnTankCounterClockwise45",NorthEast:"TurnTankClockwise45",SouthWest:"TurnTankCounterClockwise135",SouthEast:"TurnTankClockwise135",MoveForward:"MoveForward",MoveBackward:"MoveBackward",TurnLeftAndMoveForward:"TurnTankCounterClockwiseAndMoveForward",TurnRightAndMoveForward:"TurnTankClockwiseAndMoveForward",TurnLeftAndMoveBackward:"=TBD=",TurnRightAndMoveBackward:"=TBD=",Stop:"StopDriver",Pause:"StopDriver"},charger:{NotLoaded:0,PartiallyLoaded:1,Ready:2,Pause:"PauseLoader"}};function ne(e,t){if(isNaN(t))switch(e){case"gunner":switch(t){case re.gunner.NorthEast:t=0;break;case re.gunner.East:t=1;break;case re.gunner.SouthEast:t=2;break;case re.gunner.NorthWest:t=3;break;case re.gunner.West:t=4;break;case re.gunner.SouthWest:t=5;break;case re.gunner.South:t=6;break;case re.gunner.Fire:t=7;break;default:t=8}break;case"driver":switch(t){case re.driver.NorthEast:t=0;break;case re.driver.East:t=1;break;case re.driver.SouthEast:t=2;break;case re.driver.NorthWest:t=3;break;case re.driver.West:t=4;break;case re.driver.SouthWest:t=5;break;case re.driver.South:t=6;break;case re.driver.MoveForward:t=7;break;case re.driver.MoveBackward:t=8;break;case re.driver.TurnRightAndMoveForward:t=9;break;case re.driver.TurnLeftAndMoveForward:t=10;break;default:t=11}break;case"charger":switch(t){case re.charger.PartiallyLoaded:t=0;break;case re.charger.Ready:t=1;break;default:t=2}}return[{tag:re.gunner.NorthEast,backgroundImage:"url('../images/game/actionbtns.svg')",backgroundPosition:"0px 0px",left:0,height:50,width:50},{tag:re.gunner.East,backgroundImage:"url('../images/game/actionbtns.svg')",backgroundPosition:"-50px 0px",left:0,height:50,width:50},{tag:re.gunner.SouthEast,backgroundImage:"url('../images/game/actionbtns.svg')",backgroundPosition:"-100px 0px",left:0,height:50,width:50},{tag:re.gunner.NorthWest,backgroundImage:"url('../images/game/actionbtns.svg')",backgroundPosition:"0px -50px",left:0,height:50,width:50},{tag:re.gunner.West,backgroundImage:"url('../images/game/actionbtns.svg')",backgroundPosition:"-50px -50px",left:0,height:50,width:50},{tag:re.gunner.SouthWest,backgroundImage:"url('../images/game/actionbtns.svg')",backgroundPosition:"-100px -50px",left:0,height:50,width:50},{tag:re.gunner.South,backgroundImage:"url('../images/game/actionbtns.svg')",backgroundPosition:"0px -100px",left:0,height:50,width:50},{tag:re.gunner.Fire,backgroundImage:"url('../images/game/actionbtns.svg')",backgroundPosition:"-100px -100px",left:0,height:50,width:50},{tag:re.gunner.Pause,backgroundImage:"url('../images/game/actionbtns.svg')",backgroundPosition:"-150px -150px",left:0,height:50,width:50},{tag:re.driver.NorthEast,backgroundImage:"url('../images/game/actionbtns.svg')",backgroundPosition:"0px -150px",left:0,height:50,width:50},{tag:re.driver.East,backgroundImage:"url('../images/game/actionbtns.svg')",backgroundPosition:"-50px -150px",left:0,height:50,width:50},{tag:re.driver.SouthEast,backgroundImage:"url('../images/game/actionbtns.svg')",backgroundPosition:"-100px -150px",left:0,height:50,width:50},{tag:re.driver.NorthWest,backgroundImage:"url('../images/game/actionbtns.svg')",backgroundPosition:"0px -200px",left:0,height:50,width:50},{tag:re.driver.West,backgroundImage:"url('../images/game/actionbtns.svg')",backgroundPosition:"-50px -200px",left:0,height:50,width:50},{tag:re.driver.SouthWest,backgroundImage:"url('../images/game/actionbtns.svg')",backgroundPosition:"-100px -200px",left:0,height:50,width:50},{tag:re.driver.South,backgroundImage:"url('../images/game/actionbtns.svg')",backgroundPosition:"-50px -100px",left:0,height:50,width:50},{tag:re.driver.MoveForward,backgroundImage:"url('../images/game/actionbtns.svg')",backgroundPosition:"-150px 0px",left:0,height:50,width:50},{tag:re.driver.MoveBackward,backgroundImage:"url('../images/game/actionbtns.svg')",backgroundPosition:"-200px 0px",left:0,height:50,width:50},{tag:re.driver.TurnRightAndMoveForward,backgroundImage:"url('../images/game/actionbtns.svg')",backgroundPosition:"-150px -50px",left:0,height:50,width:50},{tag:re.driver.TurnLeftAndMoveForward,backgroundImage:"url('../images/game/actionbtns.svg')",backgroundPosition:"-200px -50px",left:0,height:50,width:50},{tag:re.driver.Pause,backgroundImage:"url('../images/game/actionbtns.svg')",backgroundPosition:"-150px -150px",left:0,height:50,width:50},{tag:re.charger.PartiallyLoaded,backgroundImage:"url('../images/game/actionbtns.svg')",backgroundPosition:"-150px -100px",left:0,height:50,width:50},{tag:re.charger.Ready,backgroundImage:"url('../images/game/actionbtns.svg')",backgroundPosition:"-200px -100px",left:0,height:50,width:50},{tag:re.charger.Pause,backgroundImage:"url('../images/game/actionbtns.svg')",backgroundPosition:"-150px -150px",left:0,height:50,width:50}][t+("driver"===e?te:0)+("charger"===e?te+ae:0)]}function ie(e){switch(e){case re.driver.North:case re.gunner.North:return 0;case re.driver.East:case re.gunner.East:return 90;case re.driver.South:case re.gunner.South:return 180;case re.driver.West:case re.gunner.West:return-90;case re.driver.NorthWest:case re.gunner.NorthWest:return-45;case re.driver.NorthEast:case re.gunner.NorthEast:return 45;case re.driver.SouthWest:case re.gunner.SouthWest:return-135;case re.driver.SouthEast:case re.gunner.SouthEast:return 135}return 0}function oe(e){return e>180?e-360:e<-180?e+360:180===e||-180===e?180:e}var ce={gunnerSelectedIndex:0,driverSelectedIndex:0,chargerSelectedIndex:0,selectedRow:0,currentRow:0,rows:[{gunner:null,driver:null,charger:null}],isPlay:!1,isPause:!1,speed:500},se={tileSize:40,initialMap:'<?xml version="1.0" encoding="utf-8"?>\n<World Height="10" Width="10" ShellDistance="8">\n  <Tank X="4" Y="4">\n    <TankDirection>North</TankDirection>\n    <TurretDirection>North</TurretDirection>\n    <TurretStatus>NotLoaded</TurretStatus>\n  </Tank>\n  <Units>\n    <LittlePillbox X="4" Y="2" />\n    <BigPillbox X="7" Y="1" />\n    <Rock X="5" Y="2" />\n    <LittleRock X="6" Y="2" XShift="-1" YShift="1" />\n    <LittleRock X="6" Y="2" XShift="0" YShift="0" />\n    <LittleRock X="6" Y="2" XShift="1" YShift="-1" />\n    <LittleRock X="7" Y="2" XShift="0" YShift="-1" />\n    <LittleRock X="7" Y="2" XShift="0" YShift="0" />\n    <LittleRock X="7" Y="2" XShift="0" YShift="1" />\n    <Swamp X="3" Y="3" />\n    <Swamp X="4" Y="3" />\n    <Swamp X="5" Y="3" />\n    <LittleSwamp X="6" Y="2" XShift="-1" YShift="0" />\n    <LittleSwamp X="6" Y="2" XShift="-1" YShift="-1" />\n    <LittleSwamp X="6" Y="2" XShift="0" YShift="-1" />\n    <LittleSwamp X="6" Y="2" XShift="1" YShift="0" />\n    <LittleSwamp X="6" Y="2" XShift="1" YShift="1" />\n    <LittleSwamp X="6" Y="2" XShift="0" YShift="1" />\n    <LittleSwamp X="7" Y="2" XShift="-1" YShift="0" />\n    <LittleSwamp X="7" Y="2" XShift="-1" YShift="-1" />\n    <LittleSwamp X="7" Y="2" XShift="-1" YShift="1" />\n    <LittleSwamp X="7" Y="2" XShift="1" YShift="-1" />\n    <LittleSwamp X="7" Y="2" XShift="1" YShift="0" />\n    <LittleSwamp X="7" Y="2" XShift="1" YShift="1" />\n    <LittleSwamp X="6" Y="3" XShift="-1" YShift="1" />\n    <LittleSwamp X="6" Y="3" XShift="0" YShift="0" />\n    <LittleSwamp X="6" Y="3" XShift="1" YShift="-1" />\n    <LittleSwamp X="6" Y="3" XShift="0" YShift="-1" />\n    <LittleSwamp X="6" Y="3" XShift="-1" YShift="-1" />\n    <LittleSwamp X="6" Y="3" XShift="-1" YShift="0" />\n    <LittleSwamp X="6" Y="3" XShift="1" YShift="0" />\n    <LittleSwamp X="7" Y="3" XShift="-1" YShift="-1" />\n    <LittleSwamp X="7" Y="3" XShift="0" YShift="-1" />\n  </Units>\n</World>',mapTracers:[],map:[],targetCount:0},le={codeState:ce,mapState:se},ue=Object(h.b)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;return k["".concat(t.type)]+""!=="undefined"?Object(u.a)({},e,{mapState:J(e.mapState,t)}):S["".concat(t.type)]+""!=="undefined"?Object(u.a)({},e,{codeState:G(e.codeState,t)}):E["".concat(t.type)]+""!=="undefined"?Q(e,t):e},le),de="\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0432\u043e \u0432\u0440\u0435\u043c\u044f \u0434\u0432\u0438\u0436\u0435\u043d\u0438\u044f, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043e\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0442\u0430\u043d\u043a (\u0441\u0434\u0435\u043b\u0430\u0442\u044c \u043f\u0430\u0443\u0437\u0443)",ge="\u0422\u0430\u043d\u043a \u0432\u044b\u0435\u0445\u0430\u043b \u0437\u0430 \u0433\u0440\u0430\u043d\u0438\u0446\u0443",pe="\u0422\u0430\u043d\u043a \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u043f\u0440\u043e\u0435\u0445\u0430\u0442\u044c \u043f\u043e \u0433\u043e\u0440\u0430\u043c",he="\u0422\u0430\u043d\u043a \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u043f\u0440\u043e\u0435\u0445\u0430\u0442\u044c \u043f\u043e \u043b\u0435\u0441\u0430\u043c",me="\u0422\u0430\u043d\u043a \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u043f\u0440\u043e\u0435\u0445\u0430\u0442\u044c \u043f\u043e \u043c\u0438\u0448\u0435\u043d\u044f\u043c",ve="\u0422\u0430\u043d\u043a \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u043f\u0440\u043e\u0435\u0445\u0430\u0442\u044c \u043f\u043e \u044d\u0442\u043e\u0439 \u043a\u043b\u0435\u0442\u043a\u0435",be='\u041a\u043e\u043c\u0430\u043d\u0434\u0443 "\u0417\u0430\u0440\u044f\u0436\u0430\u0439 1" \u043c\u043e\u0436\u043d\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0435\u0441\u043b\u0438 \u043e\u0440\u0443\u0434\u0438\u0435 \u043d\u0435 \u0437\u0430\u0440\u044f\u0436\u0435\u043d\u043e',fe='\u041a\u043e\u043c\u0430\u043d\u0434\u0443 "\u0417\u0430\u0440\u044f\u0436\u0430\u0439 2" \u043c\u043e\u0436\u043d\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0435\u0441\u043b\u0438 \u0443\u0436\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u0430 "\u0417\u0430\u0440\u044f\u0436\u0430\u0439 1"',ke="\u041d\u0435\u043b\u044c\u0437\u044f \u0432\u044b\u0441\u0442\u0440\u0435\u043b\u0438\u0442\u044c, \u043f\u043e\u043a\u0430 \u043e\u0440\u0443\u0434\u0438\u0435 \u043d\u0435 \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e \u0437\u0430\u0440\u044f\u0436\u0435\u043d\u043e",Se=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{id:"menuDiv",className:"flex-row flex-align-start"},l.a.createElement("div",{className:"margin-10"},l.a.createElement(p.a,{store:ue},l.a.createElement(Re,null))),l.a.createElement("div",{className:"flex-column flex-align-start"},l.a.createElement(p.a,{store:ue},l.a.createElement(Te,null)),l.a.createElement(p.a,{store:ue},l.a.createElement(Ce,null))))}}]),t}(s.Component),Ee=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(n.a)(t,[{key:"handlePlay",value:function(){var e=this;this.props.start(),setTimeout(function(){return e.playNext()},this.props.speed)}},{key:"handleStop",value:function(){this.props.restart()}},{key:"handlePause",value:function(){this.props.pause()}},{key:"handleNextStep",value:function(){var e=this;this.props.isPlay||this.props.start(),setTimeout(function(){e.nextMove(e.props.currentRow)&&(e.props.nextMove(),e.props.pause())},this.props.speed)}},{key:"handleUntilRow",value:function(){var e=this;this.props.isPlay||this.props.start(),setTimeout(function(){e.props.currentRow<e.props.selectedRow&&(e.nextMove(e.props.currentRow)?(e.props.nextMove(),e.handleUntilRow()):e.props.pause())},this.props.speed)}},{key:"playNext",value:function(){var e=this;this.props.isPlay?this.nextMove(this.props.currentRow)?(this.props.nextMove(),setTimeout(function(){e.props.isPlay&&e.playNext()},this.props.speed)):(console.log("stop"),this.props.stop()):this.props.stop()}},{key:"nextMove",value:function(e){var t=this.props,a=t.tank,r=t.map,n=t.mapWidth,i=t.mapHeight,o=this.props.rows,c=e;if(c>=o.length-1)return!1;var s=o[c],l=s.gunner,u=s.driver,d=s.charger;if(null!==l){var g=l.tag;switch(g){case re.gunner.North:case re.gunner.NorthEast:case re.gunner.East:case re.gunner.SouthEast:case re.gunner.South:case re.gunner.SouthWest:case re.gunner.West:case re.gunner.NorthWest:this.props.rotateTurret(g);break;case re.gunner.Fire:if(2!==a.TurretStatus)return alert(ke+"\n\u041e\u0448\u0438\u0431\u043a\u0430 \u0432 \u0441\u0442\u0440\u043e\u043a\u0435 (".concat(e+1,")")),!1;this.props.fire()}}if(null!==u){var p=u.tag;switch(p){case re.driver.North:case re.driver.NorthEast:case re.driver.East:case re.driver.SouthEast:case re.driver.South:case re.driver.SouthWest:case re.driver.West:case re.driver.NorthWest:this.props.rotateTank(p);break;case re.driver.MoveForward:case re.driver.MoveBackward:if(c>0&&null!==o[c-1].driver&&(p===re.driver.MoveForward&&o[c-1].driver.tag===re.driver.MoveBackward||p===re.driver.MoveBackward&&o[c-1].driver.tag===re.driver.MoveForward))return alert(de+"\n\u041e\u0448\u0438\u0431\u043a\u0430 \u0432 \u0441\u0442\u0440\u043e\u043a\u0435 (".concat(e+1,")")),!1;p===re.driver.MoveForward?this.props.moveTankForward():this.props.moveTankBackward();var h=this.props.tank,m=h.X,v=h.Y;if(m<0||m>=n||v<0||v>=i)return alert(ge+"\n\u041e\u0448\u0438\u0431\u043a\u0430 \u0432 \u0441\u0442\u0440\u043e\u043a\u0435 (".concat(e+1,")")),!1;if(r[v][m].length>0){var b=ve;switch(r[v][m][0].tile){case $.swamp:b=he;break;case $.mountains:b=pe;break;case $._3hp:case $._2hp:case $._1hp:b=me}return alert(b+"\n\u041e\u0448\u0438\u0431\u043a\u0430 \u0432 \u0441\u0442\u0440\u043e\u043a\u0435 (".concat(e+1,")")),!1}break;case re.driver.TurnLeftAndMoveForward:case re.driver.TurnRightAndMoveForward:if(c>0&&null!==o[c-1].driver&&o[c-1].driver.tag===re.driver.MoveBackward)return alert(de+"\n\u041e\u0448\u0438\u0431\u043a\u0430 \u0432 \u0441\u0442\u0440\u043e\u043a\u0435 (".concat(e+1,")")),!1;p===re.driver.TurnLeftAndMoveForward?this.props.moveTankRotateLeftAndForward():this.props.moveTankRotateRightAndForward();var f=this.props.tank,k=f.X,S=f.Y;if(k<0||k>=n||S<0||S>=i)return alert(ge+"\n\u041e\u0448\u0438\u0431\u043a\u0430 \u0432 \u0441\u0442\u0440\u043e\u043a\u0435 (".concat(e+1,")")),!1;if(r[S][k].length>0){var E=ve;switch(r[S][k][0].tile){case $.swamp:E=he;break;case $.mountains:E=pe;break;case $._3hp:case $._2hp:case $._1hp:E=me}return alert(E+"\n\u041e\u0448\u0438\u0431\u043a\u0430 \u0432 \u0441\u0442\u0440\u043e\u043a\u0435 (".concat(e+1,")")),!1}}}if(null!==d){switch(d.tag){case re.charger.PartiallyLoaded:if(1===a.TurretStatus||2===a.TurretStatus&&l.tag!==re.gunner.Fire)return alert(be+"\n\u041e\u0448\u0438\u0431\u043a\u0430 \u0432 \u0441\u0442\u0440\u043e\u043a\u0435 (".concat(e+1,")")),!1;break;case re.charger.Ready:if(a.TurretStatus>=2)return alert(fe+"\n\u041e\u0448\u0438\u0431\u043a\u0430 \u0432 \u0441\u0442\u0440\u043e\u043a\u0435 (".concat(e+1,")")),!1}this.props.load()}return!0}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"flex-row "},l.a.createElement("div",{className:"flex-column flex-justify-evenly margin-10"},l.a.createElement(Oe,null),l.a.createElement(p.a,{store:ue},l.a.createElement(Ne,null))),l.a.createElement("div",{className:"flex-column flex-justify-center widthAll"},l.a.createElement("div",{className:"flex-column"},l.a.createElement(je,{onIncreaseClick:function(){return e.props.increaseSpeed()},onDecreaseClick:function(){return e.props.decreaseSpeed()},speed:this.props.speed})),l.a.createElement("div",{id:"moveBtnDiv",className:"flex-row"},l.a.createElement("div",{className:"flex-row"},l.a.createElement(we,{image:"images/menu/startbtn.svg",onClick:function(){return e.handlePlay()}}),l.a.createElement(we,{image:"images/menu/pausebtn.svg",onClick:function(){return e.handlePause()}}),l.a.createElement(we,{image:"images/menu/stopbtn.svg",onClick:function(){return e.handleStop()}}),l.a.createElement(we,{image:"images/menu/skipbtn.svg",onClick:function(){return e.handleUntilRow()}}),l.a.createElement(we,{image:"images/menu/nextstepbtn.svg",onClick:function(){return e.handleNextStep()}})),l.a.createElement("div",{style:{width:50}}," ")),l.a.createElement("div",{style:{textAlign:"right"}},l.a.createElement("span",null,"\u0414\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0441\u0442\u0440\u0435\u043b\u044c\u0431\u044b: "),l.a.createElement("span",null,this.props.shellDistance))))}}]),t}(s.Component);function we(e){var t=e.width||20,a=e.height||20;return e.onClick?l.a.createElement("button",{onClick:function(){return e.onClick()}},l.a.createElement("img",{src:e.image,alt:"",style:{width:t,height:a,padding:"5px"}})):l.a.createElement("button",{style:{background:"red"}},l.a.createElement("img",{src:e.image,alt:"",style:{width:t,height:a,padding:"5px"}}))}var Te=Object(p.b)(function(e){return{selectedRow:e.codeState.selectedRow,currentRow:e.codeState.currentRow,rows:e.codeState.rows,shellDistance:e.mapState.shellDistance,tank:e.mapState.tank,mapWidth:e.mapState.width,mapHeight:e.mapState.height,map:e.mapState.map,isPlay:e.codeState.isPlay,speed:e.codeState.speed}},function(e){return{rotateTurret:Object(h.a)(P,e),rotateTank:Object(h.a)(R,e),moveTankForward:Object(h.a)(D,e),moveTankBackward:Object(h.a)(A,e),moveTankRotateLeftAndForward:Object(h.a)(C,e),moveTankRotateRightAndForward:Object(h.a)(M,e),load:Object(h.a)(L,e),selectRow:Object(h.a)(y,e),start:Object(h.a)(X,e),stop:Object(h.a)(Y,e),pause:Object(h.a)(B,e),nextMove:Object(h.a)(I,e),restart:Object(h.a)(W,e),fire:Object(h.a)(F,e),increaseSpeed:Object(h.a)(H,e),decreaseSpeed:Object(h.a)(V,e)}})(Ee),Oe=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={isOpen:!1},a}return Object(c.a)(t,e),Object(n.a)(t,[{key:"handleClick",value:function(){this.setState({isOpen:!1})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("button",{id:"infoButton",className:"flex-row",onClick:function(){return e.setState({isOpen:!0})}},l.a.createElement("span",null,"INFO"),l.a.createElement("img",{src:"../images/menu/infobtn.svg",alt:""})),l.a.createElement(g.a,{isOpen:this.state.isOpen,onRequestClose:function(){return e.setState({isOpen:!1})}},l.a.createElement(ye,{onClick:function(){return e.handleClick()}})))}}]),t}(s.Component);function ye(e){return l.a.createElement("div",null,l.a.createElement("button",{onClick:function(){return e.onClick()}},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),"TBD")}var xe=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(n.a)(t,[{key:"loadTank",value:function(){var e=this.props.tank;if(!e)return null;var t=Object(u.a)({},ee($.tankBody,100),{position:"absolute",zIndex:9998,left:0,top:0,transform:"rotate(".concat(e.TankDirection,"deg)")}),a=Object(u.a)({},ee($.tankHead,100),{position:"absolute",zIndex:9999,left:0,top:0,transform:"rotate(".concat(e.TurretDirection,"deg)")}),r=0===this.props.tank.TurretStatus?$.tankStatus_NotLoaded:1===this.props.tank.TurretStatus?$.tankStatus_PartLoaded:$.tankStatus_Loaded,n=Object(u.a)({},ee(r,100),{position:"absolute",zIndex:9999,left:0,top:0});return[l.a.createElement("div",{style:t}),l.a.createElement("div",{style:a}),l.a.createElement("div",{style:n})]}},{key:"render",value:function(){return l.a.createElement("div",{id:"tankDiv",style:{position:"relative",height:100,width:100}},this.loadTank())}}]),t}(s.Component),Ne=Object(p.b)(function(e){return{tank:e.mapState.tank}})(xe);function je(e){return l.a.createElement("div",{className:"flex-column"},l.a.createElement("div",null,"\u0421\u043a\u043e\u0440\u043e\u0441\u0442\u044c \u0432\u043e\u0441\u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0434\u0435\u043d\u0438\u044f"),l.a.createElement("div",{className:"flex-row"},l.a.createElement("button",{style:{width:20,margin:5},onClick:function(){return e.onIncreaseClick()}}," + "),l.a.createElement("button",{style:{width:20,margin:5},onClick:function(){return e.onDecreaseClick()}}," - "),l.a.createElement("span",{style:{width:50}},600-e.speed)))}var _e=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(n.a)(t,[{key:"renderRows",value:function(){for(var e=this,t=[],a=this.props.rows,r=function(r){t.push(l.a.createElement(Pe,{selected:e.props.selectedRow===r,current:e.props.currentRow===r,index:r,value:a[r],OnRowClick:function(t){e.props.isPlay||e.props.selectRow(t)},onClickTD_LMB:function(t){e.props.isPlay||e.props.addPictureInTD(t,r)},onClickTD_RMB:function(t){e.props.isPlay||e.props.removePictureInTD(t,r)}}))},n=0;n<a.length;n++)r(n);return t}},{key:"handleSaveAlg",value:function(){(null!==this.props.rows[0].gunner||null!==this.props.rows[0].driver||null!==this.props.rows[0].charger||this.props.rows.length>1)&&this.props.saveAlg()}},{key:"fileLoad",value:function(e){var t=e.target.files,a=new FileReader,r=this.props.loadAlg;a.onload=function(e){r(e.target.result)},a.readAsText(t[0].slice())}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("div",{className:"flex-row flex-justify-evenly margin-5"},l.a.createElement(we,{image:"images/menu/savebtn.svg",onClick:function(){return e.handleSaveAlg()},width:20,height:20}),l.a.createElement("div",null,"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c"),l.a.createElement("input",{type:"file",onChange:function(t){return e.fileLoad(t)},style:{width:200}})),l.a.createElement("div",{id:"commandsDiv",className:"overflow overflow-y-visible"},l.a.createElement("table",{id:"commands"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("th",null,"#"),l.a.createElement("th",null,"\u041d\u0430\u0432\u043e\u0434\u0447\u0438\u043a"),l.a.createElement("th",null,"\u0412\u043e\u0434\u0438\u0442\u0435\u043b\u044c"),l.a.createElement("th",null,"\u0417\u0430\u0440\u044f\u0436\u0430\u044e\u0449\u0438\u0439")),this.renderRows()))))}}]),t}(s.Component),Re=Object(p.b)(K,Z)(_e),Pe=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("tr",{className:(this.props.selected?"selectedRow":"")+(this.props.current?" currentRow":""),onClick:function(){return e.props.OnRowClick(e.props.index)}},l.a.createElement("td",{style:{width:20}},this.props.index+1),l.a.createElement(De,{value:this.props.value.gunner,onClickTD_LMB:function(){return e.props.onClickTD_LMB("gunner")},onClickTD_RMB:function(){return e.props.onClickTD_RMB("gunner")}}),l.a.createElement(De,{value:this.props.value.driver,onClickTD_LMB:function(){return e.props.onClickTD_LMB("driver")},onClickTD_RMB:function(){return e.props.onClickTD_RMB("driver")}}),l.a.createElement(De,{value:this.props.value.charger,onClickTD_LMB:function(){return e.props.onClickTD_LMB("charger")},onClickTD_RMB:function(){return e.props.onClickTD_RMB("charger")}}))}}]),t}(s.Component);function De(e){return l.a.createElement("td",{className:"gameTD",onClick:function(){return e.onClickTD_LMB()},onContextMenu:function(t){t.preventDefault(),e.onClickTD_RMB()}},l.a.createElement("div",{className:"flex-column flex-justify-center"},l.a.createElement("div",{style:e.value})))}var Ae=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(n.a)(t,[{key:"renderButtons",value:function(e){var t=[],a=this.props,r=a.gunnerSelectedIndex,n=a.driverSelectedIndex,i=a.chargerSelectedIndex,o=a.changeSelectedButton;switch(e){case"gunner":for(var c=function(a){t.push(l.a.createElement(Me,{key:"".concat(e," - ").concat(a),index:a,class:e,selected:r===a,onClick:function(){return o(a,e)}}))},s=0;s<te;s++)c(s);break;case"driver":var u=function(a){t.push(l.a.createElement(Me,{key:"".concat(e," - ").concat(a),index:a,class:e,selected:n===a,onClick:function(){return o(a,e)}}))};for(s=0;s<ae;s++)u(s);break;case"charger":var d=function(a){t.push(l.a.createElement(Me,{key:"".concat(e," - ").concat(a),index:a,class:e,selected:i===a,onClick:function(){return o(a,e)}}))};for(s=0;s<3;s++)d(s)}return t}},{key:"render",value:function(){return l.a.createElement("div",{className:"flex-row flex-align-start overflow"},l.a.createElement("div",{className:"flex-column"},l.a.createElement("div",{style:{height:20},className:"padding-5"},"\u041d\u0430\u0432\u043e\u0434\u0447\u0438\u043a"),l.a.createElement("div",{className:"gameButtonsColumn flex-row flex-wrap"},this.renderButtons("gunner"))),l.a.createElement("div",{className:"flex-column"},l.a.createElement("div",{style:{height:20},className:"padding-5"},"\u0412\u043e\u0434\u0438\u0442\u0435\u043b\u044c"),l.a.createElement("div",{className:"gameButtonsColumn flex-row flex-wrap"},this.renderButtons("driver"))),l.a.createElement("div",{className:"flex-column"},l.a.createElement("div",{style:{height:20},className:"padding-5"},"\u0417\u0430\u0440\u044f\u0436\u0430\u044e\u0449\u0438\u0439"),l.a.createElement("div",{className:"gameButtonsColumn flex-row flex-wrap"},this.renderButtons("charger"))),l.a.createElement("div",{className:"flex-column"}))}}]),t}(s.Component),Ce=Object(p.b)(K,Z)(Ae);function Me(e){return l.a.createElement("button",{className:e.class+(e.selected?" selected":"")+" margin-1",style:ne(e.class,e.index),onClick:e.onClick})}var Le=Se,Xe=(a(21),function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{id:"mapDiv"},l.a.createElement(p.a,{store:ue},l.a.createElement(Be,null)))}}]),t}(s.Component)),Ie=function(e){function t(e){var a;return Object(r.a)(this,t),a=Object(i.a)(this,Object(o.a)(t).call(this,e)),e.loadMap(""),a}return Object(c.a)(t,e),Object(n.a)(t,[{key:"renderTable",value:function(){for(var e=this.props.tileSize,t=this.props,a=t.map,r=t.mapWidth,n=t.mapHeight,i=(t.reduceHP,[]),o=0;o<n;o++){for(var c=[],s=0;s<r;s++){if(a[o][s].length>0&&(a[o][s][0].tile===$.littleMountains||a[o][s][0].tile===$.littleSwamp)&&null!==a[o][s][0].XShift&&null!==a[o][s][0].YShift){for(var u=[[null,null,null],[null,null,null],[null,null,null]],d=0;d<a[o][s].length;d++)u[a[o][s][d].YShift+1][a[o][s][d].XShift+1]=l.a.createElement(Ye,{key:"tile ".concat(o," - ").concat(s,": ").concat(a[o][s][d].YShift+1," - ").concat(a[o][s][d].XShift+1),value:ee(a[o][s][d].tile,this.props.tileSize,!0)});for(var g=0;g<9;g++)u[Math.floor(g/3)][g%3]||(u[Math.floor(g/3)][g%3]=l.a.createElement(Ye,{key:"tile ".concat(o," - ").concat(s,": ").concat(Math.floor(g/3)," - ").concat(g%3),value:ee($.empty,this.props.tileSize,!0)}));for(var p=[],h=0;h<3;h++){for(var m=[],v=0;v<3;v++)m.push(u[h][v]);p.push(l.a.createElement("div",{className:"flex-row"},m))}c.push(l.a.createElement("div",{key:"div ".concat(o," - ").concat(s),className:"mapTile flex-column",style:{height:e,width:e}},p))}else for(var b=0;b<a[o][s].length;b++)c.push(l.a.createElement(Ye,{key:"tile ".concat(o," - ").concat(s),value:ee(a[o][s][b].tile,this.props.tileSize)}));if(0===a[o][s].length){var f=ee($.empty,this.props.tileSize);c.push(l.a.createElement(Ye,{key:"tile ".concat(o," - ").concat(s),value:f}))}}i.push(l.a.createElement("div",{className:"flex-row"},c))}return l.a.createElement("div",{className:"flex-column flex-align-start",style:{position:"relative"}},this.loadTank(),this.loadTrails(),i)}},{key:"loadTank",value:function(){var e=this.props.tileSize,t=this.props.tank;if(!t)return null;var a=Object(u.a)({},ee($.tankBody,this.props.tileSize),{position:"absolute",zIndex:9997,left:t.X*(e+2),top:t.Y*(e+2),transform:"rotate(".concat(t.TankDirection,"deg)")}),r=Object(u.a)({},ee($.tankHead,this.props.tileSize),{position:"absolute",zIndex:9998,left:t.X*(e+2),top:t.Y*(e+2),transform:"rotate(".concat(t.TurretDirection,"deg)")}),n=0===this.props.tank.TurretStatus?$.tankStatus_NotLoaded:1===this.props.tank.TurretStatus?$.tankStatus_PartLoaded:$.tankStatus_Loaded,i=Object(u.a)({},ee(n,this.props.tileSize),{position:"absolute",zIndex:9999,left:t.X*(e+2),top:t.Y*(e+2)});return[l.a.createElement("div",{style:a}),l.a.createElement("div",{style:r}),l.a.createElement("div",{style:i})]}},{key:"loadTrails",value:function(){var e=this.props.tileSize,t=this.props.mapTracers;if(0===t.length)return null;for(var a=[],r=t.length,n=0;n<r;n++){var i=t[n].tag===$.littleTrailDiag||t[n].tag===$.littleTrailVert,o=t[n].X*(e*(i?3:1)+2)+(i?(e+2)*t[n].XShift:0),c=t[n].Y*(e*(i?3:1)+2)+(i?(e+2)*t[n].XShift:0),s=Object(u.a)({},ee(t[n].tag,this.props.tileSize),{position:"absolute",zIndex:9996,left:o,top:c,transform:"rotate(".concat(t[n].inverted?90:0,"deg)")});a.push(l.a.createElement("div",{style:s}))}return a}},{key:"fileLoad",value:function(e){var t=e.target.files,a=new FileReader,r=this.props.loadMap;a.onload=function(e){r(e.target.result)},a.readAsText(t[0].slice())}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("div",{id:"mapTitle",className:"flex-row"},l.a.createElement("input",{type:"file",onChange:function(t){return e.fileLoad(t)}}),l.a.createElement("button",{style:{width:20},onClick:function(){return e.props.zoomIn()}},"+"),l.a.createElement("button",{style:{width:20},onClick:function(){return e.props.zoomOut()}},"-"),l.a.createElement("div",null,this.props.tileSize," ")),l.a.createElement("div",{id:"mapCont",className:"overflow-visible"},this.renderTable()))}}]),t}(s.Component);function Ye(e){var t={backgroundImage:e.value.backgroundImage,backgroundPosition:e.value.backgroundPosition,border:e.value.border,height:e.value.height,width:e.value.width,backgroundSize:e.value.backgroundSize};return l.a.createElement("div",{className:"mapTile",style:t,onClickCapture:function(){return e.onClick()}})}var Be=Object(p.b)(function(e){return{shellDistance:e.mapState.shellDistance,tank:e.mapState.tank,mapWidth:e.mapState.mapWidth,mapHeight:e.mapState.mapHeight,map:e.mapState.map,mapTracers:e.mapState.mapTracers,tileSize:e.mapState.tileSize}},function(e){return{reduceHP:Object(h.a)(x,e),loadMap:Object(h.a)(N,e),zoomIn:Object(h.a)(j,e),zoomOut:Object(h.a)(_,e)}})(Ie),We=Xe,Fe=a(13),ze=a.n(Fe),Ue=(a(42),function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},l.a.createElement("div",{id:"snavigator"},"\u0422\u0430\u043d\u043a\u043e\u0432\u044b\u0439 \u042d\u043a\u0438\u043f\u0430\u0436"),l.a.createElement("div",{id:"gridMain"},l.a.createElement(We,null),l.a.createElement(Le,null)))}}]),t}(s.Component));ze.a.render(l.a.createElement(Ue,null),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.2cc4cc33.chunk.js.map