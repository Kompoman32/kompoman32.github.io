{"version":3,"sources":["store/actions.js","store/reducers.js","store/stores.js","components/info.js","components/menu.js","components/map.js","index.js"],"names":["actionsCode","CHANGE_SELECTED_BUTTON","ADD_PICTURE_IN_TD","REMOVE_PICTURE_IN_TD","CLEAR","actionsMap","REDUCE_HP","LOAD_MAP","ZOOM","actionsMap_Code","SELECT_ROW","ROTATE_TANK","ROTATE_TURRET","MOVE_TANK","MOVE_TANK_ROTATE_AND_FORWARD","LOAD","START","STOP","PAUSE","RESTART","NEXT_MOVE","FIRE","SAVE_ALG","LOAD_ALG","CHANGE_SPEED","actionsTypes","changeSelectedButton","index","className","type","payload","addPictureInTD","indexRow","removePictureInTD","SelectRow","reduceHP","i","j","loadMap","text","zoomIn","zoomOut","RotateTank","direction","RotateTurret","MoveTankForward","MoveTankBackward","MoveTankRotateLeftAndForward","MoveTankRotateRightAndForward","Load","Start","NextMove","Stop","Pause","Restart","Fire","SaveAlg","LoadAlg","IncreaseSpeed","DecreaseSpeed","ClearRows","codeReducer","state","arguments","length","undefined","initialState_Code","action","_action$payload","Object","objectSpread","gunnerSelectedIndex","driverSelectedIndex","chargerSelectedIndex","rows","slice","_action$payload2","gunner","getGameButtonImage","driver","charger","push","toConsumableArray","_action$payload3","pop","selectedRow","currentRow","putStateToProps_Code","codeState","isPlay","putActionsToProps_Code","dispatch","bindActionCreators","selectRow","saveAlg","loadAlg","clear","mapReducer","initialState_Map","mapArr","map","_action$payload4","tile","tileNames","_3hp","_2hp","_1hp","targetCount","initialMap","xmlDoc","window","DOMParser","parseFromString","ActiveXObject","async","loadXML","world","getElementsByTagName","width","Number","getAttribute","height","shellDistance","tankEl","turretstatus","innerHTML","tank","X","Y","TankDirection","getAngleByDirection","TurretDirection","TurretStatus","units","children","row","c","XShift","YShift","empty","tagName","swamp","mountains","littleMountains","littleSwamp","mapWidth","mapHeight","mapTracers","e","alert","tileSize","getPointByDirection","nextPoint","classT","gameButtons","concat","angle","transformAngle","North","East","South","West","NorthWest","NorthEast","SouthWest","SouthEast","getDirectionByAngle","map_codeReducer","initialState","newAngle","mapState","newAngleBody","newAngleTurret","status","isPause","console","log","_state$mapState","newX","newY","point","tag","trailVert","trailDiag","inverted","offsetX","offsetY","k","obj","littleTrailVert","littleTrailDiag","document","implementation","createDocument","program","createElement","command","elName","appendChild","data","XMLSerializer","serializeToString","file","Blob","navigator","msSaveOrOpenBlob","a","url","URL","createObjectURL","href","download","body","dataset","downloadurl","join","click","setTimeout","removeChild","revokeObjectURL","commands","childNodes","nodeName","speed","tankBody","tankHead","tankStatus_NotLoaded","tankStatus_PartLoaded","tankStatus_Loaded","getmapTile","anotherTileSize","little","store","tS","getState","backgroundImage","backgroundPosition","positionArr","split","Math","floor","backgroundSize","border","gunnerBtnsCount","driverBtnsCount","MoveForward","MoveBackward","TurnLeftAndMoveForward","TurnRightAndMoveForward","TurnLeftAndMoveBackward","TurnRightAndMoveBackward","NotLoaded","PartiallyLoaded","Ready","isNaN","left","getMenuButtons","createStore","shrinkGameButtonImage","image","shrinkgetMenuButtons","Info","props","react_default","style","position","right","padding","onClick","id","marginBottom","marginTop","alt","error","Menu","es","WrappedGameTable","WrappedMenuButtons","WrappedGameButtonsTable","Component","MenuButtons","_this","this","start","playNext","restart","pause","_this2","nextMove","stop","_this3","handleUntilRow","_this4","_this$props","currRowIndex","currRow","rotateTurret","fire","rotateTank","moveTankForward","moveTankBackward","_this$props$tank","msg","moveTankRotateLeftAndForward","moveTankRotateRightAndForward","_this$props$tank2","load","_this5","menu_InfoButton","WrappedTankInfo","SpeedRange","onIncreaseClick","increaseSpeed","onDecreaseClick","decreaseSpeed","MenuButton","handlePlay","handlePause","handleStop","handleNextStep","textAlign","connect","InfoButton","_this6","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","isOpen","setState","_this7","lib_default","onRequestClose","handleClick","TankInfo","valueBody","zIndex","top","transform","valueHead","valueStatus","loadTank","GameTable","_this8","arr","_loop","menu_GameTableRow","selected","current","value","OnRowClick","o","onClickTD_LMB","onClickTD_RMB","evt","files","target","reader","FileReader","onload","result","readAsText","_this9","handleSaveAlg","htmlFor","onChange","fileLoad","handleClear","renderRows","GameTableRow","_this10","GameTableCell","onContextMenu","preventDefault","GameButtonsTable","_this$props2","_loop2","GameButton","key","class","_loop3","_loop4","renderButtons","Map","WrappedMapTable","MapTable","sonic","elements","combinedTile","MapTile","combinedDiv","combinedRow","t","loadTrails","getElementById","play","volume","currentTime","renderTable","src","preload","display","loop","hideSonic","animation","onClickCapture","Game","flexDirection","components_map","menu","ReactDOM","render","src_Game"],"mappings":"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","file":"static/js/main.e6ee3fe3.chunk.js","sourcesContent":["import {initialState_Map, tileNames} from './stores'\r\nimport {getAngleByDirection} from './stores'\r\n\r\nexport const actionsCode={\r\n    CHANGE_SELECTED_BUTTON: \"CHANGE_SELECTED_BUTTON\",\r\n    ADD_PICTURE_IN_TD: \"ADD_PICTURE_IN_TD\",\r\n    REMOVE_PICTURE_IN_TD: \"REMOVE_PICTURE_IN_TD\",\r\n    CLEAR: \"CLEAR\",\r\n};\r\nexport const actionsMap={\r\n    REDUCE_HP: \"REDUCE_HP\",\r\n    LOAD_MAP: \"LOAD_MAP\",\r\n    ZOOM: \"ZOOM\",\r\n};\r\nexport const actionsMap_Code={\r\n    SELECT_ROW: \"SELECT_ROW\",\r\n    ROTATE_TANK: \"ROTATE_TANK\",\r\n    ROTATE_TURRET: \"ROTATE_TURRET\",\r\n    MOVE_TANK: \"MOVE_TANK\",\r\n    MOVE_TANK_ROTATE_AND_FORWARD: \"MOVE_TANK_ROTATE_AND_FORWARD\",\r\n    LOAD: \"LOAD\",\r\n    START: \"START\",\r\n    STOP: \"STOP\",\r\n    PAUSE: \"PAUSE\",\r\n    RESTART: \"RESTART\",\r\n    NEXT_MOVE: \"NEXT_MOVE\",\r\n    FIRE: \"FIRE\",\r\n    SAVE_ALG: \"SAVE_ALG\",\r\n    LOAD_ALG: \"LOAD_ALG\",\r\n    CHANGE_SPEED: \"CHANGE_SPEED\",\r\n};\r\nexport const actionsTypes ={\r\n    MAP: actionsMap,\r\n    CODE: actionsCode,\r\n    MAP_CODE: actionsMap_Code\r\n};\r\n\r\n\r\n//----------------------------------------------\r\n\r\nexport const changeSelectedButton = (index, className) =>{\r\n    return{\r\n        type: actionsCode.CHANGE_SELECTED_BUTTON,\r\n        payload: {\r\n            index: index,\r\n            className: className\r\n        }\r\n    }\r\n};\r\nexport const addPictureInTD = (className , indexRow) => {\r\n    return{\r\n        type: actionsCode.ADD_PICTURE_IN_TD,\r\n        payload: {\r\n            className: className,\r\n            indexRow: indexRow\r\n        }\r\n    };\r\n};\r\nexport const removePictureInTD = (className , indexRow) => {\r\n    return{\r\n        type: actionsCode.REMOVE_PICTURE_IN_TD,\r\n        payload: {\r\n            className: className,\r\n            indexRow: indexRow\r\n        }\r\n    };\r\n};\r\nexport const SelectRow = (index) => {\r\n    return{\r\n        type: actionsMap_Code.SELECT_ROW,\r\n        payload: index\r\n    };\r\n};\r\n\r\n//-------------------------------------------------\r\n\r\nexport const reduceHP = (i, j) => {\r\n    return {\r\n        type: actionsMap.REDUCE_HP,\r\n        payload: {\r\n            i:i,\r\n            j:j\r\n        }\r\n    }\r\n};\r\nexport const loadMap = (text) => {\r\n    return {\r\n        type: actionsMap.LOAD_MAP,\r\n        payload: text\r\n    }\r\n};\r\nexport const zoomIn = () =>{\r\n    return {\r\n        type: actionsMap.ZOOM,\r\n        payload: 20\r\n    }\r\n};\r\nexport const zoomOut = () =>{\r\n    return {\r\n        type: actionsMap.ZOOM,\r\n        payload: -20\r\n    }\r\n};\r\n\r\n//----------------------------------------------\r\n\r\nexport const RotateTank = (direction) => {\r\n    return {\r\n        type: actionsMap_Code.ROTATE_TANK,\r\n        payload: direction\r\n    }\r\n};\r\nexport const RotateTurret = (direction) => {\r\n    return {\r\n        type: actionsMap_Code.ROTATE_TURRET,\r\n        payload: direction\r\n    }\r\n};\r\nexport const MoveTankForward = () => {\r\n    return {\r\n        type: actionsMap_Code.MOVE_TANK,\r\n        payload: true\r\n    }\r\n};\r\nexport const MoveTankBackward = () => {\r\n    return {\r\n        type: actionsMap_Code.MOVE_TANK,\r\n        payload: false\r\n    }\r\n};\r\nexport const MoveTankRotateLeftAndForward = () => {\r\n    return {\r\n        type: actionsMap_Code.MOVE_TANK_ROTATE_AND_FORWARD,\r\n        payload: true\r\n    }\r\n};\r\nexport const MoveTankRotateRightAndForward = () => {\r\n    return {\r\n        type: actionsMap_Code.MOVE_TANK_ROTATE_AND_FORWARD,\r\n        payload: false\r\n    }\r\n};\r\nexport const Load = () => {\r\n    return {\r\n        type: actionsMap_Code.LOAD,\r\n    }\r\n};\r\nexport const Start = () => {\r\n    return {\r\n        type: actionsMap_Code.START,\r\n    }\r\n};\r\nexport const NextMove = () => {\r\n    return {\r\n        type: actionsMap_Code.NEXT_MOVE,\r\n    }\r\n};\r\nexport const Stop = () => {\r\n    return {\r\n        type: actionsMap_Code.STOP,\r\n    }\r\n};\r\nexport const Pause = () => {\r\n    return {\r\n        type: actionsMap_Code.PAUSE,\r\n    }\r\n};\r\nexport const Restart = () => {\r\n    return {\r\n        type: actionsMap_Code.RESTART,\r\n        payload: \"\"\r\n    }\r\n};\r\nexport const Fire = () => {\r\n    return {\r\n        type: actionsMap_Code.FIRE,\r\n    }\r\n};\r\nexport const SaveAlg = () => {\r\n    return {\r\n        type: actionsMap_Code.SAVE_ALG,\r\n    }\r\n};\r\nexport const LoadAlg = (text) => {\r\n    return {\r\n        type: actionsMap_Code.LOAD_ALG,\r\n        payload: text,\r\n    }\r\n};\r\nexport const IncreaseSpeed = () => {\r\n    return {\r\n        type: actionsMap_Code.CHANGE_SPEED,\r\n        payload: true\r\n    }\r\n};\r\nexport const DecreaseSpeed = () => {\r\n    return {\r\n        type: actionsMap_Code.CHANGE_SPEED,\r\n        payload: false\r\n    }\r\n};\r\nexport const ClearRows = () => {\r\n    return {\r\n        type: actionsCode.CLEAR,\r\n    }\r\n};\r\n\r\n","import {bindActionCreators} from 'redux'\r\nimport {getGameButtonImage,\r\n        tileNames,getmapTile,\r\n        initialState, initialState_Map, initialState_Code} from \"./stores.js\";\r\nimport {actionsTypes, actionsCode, actionsMap_Code, actionsMap ,\r\n        reduceHP, loadMap, zoomIn , zoomOut,\r\n        RotateTank, RotateTurret,Load, Start, Stop, NextMove, Restart, Fire, Pause,SaveAlg, LoadAlg,\r\n        IncreaseSpeed, DecreaseSpeed,ClearRows,\r\n        MoveTankForward, MoveTankBackward, MoveTankRotateLeftAndForward,\r\n        MoveTankRotateRightAndForward,\r\n        addPictureInTD, changeSelectedButton, removePictureInTD, SelectRow,} from \"./actions.js\";\r\nimport {gameButtons, getAngleByDirection, getDirectionByAngle, transformAngle} from \"./stores\";\r\n\r\n\r\nexport const rootReducer = (state = initialState, action) =>{\r\n    if (actionsTypes.MAP[`${action.type}`] +\"\" !== \"undefined\")\r\n        return {...state, mapState: mapReducer(state.mapState, action)};\r\n\r\n    if (actionsTypes.CODE[`${action.type}`]+\"\" !== \"undefined\")\r\n        return {...state, codeState: codeReducer(state.codeState, action)};\r\n\r\n    if (actionsTypes.MAP_CODE[`${action.type}`]+\"\" !== \"undefined\")\r\n        return map_codeReducer(state, action);\r\n    return state;\r\n};\r\n\r\n//-----------------------------------------------------------\r\n\r\nexport const codeReducer = (state = initialState_Code , action) => {\r\n    switch (action.type) {\r\n        case actionsCode.CHANGE_SELECTED_BUTTON:\r\n        {\r\n            const {index, className} = action.payload;\r\n\r\n            if (className === \"gunner\") {\r\n                return {\r\n                    ...state,\r\n                    gunnerSelectedIndex: index,\r\n                }\r\n            }\r\n            if (className === \"driver\") {\r\n                return {\r\n                    ...state,\r\n                    driverSelectedIndex: index,\r\n                }\r\n            }\r\n            if (className === \"charger\") {\r\n                return {\r\n                    ...state,\r\n                    chargerSelectedIndex: index,\r\n                }\r\n            }\r\n            return state;\r\n        }\r\n        case actionsCode.ADD_PICTURE_IN_TD:\r\n        {\r\n            const rows = state.rows.slice();\r\n            const { indexRow, className } = action.payload;\r\n\r\n            rows[indexRow]={\r\n                gunner: className === \"gunner\" ? getGameButtonImage(\"gunner\", state.gunnerSelectedIndex ) : rows[indexRow].gunner,\r\n                driver: className === \"driver\" ? getGameButtonImage(\"driver\", state.driverSelectedIndex ) : rows[indexRow].driver,\r\n                charger: className === \"charger\" ? getGameButtonImage(\"charger\", state.chargerSelectedIndex ) : rows[indexRow].charger\r\n            };\r\n\r\n            while (\r\n                rows[rows.length-1].gunner != null ||\r\n                rows[rows.length-1].driver != null ||\r\n                rows[rows.length-1].charger != null)\r\n            {\r\n                rows.push(\r\n                    {\r\n                        gunner: null,\r\n                        driver: null,\r\n                        charger: null\r\n                    });\r\n            }\r\n\r\n\r\n            return {...state, rows: rows}\r\n        }\r\n        case actionsCode.REMOVE_PICTURE_IN_TD:\r\n        {\r\n            let rows = [...state.rows];\r\n            const { indexRow, className } = action.payload;\r\n\r\n            // console.log(state);\r\n            // console.log(rows.length);\r\n            // console.log(JSON.stringify(rows ));\r\n\r\n            rows[indexRow] = {\r\n                gunner: className === \"gunner\" ? null : rows[indexRow].gunner,\r\n                driver: className === \"driver\" ? null : rows[indexRow].driver,\r\n                charger: className === \"charger\" ? null : rows[indexRow].charger\r\n            };\r\n\r\n            // console.log(rows);\r\n\r\n            while (\r\n                rows.length > 0 &&\r\n                rows[rows.length-1].gunner == null &&\r\n                rows[rows.length-1].driver == null &&\r\n                rows[rows.length-1].charger == null)\r\n            {\r\n                rows.pop();\r\n            }\r\n            rows.push(\r\n                {\r\n                    gunner: null,\r\n                    driver: null,\r\n                    charger: null\r\n                });\r\n\r\n            return {...state, rows: rows}\r\n        }\r\n        case actionsCode.CLEAR:{\r\n            return {\r\n                ...state,  rows: [{gunner:null, driver:null, charger:null}],\r\n                selectedRow: 0, currentRow:0\r\n            }\r\n        }\r\n        default:\r\n            break;\r\n    }\r\n    return state\r\n};\r\n\r\nexport const putStateToProps_Code = (state) =>{\r\n\r\n    return {\r\n        gunnerSelectedIndex: state.codeState.gunnerSelectedIndex,\r\n        driverSelectedIndex: state.codeState.driverSelectedIndex,\r\n        chargerSelectedIndex: state.codeState.chargerSelectedIndex,\r\n        selectedRow: state.codeState.selectedRow,\r\n        currentRow: state.codeState.currentRow,\r\n        rows: state.codeState.rows,\r\n        isPlay: state.codeState.isPlay\r\n    }\r\n};\r\nexport const putActionsToProps_Code = (dispatch) => {\r\n    return {\r\n        changeSelectedButton: bindActionCreators(changeSelectedButton, dispatch),\r\n        addPictureInTD: bindActionCreators(addPictureInTD, dispatch),\r\n        removePictureInTD: bindActionCreators(removePictureInTD, dispatch),\r\n        selectRow: bindActionCreators(SelectRow, dispatch),\r\n        saveAlg: bindActionCreators(SaveAlg, dispatch),\r\n        loadAlg: bindActionCreators(LoadAlg, dispatch),\r\n        clear: bindActionCreators(ClearRows, dispatch),\r\n    }\r\n};\r\n\r\n//-----------------------------------------------------------\r\n\r\nexport const mapReducer = (state = initialState_Map, action) => {\r\n    switch (action.type) {\r\n        case actionsMap.REDUCE_HP: {\r\n            let mapArr = state.map.slice();\r\n            let {i,j} = action.payload;\r\n            let img = mapArr[j][i][0];\r\n\r\n            switch (img.tile) {\r\n                case tileNames._3hp:\r\n                    mapArr[j][i][0] = {tile: tileNames._2hp };\r\n                    return {...state, map: mapArr};\r\n\r\n                case tileNames._2hp:\r\n                    mapArr[j][i][0] = {tile: tileNames._1hp };\r\n                    return {...state, map: mapArr};\r\n\r\n                case tileNames._1hp:\r\n                    mapArr[j][i] = [];\r\n                    return {...state, map: mapArr, targetCount: state.targetCount - 1 };\r\n            }\r\n            return state\r\n        }\r\n        case actionsMap.LOAD_MAP:{\r\n            const text = action.payload === \"\"? state.initialMap : action.payload;\r\n\r\n            let xmlDoc = null;\r\n\r\n            try {\r\n                if (window.DOMParser) {\r\n                    // code for modern browsers\r\n                    const parser = new DOMParser();\r\n                    xmlDoc = parser.parseFromString(text,\"text/xml\");\r\n                }\r\n                else {\r\n                    // code for old IE browsers\r\n                    // eslint-disable-next-line\r\n                    xmlDoc = new ActiveXObject(\"Microsoft.XMLDOM\");\r\n                    xmlDoc.async = false;\r\n                    xmlDoc.loadXML(text);\r\n                }\r\n\r\n                let targetCount = 0;\r\n\r\n                const world = xmlDoc.getElementsByTagName('World')[0];\r\n                const width = Number(world.getAttribute('Width'));\r\n                const height = Number(world.getAttribute('Height'));\r\n                const shellDistance = Number(world.getAttribute('ShellDistance'));\r\n\r\n                const tankEl = world.getElementsByTagName('Tank')[0];\r\n                let turretstatus = 0;\r\n                switch (tankEl.getElementsByTagName('TurretStatus')[0].innerHTML) {\r\n                    case \"PartiallyLoaded\":\r\n                        turretstatus = 1;\r\n                        break;\r\n                    case \"Ready\":\r\n                        turretstatus = 2;\r\n                        break;\r\n                }\r\n\r\n\r\n                const tank = {\r\n                    X: Number(tankEl.getAttribute('X')),\r\n                    Y: Number(tankEl.getAttribute('Y')),\r\n                    TankDirection: getAngleByDirection(tankEl.getElementsByTagName('TankDirection')[0].innerHTML),\r\n                    TurretDirection: getAngleByDirection(tankEl.getElementsByTagName('TurretDirection')[0].innerHTML),\r\n                    TurretStatus: turretstatus,\r\n                };\r\n                const units = world.getElementsByTagName('Units')[0].children;\r\n\r\n                let map = [];\r\n                for (let i = 0 ; i < height; i++){\r\n                    let row = [];\r\n                    for (let j = 0 ; j < width; j++) {\r\n                        row.push([]);\r\n                    }\r\n                    map.push(row)\r\n                }\r\n\r\n\r\n                for(let c = 0 ; c < units.length; c++){\r\n                    const X = Number(units[c].getAttribute('X'));\r\n                    const Y = Number(units[c].getAttribute('Y'));\r\n                    let XShift = units[c].getAttribute('XShift');\r\n                    if (XShift)\r\n                        XShift = Number(units[c].getAttribute('XShift'));\r\n                    let YShift = units[c].getAttribute('YShift');\r\n                    if (YShift)\r\n                        YShift = Number(units[c].getAttribute('YShift'));\r\n\r\n                    let tile = tileNames.empty;\r\n                    switch (units[c].tagName) {\r\n                        case \"Swamp\":{\r\n                            tile = (tileNames.swamp);\r\n                            break;\r\n                        }\r\n                        case \"Rock\":{\r\n                            tile = (tileNames.mountains);\r\n                            break;\r\n                        }\r\n                        case \"LittleRock\":{\r\n                            tile = (tileNames.littleMountains);\r\n                            break;\r\n                        }\r\n                        case \"LittleSwamp\":{\r\n                            tile = (tileNames.littleSwamp);\r\n                            break;\r\n                        }\r\n                        case \"LittlePillbox\":{\r\n                            targetCount+=1;\r\n                            tile = (tileNames._1hp);\r\n                            break;\r\n                        }\r\n                        case \"MediumPillbox\":{\r\n                            targetCount+=1;\r\n                            tile = (tileNames._2hp);\r\n                            break;\r\n                        }\r\n                        case \"BigPillbox\":{\r\n                            targetCount+=1;\r\n                            tile = (tileNames._3hp);\r\n                            break;\r\n                        }\r\n                    }\r\n                    map[Y][X].push({ XShift: XShift, YShift: YShift, tile: tile});\r\n                }\r\n                return {...state,\r\n                        shellDistance: shellDistance,\r\n                        tank: tank,\r\n                        mapWidth: width,\r\n                        mapHeight: height,\r\n                        map: map,\r\n                        mapTracers:[],\r\n                        initialMap: text,\r\n                        targetCount: targetCount\r\n                }\r\n            }\r\n            catch (e) {\r\n                alert('Ошибка файл карты неправильно сформирован');\r\n            }\r\n            break;\r\n        }\r\n        case actionsMap.ZOOM:{\r\n            let {tileSize} = state;\r\n            tileSize += action.payload;\r\n            if (tileSize < 20)\r\n                {tileSize = 20;}\r\n            if (tileSize > 80)\r\n                {tileSize = 80;}\r\n            return {...state, tileSize: tileSize};\r\n        }\r\n    }\r\n    return state\r\n};\r\n\r\nexport const putStateToProps_Map = (state) =>{\r\n    return {\r\n        shellDistance: state.mapState.shellDistance,\r\n        tank: state.mapState.tank,\r\n        mapWidth: state.mapState.mapWidth,\r\n        mapHeight: state.mapState.mapHeight,\r\n        map: state.mapState.map,\r\n        mapTracers: state.mapState.mapTracers,\r\n        tileSize: state.mapState.tileSize,\r\n    }\r\n};\r\nexport const putActionsToProps_Map = (dispatch) => {\r\n    return {\r\n        reduceHP: bindActionCreators(reduceHP, dispatch),\r\n        loadMap: bindActionCreators(loadMap, dispatch),\r\n        zoomIn: bindActionCreators(zoomIn, dispatch),\r\n        zoomOut: bindActionCreators(zoomOut, dispatch)\r\n    }\r\n};\r\n\r\n//-----------------------------------------------------------\r\n\r\nconst getPointByDirection = (className, direction) =>{\r\n    let nextPoint= [0,0];\r\n\r\n    const classT = gameButtons[`${className}`];\r\n\r\n    switch (getDirectionByAngle(className, direction)) {\r\n        case classT.North:\r\n            nextPoint = [0, -1];\r\n            break;\r\n        case classT.NorthEast:\r\n            nextPoint = [1, -1];\r\n            break;\r\n        case classT.East:\r\n            nextPoint = [1, 0];\r\n            break;\r\n        case classT.SouthEast:\r\n            nextPoint = [1, 1];\r\n            break;\r\n        case classT.South:\r\n            nextPoint = [0, 1];\r\n            break;\r\n        case classT.SouthWest:\r\n            nextPoint = [-1, 1];\r\n            break;\r\n        case classT.West:\r\n            nextPoint = [-1, 0];\r\n            break;\r\n        case classT.NorthWest:\r\n            nextPoint = [-1, -1];\r\n            break;\r\n    }\r\n    return nextPoint;\r\n}\r\n\r\n// function getXMLTag(className, tag ) {\r\n//     switch (className) {\r\n//         case \"gunner\":\r\n//             switch (tag) {\r\n//                 case gameButtons.gunner.North:\r\n//                     return \"PauseGunner\";\r\n//                 case gameButtons.gunner.NorthEast:\r\n//                     return \"TurnTurretClockwise45\";\r\n//                 case gameButtons.gunner.East:\r\n//                     return \"TurnTurretClockwise90\";\r\n//                 case gameButtons.gunner.SouthEast:\r\n//                     return \"TurnTurretClockwise135\";\r\n//                 case gameButtons.gunner.South:\r\n//                     return \"TurnTurretAround\";\r\n//                 case gameButtons.gunner.SouthWest:\r\n//                     return \"TurnTurretCounterClockwise135\";\r\n//                 case gameButtons.gunner.West:\r\n//                     return \"TurnTurretCounterClockwise90\";\r\n//                 case gameButtons.gunner.NorthWest:\r\n//                     return \"TurnTurretCounterClockwise45\";\r\n//                 case gameButtons.gunner.Fire:\r\n//                     return \"FireCommand\";\r\n//                 case gameButtons.gunner.Pause:\r\n//                     return \"PauseGunner\"\r\n//             }\r\n//             break;\r\n//         case \"driver\":\r\n//             break;\r\n//         case \"charger\":\r\n//             break;\r\n//         default:\r\n//     }\r\n//     return \"\"\r\n// }\r\n\r\nexport const map_codeReducer = (state = initialState, action) =>{\r\n    switch (action.type) {\r\n        case actionsMap_Code.SELECT_ROW:\r\n        {\r\n            return {...state, codeState:{...state.codeState, selectedRow: action.payload }}\r\n        }\r\n        case actionsMap_Code.ROTATE_TURRET:\r\n        {\r\n            const newAngle = transformAngle(getAngleByDirection(action.payload)\r\n                                + state.mapState.tank.TurretDirection);\r\n            if (state.mapState.tank)\r\n                return {...state, mapState:{...state.mapState,\r\n                        tank: {...state.mapState.tank,\r\n                            TurretDirection: newAngle }}};\r\n            break;\r\n        }\r\n        case actionsMap_Code.ROTATE_TANK:\r\n        {\r\n            const newAngleBody = transformAngle(getAngleByDirection(action.payload)\r\n                                    + state.mapState.tank.TankDirection);\r\n            const newAngleTurret = transformAngle(getAngleByDirection(action.payload)\r\n                                    + state.mapState.tank.TurretDirection);\r\n            if (state.mapState.tank)\r\n                return {...state, mapState:{...state.mapState,\r\n                        tank: {...state.mapState.tank,\r\n                            TankDirection: newAngleBody,\r\n                            TurretDirection: newAngleTurret}}};\r\n            break;\r\n        }\r\n        case actionsMap_Code.MOVE_TANK:\r\n        {\r\n            const {tank} = state.mapState;\r\n\r\n            if (tank) {\r\n                let nextPoint = getPointByDirection(\"driver\",tank.TankDirection);\r\n\r\n                if (!action.payload) {\r\n                    nextPoint[0] = nextPoint[0] * -1;\r\n                    nextPoint[1] = nextPoint[1] * -1;\r\n                }\r\n\r\n\r\n                return {\r\n                    ...state, mapState: {\r\n                        ...state.mapState,\r\n                        tank: {\r\n                            ...state.mapState.tank,\r\n                            X: tank.X + nextPoint[0], Y: tank.Y + nextPoint[1]\r\n                        }\r\n                    }\r\n                };\r\n            }\r\n            break;\r\n        }\r\n        case actionsMap_Code.MOVE_TANK_ROTATE_AND_FORWARD:\r\n        {\r\n            const {tank} = state.mapState;\r\n\r\n            if (tank) {\r\n\r\n                const newAngleBody = transformAngle( tank.TankDirection + (action.payload? -45 : 45 ));\r\n                const newAngleTurret = transformAngle( tank.TurretDirection + (action.payload? -45 : 45 ));\r\n\r\n                let nextPoint = getPointByDirection(\"driver\",newAngleBody);\r\n\r\n                return {\r\n                    ...state, mapState: {\r\n                        ...state.mapState,\r\n                        tank: {\r\n                            ...state.mapState.tank,\r\n                            X: tank.X + nextPoint[0], Y: tank.Y +  nextPoint[1],\r\n                            TankDirection: newAngleBody, TurretDirection: newAngleTurret\r\n                        }\r\n                    }\r\n                };\r\n            }\r\n            break;\r\n        }\r\n        case actionsMap_Code.LOAD:\r\n        {\r\n            if (state.mapState.tank) {\r\n                let status = state.mapState.tank.TurretStatus + 1;\r\n                if (status === 3){\r\n                    status = 0;\r\n                }\r\n                return {\r\n                    ...state, mapState: {\r\n                        ...state.mapState,\r\n                        tank: {\r\n                            ...state.mapState.tank,\r\n                            TurretStatus: status\r\n                        }\r\n                    }\r\n                };\r\n            }\r\n            break;\r\n        }\r\n        case actionsMap_Code.START:\r\n        {\r\n            const mapState = !state.codeState.isPause\r\n                ?  mapReducer(state.mapState,\r\n                {type: actionsMap.LOAD_MAP, payload:\"\"})\r\n                :{} ;\r\n\r\n            return {\r\n                ...state, codeState: {\r\n                    ...state.codeState,\r\n                    isPlay: true,\r\n                    currentRow: state.codeState.isPause? state.codeState.currentRow: 0,\r\n                    // isPause: false\r\n                }, mapState: { ...state.mapState,\r\n                    ...mapState}\r\n            };\r\n        }\r\n        case actionsMap_Code.STOP:\r\n        {\r\n            if(state.mapState.targetCount <= 0)\r\n                alert(`Все цели уничтожены. Поздравляю!!\\nБыло задействовано ${state.codeState.rows.length-1} строк`);\r\n            else\r\n                alert('Не все цели уничтожены :((');\r\n\r\n            return {\r\n                ...state, codeState: {\r\n                    ...state.codeState, isPlay: false, isPause: false\r\n                }\r\n            };\r\n        }\r\n        case actionsMap_Code.PAUSE:\r\n        {\r\n            return {\r\n                ...state, codeState: {\r\n                    ...state.codeState, isPlay: false, isPause: true\r\n                }\r\n            };\r\n        }\r\n        case actionsMap_Code.RESTART:\r\n        {\r\n            return {\r\n                ...state,\r\n                mapState: {\r\n                    ...state.mapState, ...mapReducer(\r\n                        state.mapState,\r\n                        {type: actionsMap.LOAD_MAP, payload:\"\"}\r\n                    )\r\n                },\r\n                codeState: {\r\n                    ...state.codeState, isPlay: false, currentRow:0\r\n                }\r\n            };\r\n        }\r\n        case actionsMap_Code.NEXT_MOVE:\r\n        {\r\n            if (state.codeState.isPlay) {\r\n                const index = state.codeState.currentRow + 1;\r\n                return {\r\n                    ...state, codeState: {\r\n                        ...state.codeState, currentRow: index\r\n                    }\r\n                };\r\n            }\r\n            break;\r\n        }\r\n        case actionsMap_Code.FIRE:\r\n        {\r\n            if (state.mapState.tank) {\r\n                console.log(`FIRE from ${state.mapState.tank.X}-${state.mapState.tank.Y}`);\r\n\r\n                const {map, tank, shellDistance, mapTracers} = state.mapState;\r\n                const {X, Y} = tank;\r\n\r\n                let newX = X;\r\n                let newY = Y;\r\n\r\n                const point = getPointByDirection(\"gunner\", tank.TurretDirection);\r\n\r\n                for (let i= 0;  i < shellDistance; i++){\r\n                    newX += point[0];\r\n                    newY += point[1];\r\n\r\n                    if (newX >= state.mapState.mapWidth\r\n                        || newX < 0\r\n                        || newY >= state.mapState.mapHeight\r\n                        || newY < 0)\r\n                        break;\r\n\r\n                    mapTracers.push(\r\n                        {\r\n                            tag: point[0] * point[1] === 0? tileNames.trailVert: tileNames.trailDiag,\r\n                            X: newX,\r\n                            Y: newY,\r\n                            inverted: point[1] === 0 || point[0] * point[1] > 0,\r\n                        }\r\n                    );\r\n\r\n\r\n                    if (map[newY][newX].length > 0 ){\r\n                        switch (map[newY][newX][0].tile) {\r\n                            case tileNames._3hp:\r\n                            case tileNames._2hp:\r\n                            case tileNames._1hp:\r\n                                state = {...state, mapState:{...state.mapState,\r\n                                        ...mapReducer(state.mapState,reduceHP(newX, newY))}};\r\n\r\n                            case tileNames.mountains:\r\n                                return {...state, mapState:{...state.mapState,\r\n                                        mapTracers: mapTracers,\r\n                                        tank: {...state.mapState.tank, TurretStatus: 0}}};\r\n\r\n                            case tileNames.swamp:\r\n                                continue;\r\n                            default:{\r\n                                let offsetX = point[0] * -1;\r\n                                let offsetY = point[1] * -1;\r\n                                let j;\r\n                                for (j =0; j < 3; j++ ){\r\n                                    let k = 0;\r\n                                    for (k=0; k < map[newY][newX].length; k++ ){\r\n                                        const obj = map[newY][newX][k];\r\n                                        if (offsetX === obj.XShift\r\n                                            && offsetY === obj.YShift\r\n                                            && obj.tile === tileNames.littleMountains){\r\n                                            break;\r\n                                        }\r\n                                    }\r\n                                    if (k !== map[newY][newX].length){\r\n                                        break;\r\n                                    }\r\n                                    offsetX += point[0];\r\n                                    offsetY += point[1];\r\n                                    mapTracers.push(\r\n                                        {\r\n                                            tag: point[0] * point[1] === 0? tileNames.littleTrailVert\r\n                                                                            : tileNames.littleTrailDiag,\r\n                                            X: newX,\r\n                                            Y: newY,\r\n                                            XShift: offsetX,\r\n                                            YShift: offsetY,\r\n                                            inverted: point[1] === 0 || point[0] * point[1] > 0,\r\n                                        }\r\n                                    )\r\n                                }\r\n                                if (j < 3)\r\n                                    break;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n                return {\r\n                    ...state, mapState: {\r\n                        ...state.mapState, tank: {\r\n                            ...state.mapState.tank,\r\n                            TurretStatus: 0\r\n                        },\r\n                        mapTracers: mapTracers\r\n                    }\r\n                };\r\n            }\r\n            break;\r\n        }\r\n        case actionsMap_Code.SAVE_ALG:{\r\n            const filename = \"Program.tankcrewprogram\";\r\n            const xmlDoc = document.implementation.createDocument(\"\", \"\", null );\r\n\r\n            const program = xmlDoc.createElement(\"Program\");\r\n\r\n            const rows = state.codeState.rows;\r\n            for (let i = 0; i < rows.length-1; i++){\r\n                const command = xmlDoc.createElement(\"Command\");\r\n                let elName = rows[i].gunner !== null\r\n                    ? rows[i].gunner.tag\r\n                    : gameButtons.gunner.Pause;\r\n                command.appendChild(xmlDoc.createElement(elName));\r\n\r\n                elName = rows[i].driver !== null\r\n                    ? rows[i].driver.tag\r\n                    : gameButtons.driver.Pause;\r\n                command.appendChild(xmlDoc.createElement(elName));\r\n\r\n                elName = rows[i].charger !== null\r\n                    ? \"LoadTurret_\" + rows[i].charger.tag\r\n                    : gameButtons.charger.Pause;\r\n                command.appendChild(xmlDoc.createElement(elName));\r\n\r\n                program.appendChild(command);\r\n            }\r\n\r\n            xmlDoc.appendChild(program);\r\n\r\n            const data = `<?xml version=\"1.0\" encoding=\"utf-8\"?>` + ( new XMLSerializer().serializeToString(xmlDoc));\r\n\r\n            const file = new Blob([data], {type: 'text/plain'});\r\n            if (window.navigator.msSaveOrOpenBlob) // IE10+\r\n                window.navigator.msSaveOrOpenBlob(file, filename);\r\n            else { // Others\r\n                const a = document.createElement(\"a\"),\r\n                    url = URL.createObjectURL(file);\r\n                a.href = url;\r\n                a.download = filename;\r\n                document.body.appendChild(a);\r\n\r\n                a.dataset.downloadurl = ['text/plain', a.download, a.href].join(':');\r\n\r\n                a.click();\r\n                setTimeout(function() {\r\n                    document.body.removeChild(a);\r\n                    window.URL.revokeObjectURL(url);\r\n                }, 0);\r\n            }\r\n            return state;\r\n        }\r\n        case actionsMap_Code.LOAD_ALG:{\r\n            let text = action.payload;\r\n\r\n            // const text = action.payload === \"\"? state.initialMap : action.payload;\r\n\r\n            let xmlDoc = null;\r\n\r\n            try {\r\n                if (window.DOMParser) {\r\n                    // code for modern browsers\r\n                    const parser = new DOMParser();\r\n                    xmlDoc = parser.parseFromString(text,\"text/xml\");\r\n                }\r\n                else {\r\n                    // code for old IE browsers\r\n                    // eslint-disable-next-line\r\n                    xmlDoc = new ActiveXObject(\"Microsoft.XMLDOM\");\r\n                    xmlDoc.async = false;\r\n                    xmlDoc.loadXML(text);\r\n                }\r\n\r\n                const program = xmlDoc.getElementsByTagName('Program')[0];\r\n                const commands = program.getElementsByTagName(\"Command\");\r\n\r\n                let rows = [];\r\n\r\n                for(let i = 0 ; i < commands.length; i++){\r\n\r\n                    const row = {gunner: null, driver: null, charger: null};\r\n\r\n                    const gunner = commands[i].childNodes[0];\r\n                    const driver = commands[i].childNodes[1];\r\n                    const charger = commands[i].childNodes[2];\r\n\r\n                    row.gunner  = getGameButtonImage(\"gunner\", gunner.nodeName);\r\n                    row.driver  = getGameButtonImage(\"driver\", driver.nodeName);\r\n                    row.charger  = getGameButtonImage(\"charger\", charger.nodeName);\r\n\r\n                    rows.push(row);\r\n                }\r\n                while (rows.length > 0\r\n                    && rows[rows.length-1].gunner.tag === gameButtons.gunner.Pause\r\n                    && rows[rows.length-1].driver.tag === gameButtons.driver.Pause\r\n                    && rows[rows.length-1].charger.tag === gameButtons.charger.Pause )\r\n                {\r\n                    rows.pop();\r\n                }\r\n\r\n                rows.push({gunner: null, driver: null, charger: null});\r\n\r\n                return {...state, codeState: {...state.codeState, rows: rows}}\r\n            }\r\n            catch (e) {\r\n                alert('Ошибка файл алгоритма неправильно сформирован');\r\n            }\r\n            break;\r\n        }\r\n        case actionsMap_Code.CHANGE_SPEED:{\r\n\r\n            let speed = state.codeState.speed;\r\n\r\n            speed += 100 * (action.payload? -1 : 1);\r\n\r\n            if (speed > 500)\r\n                speed = 500;\r\n\r\n            if (speed < 100)\r\n                speed = 100;\r\n\r\n            return {\r\n                ...state, codeState: {\r\n                    ...state.codeState, speed: speed\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return state\r\n};\r\n\r\nexport const putStateToProps_AlgButtons = (state) =>{\r\n\r\n    return {\r\n        selectedRow: state.codeState.selectedRow,\r\n        currentRow: state.codeState.currentRow,\r\n        rows: state.codeState.rows,\r\n        shellDistance: state.mapState.shellDistance,\r\n        tank: state.mapState.tank,\r\n        mapWidth: state.mapState.width,\r\n        mapHeight: state.mapState.height,\r\n        map: state.mapState.map,\r\n        isPlay: state.codeState.isPlay,\r\n        speed: state.codeState.speed\r\n    }\r\n};\r\nexport const putActionsToProps_AlgButtons = (dispatch) => {\r\n    return {\r\n        rotateTurret: bindActionCreators(RotateTurret, dispatch),\r\n        rotateTank: bindActionCreators(RotateTank, dispatch),\r\n        moveTankForward: bindActionCreators(MoveTankForward, dispatch),\r\n        moveTankBackward: bindActionCreators(MoveTankBackward, dispatch),\r\n        moveTankRotateLeftAndForward: bindActionCreators(MoveTankRotateLeftAndForward, dispatch),\r\n        moveTankRotateRightAndForward: bindActionCreators(MoveTankRotateRightAndForward, dispatch),\r\n        load: bindActionCreators(Load, dispatch),\r\n        selectRow: bindActionCreators(SelectRow, dispatch),\r\n        start: bindActionCreators(Start, dispatch),\r\n        stop: bindActionCreators(Stop, dispatch),\r\n        pause: bindActionCreators(Pause, dispatch),\r\n        nextMove: bindActionCreators(NextMove, dispatch),\r\n        restart: bindActionCreators(Restart, dispatch),\r\n        fire: bindActionCreators(Fire, dispatch),\r\n        increaseSpeed: bindActionCreators(IncreaseSpeed, dispatch),\r\n        decreaseSpeed: bindActionCreators(DecreaseSpeed, dispatch),\r\n    }\r\n};\r\n\r\nexport const putStateToProps_TankInfo = (state) =>{\r\n\r\n    return {\r\n        tank: state.mapState.tank,\r\n    }\r\n};\r\n","import {createStore} from \"redux\";\r\nimport {rootReducer} from \"./reducers.js\"\r\n\r\nexport const tileNames = {\r\n    mountains: \"mountains\",\r\n    swamp: \"swamp\",\r\n    littleMountains: \"littleMountains\",\r\n    littleSwamp: \"littleSwamp\",\r\n    trailVert: \"trailVert\",\r\n    trailDiag: \"trailDiag\",\r\n    littleTrailVert: \"littleTrailVert\",\r\n    littleTrailDiag: \"littleTrailDiag\",\r\n    tankBody: \"tankBody\",\r\n    tankHead: \"tankHead\",\r\n    tankStatus_NotLoaded: \"tankStatus_NotLoaded\",\r\n    tankStatus_PartLoaded: \"tankStatus_PartLoaded\",\r\n    tankStatus_Loaded: \"tankStatus_Loaded\",\r\n    _3hp: \"3hp\",\r\n    _2hp: \"2hp\",\r\n    _1hp: \"1hp\",\r\n    empty: \"empty\"\r\n};\r\n\r\nexport const getmapTile = (type, anotherTileSize, little = false) =>{\r\n    if (store + \"\" === \"undefined\")\r\n        return {};\r\n    const tS = anotherTileSize || store.getState().mapState.tileSize; //tileSize\r\n    let obj = {};\r\n    switch (type) {\r\n        case tileNames.mountains:\r\n        case tileNames.littleMountains:\r\n            obj = {\r\n                tag: type,\r\n                backgroundImage: \"url('../images/gametiles.svg')\",\r\n                backgroundPosition: `-${tS}px 0px`,\r\n                height: tS,\r\n                width: tS,};\r\n            break;\r\n        case tileNames.swamp:\r\n        case tileNames.littleSwamp:\r\n            obj = {\r\n                tag: type,\r\n                backgroundImage: \"url('../images/gametiles.svg')\",\r\n                backgroundPosition: `-${tS * 2}px 0px`,\r\n                height: tS,\r\n                width: tS,};\r\n            break;\r\n        case tileNames.tankBody:\r\n            obj = {\r\n                tag: type,\r\n                backgroundImage: \"url('../images/gametiles.svg')\",\r\n                backgroundPosition: `-${tS * 3}px 0px`,\r\n                height: tS,\r\n                width: tS,};\r\n            break;\r\n        case tileNames.tankHead:\r\n            obj = {\r\n                tag: type,\r\n                backgroundImage: \"url('../images/gametiles.svg')\",\r\n                backgroundPosition: `-${tS * 4}px 0px`,\r\n                height: tS,\r\n                width: tS,};\r\n            break;\r\n        case tileNames.tankStatus_NotLoaded:\r\n            obj = {\r\n                tag: type,\r\n                backgroundImage: \"url('../images/gametiles.svg')\",\r\n                backgroundPosition: `-${tS * 3}px -${tS * 2}px`,\r\n                height: tS,\r\n                width: tS,};\r\n            break;\r\n        case tileNames.tankStatus_PartLoaded:\r\n            obj = {\r\n                tag: type,\r\n                backgroundImage: \"url('../images/gametiles.svg')\",\r\n                backgroundPosition: `-${tS * 4}px -${tS * 2}px`,\r\n                height: tS,\r\n                width: tS,};\r\n            break;\r\n        case tileNames.tankStatus_Loaded:\r\n            obj = {\r\n                tag: type,\r\n                backgroundImage: \"url('../images/gametiles.svg')\",\r\n                backgroundPosition: `-${tS * 4}px -${tS * 3}px`,\r\n                height: tS,\r\n                width: tS,};\r\n            break;\r\n        case tileNames._3hp:\r\n            obj = {\r\n                tag: type,\r\n                backgroundImage: \"url('../images/gametiles.svg')\",\r\n                backgroundPosition: `0px -${tS}px`,\r\n                height: tS,\r\n                width: tS,};\r\n            break;\r\n        case tileNames._2hp:\r\n            obj = {\r\n                tag: type,\r\n                backgroundImage: \"url('../images/gametiles.svg')\",\r\n                backgroundPosition: `-${tS}px -${tS}px`,\r\n                height: tS,\r\n                width: tS,};\r\n            break;\r\n        case tileNames._1hp:\r\n            obj = {\r\n                tag: type,\r\n                backgroundImage: \"url('../images/gametiles.svg')\",\r\n                backgroundPosition: `-${tS * 2}px -${tS}px`,\r\n                height: tS,\r\n                width: tS,};\r\n            break;\r\n        case tileNames.trailVert:\r\n            console.log(1);\r\n            obj = {\r\n                tag: type,\r\n                backgroundImage: \"url('../images/gametiles.svg')\",\r\n                backgroundPosition: `-${tS * 3}px -${tS}px`,\r\n                height: tS,\r\n                width: tS,};\r\n            break;\r\n        case tileNames.littleTrailVert:\r\n            little = true;\r\n            obj = {\r\n                tag: type,\r\n                backgroundImage: \"url('../images/gametiles.svg')\",\r\n                backgroundPosition: `-${tS * 3}px -${tS}px`,\r\n                height: tS,\r\n                width: tS,};\r\n            break;\r\n        case tileNames.trailDiag:\r\n            obj = {\r\n                tag: type,\r\n                backgroundImage: \"url('../images/gametiles.svg')\",\r\n                backgroundPosition: `-${tS * 4}px -${tS}px`,\r\n                height: tS,\r\n                width: tS,};\r\n            break;\r\n        case tileNames.littleTrailDiag:\r\n            little = true;\r\n            obj = {\r\n                tag: type,\r\n                backgroundImage: \"url('../images/gametiles.svg')\",\r\n                backgroundPosition: `-${tS * 4}px -${tS}px`,\r\n                height: tS,\r\n                width: tS,};\r\n            break;\r\n        default:\r\n            obj = {\r\n                tag: \"empty\",\r\n                backgroundImage: \"url('../images/gametiles.svg')\",\r\n                backgroundPosition: \"0px 0px\",\r\n                height: tS,\r\n                width: tS,};\r\n            break;\r\n    }\r\n    if (little){\r\n        const positionArr = obj.backgroundPosition.split(' ');\r\n        const X = Number(positionArr[0].slice(0,positionArr[0].length-2)) / 3;\r\n        const Y = Number(positionArr[1].slice(0,positionArr[1].length-2)) / 3;\r\n\r\n        obj = { ...obj,\r\n            backgroundPosition: `${Math.floor(X)}px ${Math.floor(Y)}px`,\r\n            backgroundSize: `${tS * 5 / 3 + 2 }px ${tS * 5 / 3 + 2 }px`,\r\n            height: obj.height / 3, width: obj.width / 3 ,\r\n            border:\"none\", }\r\n    }\r\n    else{\r\n        obj = {...obj, backgroundSize: `${tS * 5}px ${tS * 5}px`,}\r\n    }\r\n\r\n\r\n    return obj;\r\n};\r\n\r\nexport const gunnerBtnsCount =9;\r\nexport const driverBtnsCount =12;\r\nexport const chargerBtnsCount =3;\r\n\r\nexport const gameButtons = {\r\n    gunner:{\r\n        North: \"PauseGunner\",\r\n        East: \"TurnTurretClockwise90\",\r\n        South: \"TurnTurretAround\",\r\n        West: \"TurnTurretCounterClockwise90\",\r\n        NorthWest: \"TurnTurretCounterClockwise45\",\r\n        NorthEast: \"TurnTurretClockwise45\",\r\n        SouthWest: \"TurnTurretCounterClockwise135\",\r\n        SouthEast: \"TurnTurretClockwise135\",\r\n        Fire: \"FireCommand\",\r\n        Pause: \"PauseGunner\"\r\n    },\r\n    driver:{\r\n        North: \"StopDriver\",\r\n        East: \"TurnTankClockwise90\",\r\n        South: \"TurnTankAround\",\r\n        West: \"TurnTankCounterClockwise90\",\r\n        NorthWest: \"TurnTankCounterClockwise45\",\r\n        NorthEast: \"TurnTankClockwise45\",\r\n        SouthWest: \"TurnTankCounterClockwise135\",\r\n        SouthEast: \"TurnTankClockwise135\",\r\n        MoveForward: \"MoveForward\",\r\n        MoveBackward: \"MoveBackward\",\r\n        TurnLeftAndMoveForward: \"TurnTankCounterClockwiseAndMoveForward\",\r\n        TurnRightAndMoveForward: \"TurnTankClockwiseAndMoveForward\",\r\n        TurnLeftAndMoveBackward: \"=TBD=\",\r\n        TurnRightAndMoveBackward: \"=TBD=\",\r\n        Stop: \"StopDriver\",\r\n        Pause: \"StopDriver\"\r\n    },\r\n    charger:{\r\n        NotLoaded: 0,\r\n        PartiallyLoaded: 1,\r\n        Ready:2,\r\n        Pause: \"PauseLoader\"\r\n    }\r\n};\r\n\r\nexport function getGameButtonImage(className, index) {\r\n\r\n    if (isNaN(index)){\r\n        switch (className) {\r\n            case \"gunner\":\r\n                switch (index) {\r\n                    case gameButtons.gunner.NorthEast:\r\n                        index = 0;\r\n                        break;\r\n                    case gameButtons.gunner.East:\r\n                        index = 1;\r\n                        break;\r\n                    case gameButtons.gunner.SouthEast:\r\n                        index = 2;\r\n                        break;\r\n                    case gameButtons.gunner.NorthWest:\r\n                        index = 3;\r\n                        break;\r\n                    case gameButtons.gunner.West:\r\n                        index = 4;\r\n                        break;\r\n                    case gameButtons.gunner.SouthWest:\r\n                        index = 5;\r\n                        break;\r\n                    case gameButtons.gunner.South:\r\n                        index = 6;\r\n                        break;\r\n                    case gameButtons.gunner.Fire:\r\n                        index = 7;\r\n                        break;\r\n                    default:\r\n                        index = 8\r\n                }\r\n                break;\r\n            case \"driver\":\r\n                switch (index) {\r\n                    case gameButtons.driver.NorthEast:\r\n                        index = 0;\r\n                        break;\r\n                    case gameButtons.driver.East:\r\n                        index = 1;\r\n                        break;\r\n                    case gameButtons.driver.SouthEast:\r\n                        index = 2;\r\n                        break;\r\n                    case gameButtons.driver.NorthWest:\r\n                        index = 3;\r\n                        break;\r\n                    case gameButtons.driver.West:\r\n                        index = 4;\r\n                        break;\r\n                    case gameButtons.driver.SouthWest:\r\n                        index = 5;\r\n                        break;\r\n                    case gameButtons.driver.South:\r\n                        index = 6;\r\n                        break;\r\n                    case gameButtons.driver.MoveForward:\r\n                        index = 7;\r\n                        break;\r\n                    case gameButtons.driver.MoveBackward:\r\n                        index = 8;\r\n                        break;\r\n                    case gameButtons.driver.TurnRightAndMoveForward:\r\n                        index = 9;\r\n                        break;\r\n                    case gameButtons.driver.TurnLeftAndMoveForward:\r\n                        index = 10;\r\n                        break;\r\n                    default:\r\n                        index = 11;\r\n                }\r\n                break;\r\n            case \"charger\":\r\n                switch (index) {\r\n                    case gameButtons.charger.PartiallyLoaded:\r\n                        index = 0;\r\n                        break;\r\n                    case gameButtons.charger.Ready:\r\n                        index = 1;\r\n                        break;\r\n                    default:\r\n                        index = 2;\r\n                }\r\n                break;\r\n        }\r\n    }\r\n\r\n\r\n    return [\r\n        //-----------------Gunner----------------------\r\n        {\r\n            tag:gameButtons.gunner.NorthEast,\r\n            backgroundImage: \"url('../images/actionbtns.svg')\",\r\n            backgroundPosition: \"0px 0px\",\r\n            left: 0,\r\n            height: 50,\r\n            width: 50,},\r\n        {\r\n            tag:gameButtons.gunner.East,\r\n            backgroundImage: \"url('../images/actionbtns.svg')\",\r\n            backgroundPosition: \"-50px 0px\",\r\n            left: 0,\r\n            height: 50,\r\n            width: 50,},\r\n        {\r\n            tag:gameButtons.gunner.SouthEast,\r\n            backgroundImage: \"url('../images/actionbtns.svg')\",\r\n            backgroundPosition: \"-100px 0px\",\r\n            left: 0,\r\n            height: 50,\r\n            width: 50,},\r\n        {\r\n            tag:gameButtons.gunner.NorthWest,\r\n            backgroundImage: \"url('../images/actionbtns.svg')\",\r\n            backgroundPosition: \"0px -50px\",\r\n            left: 0,\r\n            height: 50,\r\n            width: 50,},\r\n        {\r\n            tag:gameButtons.gunner.West,\r\n            backgroundImage: \"url('../images/actionbtns.svg')\",\r\n            backgroundPosition: \"-50px -50px\",\r\n            left: 0,\r\n            height: 50,\r\n            width: 50,},\r\n        {\r\n            tag:gameButtons.gunner.SouthWest,\r\n            backgroundImage: \"url('../images/actionbtns.svg')\",\r\n            backgroundPosition: \"-100px -50px\",\r\n            left: 0,\r\n            height: 50,\r\n            width: 50,},\r\n        {\r\n            tag:gameButtons.gunner.South,\r\n            backgroundImage: \"url('../images/actionbtns.svg')\",\r\n            backgroundPosition: \"0px -100px\",\r\n            left: 0,\r\n            height: 50,\r\n            width: 50,},\r\n        {\r\n            tag:gameButtons.gunner.Fire,\r\n            backgroundImage: \"url('../images/actionbtns.svg')\",\r\n            backgroundPosition: \"-100px -100px\",\r\n            left: 0,\r\n            height: 50,\r\n            width: 50,},\r\n        {\r\n            tag:gameButtons.gunner.Pause,\r\n            backgroundImage: \"url('../images/actionbtns.svg')\",\r\n            backgroundPosition: \"-150px -150px\",\r\n            left: 0,\r\n            height: 50,\r\n            width: 50,},\r\n        //---------------Driver------------\r\n        {\r\n            tag:gameButtons.driver.NorthEast,\r\n            backgroundImage: \"url('../images/actionbtns.svg')\",\r\n            backgroundPosition: \"0px -150px\",\r\n            left: 0,\r\n            height: 50,\r\n            width: 50,},\r\n        {\r\n            tag:gameButtons.driver.East,\r\n            backgroundImage: \"url('../images/actionbtns.svg')\",\r\n            backgroundPosition: \"-50px -150px\",\r\n            left: 0,\r\n            height: 50,\r\n            width: 50,},\r\n        {\r\n            tag:gameButtons.driver.SouthEast,\r\n            backgroundImage: \"url('../images/actionbtns.svg')\",\r\n            backgroundPosition: \"-100px -150px\",\r\n            left: 0,\r\n            height: 50,\r\n            width: 50,},\r\n        {\r\n            tag:gameButtons.driver.NorthWest,\r\n            backgroundImage: \"url('../images/actionbtns.svg')\",\r\n            backgroundPosition: \"0px -200px\",\r\n            left: 0,\r\n            height: 50,\r\n            width: 50,},\r\n        {\r\n            tag:gameButtons.driver.West,\r\n            backgroundImage: \"url('../images/actionbtns.svg')\",\r\n            backgroundPosition: \"-50px -200px\",\r\n            left: 0,\r\n            height: 50,\r\n            width: 50,},\r\n        {\r\n            tag:gameButtons.driver.SouthWest,\r\n            backgroundImage: \"url('../images/actionbtns.svg')\",\r\n            backgroundPosition: \"-100px -200px\",\r\n            left: 0,\r\n            height: 50,\r\n            width: 50,},\r\n        {\r\n            tag:gameButtons.driver.South,\r\n            backgroundImage: \"url('../images/actionbtns.svg')\",\r\n            backgroundPosition: \"-50px -100px\",\r\n            left: 0,\r\n            height: 50,\r\n            width: 50,},\r\n        {\r\n            tag:gameButtons.driver.MoveForward,\r\n            backgroundImage: \"url('../images/actionbtns.svg')\",\r\n            backgroundPosition: \"-150px 0px\",\r\n            left: 0,\r\n            height: 50,\r\n            width: 50,},\r\n        {\r\n            tag:gameButtons.driver.MoveBackward,\r\n            backgroundImage: \"url('../images/actionbtns.svg')\",\r\n            backgroundPosition: \"-200px 0px\",\r\n            left: 0,\r\n            height: 50,\r\n            width: 50,},\r\n        {\r\n            tag:gameButtons.driver.TurnRightAndMoveForward,\r\n            backgroundImage: \"url('../images/actionbtns.svg')\",\r\n            backgroundPosition: \"-150px -50px\",\r\n            left: 0,\r\n            height: 50,\r\n            width: 50,},\r\n        {\r\n            tag:gameButtons.driver.TurnLeftAndMoveForward,\r\n            backgroundImage: \"url('../images/actionbtns.svg')\",\r\n            backgroundPosition: \"-200px -50px\",\r\n            left: 0,\r\n            height: 50,\r\n            width: 50,},\r\n        {\r\n            tag:gameButtons.driver.Pause,\r\n            backgroundImage: \"url('../images/actionbtns.svg')\",\r\n            backgroundPosition: \"-150px -150px\",\r\n            left: 0,\r\n            height: 50,\r\n            width: 50,},\r\n        //-----------------Charger--------------\r\n        {\r\n            tag:gameButtons.charger.PartiallyLoaded,\r\n            backgroundImage: \"url('../images/actionbtns.svg')\",\r\n            backgroundPosition: \"-150px -100px\",\r\n            left: 0,\r\n            height: 50,\r\n            width: 50,},\r\n        {\r\n            tag:gameButtons.charger.Ready,\r\n            backgroundImage: \"url('../images/actionbtns.svg')\",\r\n            backgroundPosition: \"-200px -100px\",\r\n            left: 0,\r\n            height: 50,\r\n            width: 50,},\r\n        {\r\n            tag:gameButtons.charger.Pause,\r\n            backgroundImage: \"url('../images/actionbtns.svg')\",\r\n            backgroundPosition: \"-150px -150px\",\r\n            left: 0,\r\n            height: 50,\r\n            width: 50,},\r\n    ][index + (className === \"driver\" ? gunnerBtnsCount : 0) + ( className === \"charger\" ? gunnerBtnsCount + driverBtnsCount : 0 )]\r\n}\r\n\r\nexport function getMenuButtons(index){\r\n    return [\r\n        {\r\n            backgroundImage: \"url('../images/menubtns.svg')\",\r\n            backgroundPosition: \"0px 0px\",\r\n            left: 0,\r\n            backgroundSize: \"200px 120px\",\r\n            height: 40,\r\n            width: 40,},\r\n        {\r\n            backgroundImage: \"url('../images/menubtns.svg')\",\r\n            backgroundPosition: \"-40px 0px\",\r\n            left: 0,\r\n            backgroundSize: \"200px 120px\",\r\n            height: 40,\r\n            width: 40,},\r\n        {\r\n            backgroundImage: \"url('../images/menubtns.svg')\",\r\n            backgroundPosition: \"-80px 0px\",\r\n            left: 0,\r\n            backgroundSize: \"200px 120px\",\r\n            height: 40,\r\n            width: 40,},\r\n        {\r\n            backgroundImage: \"url('../images/menubtns.svg')\",\r\n            backgroundPosition: \"-120px 0px\",\r\n            left: 0,\r\n            backgroundSize: \"200px 120px\",\r\n            height: 40,\r\n            width: 40,},\r\n        {\r\n            backgroundImage: \"url('../images/menubtns.svg')\",\r\n            backgroundPosition: \"-160px 0px\",\r\n            left: 0,\r\n            backgroundSize: \"200px 120px\",\r\n            height: 40,\r\n            width: 40,},\r\n        {\r\n            backgroundImage: \"url('../images/menubtns.svg')\",\r\n            backgroundPosition: \"0px -30px\",\r\n            left: 0,\r\n            backgroundSize: \"150px 90px\",\r\n            height: 30,\r\n            width: 30,},\r\n        {\r\n            backgroundImage: \"url('../images/menubtns.svg')\",\r\n            backgroundPosition: \"-30px -30px\",\r\n            left: 0,\r\n            backgroundSize: \"150px 90px\",\r\n            height: 30,\r\n            width: 30,},\r\n        {\r\n            backgroundImage: \"url('../images/menubtns.svg')\",\r\n            backgroundPosition: \"-60px -30px\",\r\n            left: 0,\r\n            backgroundSize: \"150px 90px\",\r\n            height: 30,\r\n            width: 30,},\r\n        {\r\n            backgroundImage: \"url('../images/menubtns.svg')\",\r\n            backgroundPosition: \"-60px -20px\",\r\n            left: 0,\r\n            backgroundSize: \"100px 60px\",\r\n            height: 20,\r\n            width: 20,},\r\n        {\r\n            backgroundImage: \"url('../images/menubtns.svg')\",\r\n            backgroundPosition: \"-80px -20px\",\r\n            left: 0,\r\n            backgroundSize: \"100px 60px\",\r\n            height: 20,\r\n            width: 20,},\r\n        {\r\n            backgroundImage: \"url('../images/menubtns.svg')\",\r\n            backgroundPosition: \"0px -60px\",\r\n            left: 0,\r\n            backgroundSize: \"150px 90px\",\r\n            height: 30,\r\n            width: 30,},\r\n    ][index]\r\n}\r\n\r\nexport function getAngleByDirection(direction){\r\n    switch (direction) {\r\n        case gameButtons.driver.North:\r\n        case gameButtons.gunner.North:\r\n            return 0;\r\n        case gameButtons.driver.East:\r\n        case gameButtons.gunner.East:\r\n            return 90;\r\n        case gameButtons.driver.South:\r\n        case gameButtons.gunner.South:\r\n            return 180;\r\n        case gameButtons.driver.West:\r\n        case gameButtons.gunner.West:\r\n            return -90;\r\n        case gameButtons.driver.NorthWest:\r\n        case gameButtons.gunner.NorthWest:\r\n            return -45;\r\n        case gameButtons.driver.NorthEast:\r\n        case gameButtons.gunner.NorthEast:\r\n            return 45;\r\n        case gameButtons.driver.SouthWest:\r\n        case gameButtons.gunner.SouthWest:\r\n            return -135;\r\n        case gameButtons.driver.SouthEast:\r\n        case gameButtons.gunner.SouthEast:\r\n            return 135;\r\n    }\r\n    return 0;\r\n}\r\n\r\nexport function transformAngle(angle) {\r\n    if (angle > 180 )\r\n        return angle - 360;\r\n\r\n    if (angle < -180 )\r\n        return angle + 360;\r\n\r\n    if (angle === 180 || angle === -180)\r\n        return 180;\r\n\r\n    return angle;\r\n}\r\n\r\nexport function getDirectionByAngle(className, angle){\r\n    angle = transformAngle(angle);\r\n\r\n    switch (angle) {\r\n        case 0:\r\n            return gameButtons[`${className}`].North;\r\n        case 90:\r\n            return gameButtons[`${className}`].East;\r\n        case 180:\r\n            return gameButtons[`${className}`].South;\r\n        case -90:\r\n            return gameButtons[`${className}`].West;\r\n        case -45:\r\n            return gameButtons[`${className}`].NorthWest;\r\n        case 45:\r\n            return gameButtons[`${className}`].NorthEast;\r\n        case -135:\r\n            return gameButtons[`${className}`].SouthWest;\r\n        case 135:\r\n            return gameButtons[`${className}`].SouthEast;\r\n    }\r\n    return \"undefined\";\r\n}\r\n\r\nexport const initialState_Code ={\r\n    gunnerSelectedIndex: 0,\r\n    driverSelectedIndex: 0,\r\n    chargerSelectedIndex: 0,\r\n    selectedRow: 0,\r\n    currentRow: 0,\r\n    rows: [{\r\n        gunner: null,\r\n        driver: null,\r\n        charger: null\r\n    }],\r\n    isPlay: false,\r\n    isPause: false,\r\n    speed: 500,\r\n\r\n};\r\n\r\nconst testMap=`<?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<World Height=\"10\" Width=\"10\" ShellDistance=\"8\">\r\n  <Tank X=\"4\" Y=\"4\">\r\n    <TankDirection>North</TankDirection>\r\n    <TurretDirection>North</TurretDirection>\r\n    <TurretStatus>NotLoaded</TurretStatus>\r\n  </Tank>\r\n  <Units>\r\n    <LittlePillbox X=\"4\" Y=\"2\" />\r\n    <BigPillbox X=\"7\" Y=\"1\" />\r\n    <Rock X=\"5\" Y=\"2\" />\r\n    <LittleRock X=\"6\" Y=\"2\" XShift=\"-1\" YShift=\"1\" />\r\n    <LittleRock X=\"6\" Y=\"2\" XShift=\"0\" YShift=\"0\" />\r\n    <LittleRock X=\"6\" Y=\"2\" XShift=\"1\" YShift=\"-1\" />\r\n    <LittleRock X=\"7\" Y=\"2\" XShift=\"0\" YShift=\"-1\" />\r\n    <LittleRock X=\"7\" Y=\"2\" XShift=\"0\" YShift=\"0\" />\r\n    <LittleRock X=\"7\" Y=\"2\" XShift=\"0\" YShift=\"1\" />\r\n    <Swamp X=\"3\" Y=\"3\" />\r\n    <Swamp X=\"4\" Y=\"3\" />\r\n    <Swamp X=\"5\" Y=\"3\" />\r\n    <LittleSwamp X=\"6\" Y=\"2\" XShift=\"-1\" YShift=\"0\" />\r\n    <LittleSwamp X=\"6\" Y=\"2\" XShift=\"-1\" YShift=\"-1\" />\r\n    <LittleSwamp X=\"6\" Y=\"2\" XShift=\"0\" YShift=\"-1\" />\r\n    <LittleSwamp X=\"6\" Y=\"2\" XShift=\"1\" YShift=\"0\" />\r\n    <LittleSwamp X=\"6\" Y=\"2\" XShift=\"1\" YShift=\"1\" />\r\n    <LittleSwamp X=\"6\" Y=\"2\" XShift=\"0\" YShift=\"1\" />\r\n    <LittleSwamp X=\"7\" Y=\"2\" XShift=\"-1\" YShift=\"0\" />\r\n    <LittleSwamp X=\"7\" Y=\"2\" XShift=\"-1\" YShift=\"-1\" />\r\n    <LittleSwamp X=\"7\" Y=\"2\" XShift=\"-1\" YShift=\"1\" />\r\n    <LittleSwamp X=\"7\" Y=\"2\" XShift=\"1\" YShift=\"-1\" />\r\n    <LittleSwamp X=\"7\" Y=\"2\" XShift=\"1\" YShift=\"0\" />\r\n    <LittleSwamp X=\"7\" Y=\"2\" XShift=\"1\" YShift=\"1\" />\r\n    <LittleSwamp X=\"6\" Y=\"3\" XShift=\"-1\" YShift=\"1\" />\r\n    <LittleSwamp X=\"6\" Y=\"3\" XShift=\"0\" YShift=\"0\" />\r\n    <LittleSwamp X=\"6\" Y=\"3\" XShift=\"1\" YShift=\"-1\" />\r\n    <LittleSwamp X=\"6\" Y=\"3\" XShift=\"0\" YShift=\"-1\" />\r\n    <LittleSwamp X=\"6\" Y=\"3\" XShift=\"-1\" YShift=\"-1\" />\r\n    <LittleSwamp X=\"6\" Y=\"3\" XShift=\"-1\" YShift=\"0\" />\r\n    <LittleSwamp X=\"6\" Y=\"3\" XShift=\"1\" YShift=\"0\" />\r\n    <LittleSwamp X=\"7\" Y=\"3\" XShift=\"-1\" YShift=\"-1\" />\r\n    <LittleSwamp X=\"7\" Y=\"3\" XShift=\"0\" YShift=\"-1\" />\r\n  </Units>\r\n</World>`;\r\n\r\n\r\nconst intitalTileSize = 40;\r\n\r\nexport const initialState_Map = {\r\n    tileSize:intitalTileSize,\r\n    initialMap: testMap,\r\n    mapTracers: [],\r\n    map:[],\r\n    targetCount:0\r\n};\r\n\r\nexport const initialState = {\r\n    codeState: initialState_Code,\r\n    mapState: initialState_Map\r\n};\r\n\r\nexport const store = createStore(rootReducer, initialState);\r\n\r\n\r\n","import React from \"react\";\r\nimport {getMenuButtons, getGameButtonImage, getmapTile, tileNames} from \"../store/stores\";\r\n\r\nfunction shrinkGameButtonImage (className, index){\r\n    const image = getGameButtonImage(className, index);\r\n\r\n    const positionArr = image.backgroundPosition.split(' ');\r\n    const X = Number(positionArr[0].slice(0,positionArr[0].length-2)) / 50 * 30;\r\n    const Y = Number(positionArr[1].slice(0,positionArr[1].length-2)) / 50 * 30;\r\n\r\n    return {backgroundImage: image.backgroundImage,\r\n        backgroundSize:\"150px 150px\", backgroundPosition: `${X}px ${Y}px`,\r\n        height: 30, width: 30, }\r\n}\r\nfunction shrinkgetMenuButtons (index){\r\n    const image = getMenuButtons(index);\r\n\r\n    const positionArr = image.backgroundPosition.split(' ');\r\n    const X = Number(positionArr[0].slice(0,positionArr[0].length-2)) / image.height * 30;\r\n    const Y = Number(positionArr[1].slice(0,positionArr[1].length-2)) / image.width * 30;\r\n\r\n    return {backgroundImage: image.backgroundImage,\r\n        backgroundSize:`150px 90px`, backgroundPosition: `${X}px ${Y}px`,\r\n        height: 30, width: 30, }\r\n}\r\n\r\nexport default function Info(props){\r\n    return(\r\n        <div  style={{position:\"relative\"}}>\r\n            <button style={{position: \"absolute\", right:10, padding:2}} onClick={() => props.onClick()} >✖</button>\r\n            <div className=\"flex-column\">\r\n                <div id=\"infoDiv\" className=\"flex-column margin-5\">\r\n                    <h1 style={{marginBottom:10, marginTop:0}}>\r\n                        Танковый биатлон\r\n                    </h1>\r\n                    <div className=\"flex-row flex-align-start\">\r\n                        <div className=\"flex-column flex-align-start\">\r\n                            <div style={{padding:10, border:\"1px dashed black\",}}>\r\n                                <p>\r\n                                    Игра «Танковый Биатлон» предназначена для знакомства с параллельным программированием.\r\n                                </p>\r\n                                <p>\r\n                                    Вы управляете экипажем боевого танка на биатлонной трасе,\r\n                                    задачей которого является поражение всех\r\n                                    мишеней на игровом поле за минимальное количество ходов.\r\n                                </p>\r\n                                <h2>\r\n                                    Вы управляете тремя исполнителями:\r\n                                </h2>\r\n                                <ul>\r\n                                    <li>Наводчик - управляет орудием</li>\r\n                                    <li>Водитель - управляет движением танка</li>\r\n                                    <li>Заряжающий - управляет зарядом орудия</li>\r\n                                </ul>\r\n                                <h2>\r\n                                    Ваша цель состоит в следующем:\r\n                                </h2>\r\n                                <p>\r\n                                    Написать последовательность команд (алгоритм) для параллельной работы всех трёх исполнителей,\r\n                                    чтобы совместная деятельность привела к уничтожению всех мишеней и выполнению их боевой задачи.\r\n                                </p>\r\n                                <p>\r\n                                    Все команды в строке выполняются одновременно\r\n                                    (На самом деле сначала команда Наводчика,\r\n                                    затем Водителя, затем Заряжающего).\r\n                                </p>\r\n                                <p>\r\n                                    Выстрел можно сделать только после зарядки орудий (статус заряда показывается\r\n                                    прямоугольникком около танка). Зарядка происходит в два действия, сначала необходимо\r\n                                    выполнить команду «Заряжай 1», а затем «Заряжай 2».\r\n                                </p>\r\n                                <h2>\r\n                                    На игровом поле расположены различные препятсвия:\r\n                                </h2>\r\n                                <ul>\r\n                                    <li>\r\n                                        <img style={getmapTile(tileNames.mountains, 20)} alt=\"\"/> {` `}\r\n                                        Камни - нельзя проехать, нельзя прострелить\r\n                                    </li>\r\n                                    <li>\r\n                                        <img style={getmapTile(tileNames.swamp, 20)} alt=\"\"/> {` `}\r\n                                        Деревья - нельзя проехать, можно прострелить\r\n                                    </li>\r\n                                </ul>\r\n                                <h2>\r\n                                    Цели для поражения имеют различное количества выстрелов для уничтожения:\r\n                                </h2>\r\n                                <ul>\r\n                                    <li>\r\n                                        <img style={getmapTile(tileNames._3hp, 20)} alt=\"\"/> {` `}\r\n                                        Большая мишень - 3 выстрела\r\n                                    </li>\r\n                                    <li>\r\n                                        <img style={getmapTile(tileNames._2hp, 20)} alt=\"\"/> {` `}\r\n                                        Средняя мишень - 2 выстрела\r\n                                    </li>\r\n                                    <li>\r\n                                        <img style={getmapTile(tileNames._1hp, 20)} alt=\"\"/> {` `}\r\n                                        Малая мишень - 1 выстрел\r\n                                    </li>\r\n                                </ul>\r\n                            </div>\r\n                            <div style={{padding:10, border:\"1px dashed black\"}}>\r\n                                <h2>\r\n                                    Некоторые действия выполнять нельзя:\r\n                                </h2>\r\n                                <ul>\r\n                                    <li>\r\n                                        Нельзя наехать на препятсвия или цели\r\n                                    </li>\r\n                                    <li>\r\n                                        Нельзя выехать за границы поля\r\n                                    </li>\r\n                                    <li>\r\n                                        Нельзя выстрелить пока орудие не заряжено\r\n                                    </li>\r\n                                    <li>\r\n                                        Нельзя сменить направление движения танка на противоположное после движения,\r\n                                        необходимо сделать паузу между движениями. (пример: нельзя выполнить\r\n                                        «Подвинуться вперёд», а затем «Повинуться назад»)\r\n                                    </li>\r\n                                    <li>\r\n                                        Нельзя выполнить команду «Заряжай 1», если уже была выполнена эта команда\r\n                                        или орудие заряжено.\r\n                                        (Можно выполнять одновременно с командой «Выстрел», если орудие заряжено)\r\n                                    </li>\r\n                                    <li>\r\n                                        Нельзя выполнить команду «Заряжай 2», если орудие уже заряжено\r\n                                        или команда «Заряжай 1» не была выполнена.\r\n                                    </li>\r\n                                </ul>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"flex-column flex-align-start\">\r\n                            <div style={{padding:10, border:\"1px dashed black\"}}>\r\n                                <h2>\r\n                                    Комадны для исполнителей:\r\n                                </h2>\r\n                                <ul>\r\n                                    <li>\r\n                                        Наводчик:\r\n                                        <ul>\r\n                                            <li>\r\n                                                <img style={shrinkGameButtonImage(\"gunner\",0)} alt=\"\"/> {` `}\r\n                                                <img style={shrinkGameButtonImage(\"gunner\",1)} alt=\"\"/> {` `}\r\n                                                <img style={shrinkGameButtonImage(\"gunner\",2)} alt=\"\"/> {` `}\r\n                                                - поворот орудия по часовой стрелке на 45°, 90° и 135°\r\n                                            </li>\r\n                                            <li>\r\n                                                <img style={shrinkGameButtonImage(\"gunner\",3)} alt=\"\"/> {` `}\r\n                                                <img style={shrinkGameButtonImage(\"gunner\",4)} alt=\"\"/> {` `}\r\n                                                <img style={shrinkGameButtonImage(\"gunner\",5)} alt=\"\"/> {` `}\r\n                                                - поворот орудия против часовой стрелки на 45°, 90° и 135°\r\n                                            </li>\r\n                                            <li>\r\n                                                <img style={shrinkGameButtonImage(\"gunner\",7)} alt=\"\"/> {` `}\r\n                                                - выстрел\r\n                                            </li>\r\n                                            <li>\r\n                                                <img style={shrinkGameButtonImage(\"gunner\",8)} alt=\"\"/> {` `}\r\n                                                - пауза\r\n                                            </li>\r\n                                        </ul>\r\n                                    </li>\r\n                                    <li>\r\n                                        Водитель:\r\n                                        <ul>\r\n                                            <li>\r\n                                                <img style={shrinkGameButtonImage(\"driver\",0)} alt=\"\"/> {` `}\r\n                                                <img style={shrinkGameButtonImage(\"driver\",1)} alt=\"\"/> {` `}\r\n                                                <img style={shrinkGameButtonImage(\"driver\",2)} alt=\"\"/> {` `}\r\n                                                - поворот танка по часовой стрелке на 45°, 90° и 135°\r\n                                            </li>\r\n                                            <li>\r\n                                                <img style={shrinkGameButtonImage(\"driver\",3)} alt=\"\"/> {` `}\r\n                                                <img style={shrinkGameButtonImage(\"driver\",4)} alt=\"\"/> {` `}\r\n                                                <img style={shrinkGameButtonImage(\"driver\",5)} alt=\"\"/> {` `}\r\n                                                - поворот танка против часовой стрелки на 45°, 90° и 135°\r\n                                            </li>\r\n                                            <li>\r\n                                                <img style={shrinkGameButtonImage(\"driver\",7)} alt=\"\"/> {` `}\r\n                                                - подвинуться вперёд\r\n                                            </li>\r\n                                            <li>\r\n                                                <img style={shrinkGameButtonImage(\"driver\",8)} alt=\"\"/> {` `}\r\n                                                - подвинуться назад\r\n                                            </li>\r\n                                            <li>\r\n                                                <img style={shrinkGameButtonImage(\"driver\",9)} alt=\"\"/> {` `}\r\n                                                - повернуть на 45° по часовой стрелке и подвинуться вперёд\r\n                                            </li>\r\n                                            <li>\r\n                                                <img style={shrinkGameButtonImage(\"driver\",10)} alt=\"\"/> {` `}\r\n                                                - повернуть на 45° против часовой стрелки и подвинуться вперёд\r\n                                            </li>\r\n                                            <li>\r\n                                                <img style={shrinkGameButtonImage(\"driver\",11)} alt=\"\"/> {` `}\r\n                                                - пауза\r\n                                            </li>\r\n                                        </ul>\r\n                                    </li>\r\n                                    <li>\r\n                                        Заряжающий:\r\n                                        <ul>\r\n                                            <li>\r\n                                                <img style={shrinkGameButtonImage(\"charger\",0)} alt=\"\"/> {` `}\r\n                                                - зарядить первую половину\r\n                                            </li>\r\n                                            <li>\r\n                                                <img style={shrinkGameButtonImage(\"charger\",1)} alt=\"\"/> {` `}\r\n                                                - зарядить вторую половину\r\n                                            </li>\r\n                                            <li>\r\n                                                <img style={shrinkGameButtonImage(\"charger\",2)} alt=\"\"/> {` `}\r\n                                                - пауза\r\n                                            </li>\r\n                                        </ul>\r\n                                    </li>\r\n                                </ul>\r\n                            </div>\r\n                            <div style={{padding:10, border:\"1px dashed black\"}}>\r\n                                <h2>\r\n                                    Кнопки управления:\r\n                                </h2>\r\n                                <ul>\r\n                                    <li>\r\n                                        <img style={shrinkgetMenuButtons(0)} alt=\"\"/> {` `}\r\n                                        - выполнить весь алгоритм\r\n                                    </li>\r\n                                    <li>\r\n                                        <img style={shrinkgetMenuButtons(1)} alt=\"\"/> {` `}\r\n                                        - приостановить выполнение\r\n                                    </li>\r\n                                    <li>\r\n                                        <img style={shrinkgetMenuButtons(2)} alt=\"\"/> {` `}\r\n                                        - остановить выполнение или сбросить\r\n                                    </li>\r\n                                    <li>\r\n                                        <img style={shrinkgetMenuButtons(3)} alt=\"\"/> {` `}\r\n                                        - выполнить алгоритм до выбранной строки (красной)\r\n                                    </li>\r\n                                    <li>\r\n                                        <img style={shrinkgetMenuButtons(4)} alt=\"\"/> {` `}\r\n                                        - выполнить строку и перейти к следующей\r\n                                    </li>\r\n                                </ul>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React, {Component} from \"react\";\r\nimport ReactModal from \"react-modal\";\r\nimport {connect, Provider} from \"react-redux\";\r\nimport {store} from '../store/stores.js'\r\nimport {gunnerBtnsCount, driverBtnsCount, chargerBtnsCount, gameButtons} from '../store/stores.js'\r\nimport {putActionsToProps_Code, putStateToProps_Code} from \"../store/reducers.js\";\r\nimport {putStateToProps_AlgButtons, putActionsToProps_AlgButtons, putStateToProps_TankInfo} from \"../store/reducers.js\";\r\nimport {getmapTile,getGameButtonImage, getMenuButtons, tileNames} from \"../store/stores\";\r\nimport Info from \"../components/info\"\r\n\r\nconst error = {\r\n    cannotChangeDirection: 'Невозможно изменить направление во время движения, необходимо остановить танк (сделать паузу)',\r\n    outOfBounds: 'Танк выехал за границу',\r\n    moveOnMountain: 'Танк не может проехать по горам',\r\n    moveOnSwamp: 'Танк не может проехать по лесам',\r\n    moveOnTarget: 'Танк не может проехать по мишеням',\r\n    moveOnSmth: 'Танк не может проехать по этой клетке',\r\n    cannotPartiallyLoad: 'Команду \"Заряжай 1\" можно выполнить только если орудие не заряжено',\r\n    cannotFullyLoad: 'Команду \"Заряжай 2\" можно выполнить только если уже выполнена команда \"Заряжай 1\"',\r\n    cannotFire: 'Нельзя выстрелить, пока орудие не полностью заряжено',\r\n};\r\n\r\nclass Menu extends Component {\r\n    render() {\r\n        return (\r\n            <div id=\"menuDiv\" className=\"flex-row flex-align-start\" >\r\n                <div  className=\"margin-10\">\r\n                    <Provider store={store}>\r\n                        <WrappedGameTable />\r\n                    </Provider>\r\n                </div>\r\n                <div  className=\"flex-column flex-align-start\">\r\n                    <Provider store={store}>\r\n                        <WrappedMenuButtons />\r\n                    </Provider>\r\n                    <Provider store={store}>\r\n                        <WrappedGameButtonsTable />\r\n                    </Provider>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nclass MenuButtons extends Component {\r\n    handlePlay(){\r\n            this.props.start();\r\n            setTimeout(() => this.playNext(), this.props.speed)\r\n    }\r\n    handleStop(){\r\n        this.props.restart();\r\n    }\r\n    handlePause(){\r\n        this.props.pause();\r\n    }\r\n    handleNextStep(){\r\n        if (!this.props.isPlay) {\r\n            this.props.start();\r\n        }\r\n        setTimeout(() => {\r\n            if (this.nextMove(this.props.currentRow)) {\r\n                this.props.nextMove();\r\n                this.props.pause();\r\n            }\r\n            else {\r\n                this.props.stop();\r\n            }\r\n        }, this.props.speed)\r\n    }\r\n    handleUntilRow(){\r\n        if (!this.props.isPlay) {\r\n            this.props.start();\r\n        }\r\n        setTimeout(() => {\r\n            if (this.props.currentRow < this.props.selectedRow)\r\n                if (this.nextMove(this.props.currentRow)) {\r\n                    this.props.nextMove();\r\n                    this.handleUntilRow();\r\n                }\r\n            else {\r\n                this.props.pause();\r\n                }\r\n        }, this.props.speed)\r\n    }\r\n\r\n    playNext(){\r\n        if (this.props.isPlay) {\r\n            if (this.nextMove(this.props.currentRow)) {\r\n                this.props.nextMove();\r\n                setTimeout(()=> {\r\n                    if (this.props.isPlay)\r\n                        this.playNext();\r\n                },this.props.speed);\r\n            } else\r\n                {\r\n                    console.log('stop');\r\n                    this.props.stop();}\r\n        }\r\n        else {\r\n            this.props.stop();\r\n        }\r\n    }\r\n    nextMove(indexRow){\r\n        // const state = store.getState();\r\n        const {tank, map, mapWidth, mapHeight} = this.props;//state.mapState;\r\n        const {rows} = this.props;//state.codeState;\r\n        const currRowIndex = indexRow;\r\n\r\n        if (currRowIndex >= rows.length - 1)\r\n            return false;\r\n\r\n        const currRow = rows[currRowIndex];\r\n        const {gunner, driver,  charger} = currRow;\r\n\r\n        if (gunner !== null){\r\n            const tag = gunner.tag;\r\n            switch (tag) {\r\n                case gameButtons.gunner.North:\r\n                case gameButtons.gunner.NorthEast:\r\n                case gameButtons.gunner.East:\r\n                case gameButtons.gunner.SouthEast:\r\n                case gameButtons.gunner.South:\r\n                case gameButtons.gunner.SouthWest:\r\n                case gameButtons.gunner.West:\r\n                case gameButtons.gunner.NorthWest:{\r\n                    this.props.rotateTurret(tag);\r\n                    break;\r\n                }\r\n                case gameButtons.gunner.Fire:{\r\n                    /*TODO кнопка стрельбы*/\r\n                    if (tank.TurretStatus !== 2)\r\n                    {\r\n                        alert(error.cannotFire + `\\nОшибка в строке (${indexRow + 1})`);\r\n                        return false;\r\n                    }\r\n                    this.props.fire();\r\n                    break;\r\n                }\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n\r\n        if (driver !== null){\r\n            const tag = driver.tag;\r\n            switch (tag) {\r\n                case gameButtons.driver.North:\r\n                case gameButtons.driver.NorthEast:\r\n                case gameButtons.driver.East:\r\n                case gameButtons.driver.SouthEast:\r\n                case gameButtons.driver.South:\r\n                case gameButtons.driver.SouthWest:\r\n                case gameButtons.driver.West:\r\n                case gameButtons.driver.NorthWest:{\r\n                    this.props.rotateTank(tag);\r\n                    break;\r\n                }\r\n\r\n                case gameButtons.driver.MoveForward:\r\n                case gameButtons.driver.MoveBackward:{\r\n                    if (currRowIndex > 0\r\n                        && rows[currRowIndex - 1].driver !== null\r\n                        && (\r\n                        (tag === gameButtons.driver.MoveForward\r\n                            && rows[currRowIndex -1].driver.tag === gameButtons.driver.MoveBackward)\r\n                            ||\r\n                        (tag === gameButtons.driver.MoveBackward\r\n                            && rows[currRowIndex -1].driver.tag === gameButtons.driver.MoveForward)\r\n                            )){\r\n                        alert(error.cannotChangeDirection + `\\nОшибка в строке (${indexRow + 1})`);\r\n                        return false;\r\n                    }\r\n\r\n                    if (tag === gameButtons.driver.MoveForward)\r\n                        this.props.moveTankForward();\r\n                    else this.props.moveTankBackward();\r\n\r\n                    const {X,Y} = this.props.tank;\r\n\r\n                    if (X < 0 || X >= mapWidth\r\n                        || Y < 0 || Y >= mapHeight)\r\n                    {\r\n                        alert(error.outOfBounds + `\\nОшибка в строке (${indexRow + 1})`);\r\n                        return false;\r\n                    }\r\n\r\n                    if (map[Y][X].length > 0){\r\n                        let msg = error.moveOnSmth;\r\n                        switch (map[Y][X][0].tile) {\r\n                            case tileNames.swamp:\r\n                                msg = error.moveOnSwamp;\r\n                                break;\r\n                            case tileNames.mountains:\r\n                                msg = error.moveOnMountain;\r\n                                break;\r\n                            case tileNames._3hp:\r\n                            case tileNames._2hp:\r\n                            case tileNames._1hp:\r\n                                msg = error.moveOnTarget;\r\n                                break;\r\n                        }\r\n                        alert(msg + `\\nОшибка в строке (${indexRow + 1})`);\r\n                        return false;\r\n                    }\r\n\r\n                    break;\r\n                }\r\n\r\n                case gameButtons.driver.TurnLeftAndMoveForward:\r\n                case gameButtons.driver.TurnRightAndMoveForward:\r\n                {\r\n                    if (currRowIndex > 0\r\n                        && rows[currRowIndex - 1].driver !== null\r\n                        && rows[currRowIndex -1].driver.tag === gameButtons.driver.MoveBackward)\r\n                    {\r\n                        alert(error.cannotChangeDirection + `\\nОшибка в строке (${indexRow + 1})`);\r\n                        return false;\r\n                    }\r\n\r\n                    if (tag === gameButtons.driver.TurnLeftAndMoveForward)\r\n                        this.props.moveTankRotateLeftAndForward();\r\n                    else this.props.moveTankRotateRightAndForward();\r\n\r\n                    const {X,Y} = this.props.tank;\r\n\r\n                    if (X < 0 || X >= mapWidth\r\n                        || Y < 0 || Y >= mapHeight)\r\n                    {\r\n                        alert(error.outOfBounds + `\\nОшибка в строке (${indexRow + 1})`);\r\n                        return false;\r\n                    }\r\n\r\n                    if (map[Y][X].length > 0){\r\n                        let msg = error.moveOnSmth;\r\n                        switch (map[Y][X][0].tile) {\r\n                            case tileNames.swamp:\r\n                                msg = error.moveOnSwamp;\r\n                                break;\r\n                            case tileNames.mountains:\r\n                                msg = error.moveOnMountain;\r\n                                break;\r\n                            case tileNames._3hp:\r\n                            case tileNames._2hp:\r\n                            case tileNames._1hp:\r\n                                msg = error.moveOnTarget;\r\n                                break;\r\n                        }\r\n                        alert(msg + `\\nОшибка в строке (${indexRow + 1})`);\r\n                        return false;\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (charger !== null){\r\n            switch (charger.tag) {\r\n                case gameButtons.charger.PartiallyLoaded: {\r\n                    if (tank.TurretStatus === 1 || (tank.TurretStatus === 2\r\n                        && (gunner === null || gunner.tag !== gameButtons.gunner.Fire)))\r\n                    {\r\n                        alert(error.cannotPartiallyLoad + `\\nОшибка в строке (${indexRow + 1})`);\r\n                        return false;\r\n                    }\r\n                    break;\r\n                }\r\n                case gameButtons.charger.Ready:{\r\n                    if (tank.TurretStatus >= 2){\r\n                        alert(error.cannotFullyLoad + `\\nОшибка в строке (${indexRow + 1})`);\r\n                        return false;\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n            this.props.load();\r\n        }\r\n        return true;\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"flex-row \">\r\n                <div className=\"flex-column flex-justify-evenly margin-10\">\r\n                    <InfoButton />\r\n                    <Provider store={store}>\r\n                        <WrappedTankInfo />\r\n                    </Provider>\r\n                </div>\r\n                <div className=\"flex-column flex-justify-center widthAll\">\r\n                    <div className=\"flex-column\">\r\n                        <SpeedRange\r\n                            onIncreaseClick={() => this.props.increaseSpeed()}\r\n                            onDecreaseClick={() => this.props.decreaseSpeed()}\r\n                            speed = {this.props.speed}\r\n                        />\r\n                    </div>\r\n                    <div id=\"moveBtnDiv\" className=\"flex-row\">\r\n                        <div className=\"flex-row flex-justify-center\">\r\n                            <div className=\"flex-row flex-wrap\">\r\n                                <div className=\"flex-row\">\r\n                                    <MenuButton image={getMenuButtons(0)} onClick={() => this.handlePlay()} />\r\n                                    <MenuButton image={getMenuButtons(1)} onClick={() => this.handlePause()} />\r\n                                    <MenuButton image={getMenuButtons(2)} onClick={() =>this.handleStop()} />\r\n                                </div>\r\n                                <div className=\"flex-row\">\r\n                                    <MenuButton image={getMenuButtons(3)} onClick={() =>this.handleUntilRow()} />\r\n                                    <MenuButton image={getMenuButtons(4)} onClick={() =>this.handleNextStep()} />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div style={{width: 50}}> </div>\r\n                    </div>\r\n                    <div style={{textAlign: 'right'}} >\r\n                        <span>Дальность стрельбы: </span>\r\n                        <span>{this.props.shellDistance}</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport function MenuButton(props) {\r\n    return (\r\n        <button className=\"margin-5\" onClick={()=> props.onClick()} style={props.image} />\r\n    )\r\n}\r\n\r\nconst WrappedMenuButtons = connect(putStateToProps_AlgButtons, putActionsToProps_AlgButtons)(MenuButtons);\r\n\r\n// =============================================\r\n\r\nclass InfoButton extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state={\r\n            isOpen: false\r\n        }\r\n    }\r\n\r\n    handleClick(){\r\n        this.setState({isOpen: false});\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <button id=\"infoButton\" className=\"flex-row\" onClick={() => this.setState({isOpen: true})}>\r\n                    <span>INFO</span>\r\n                    <div style={getMenuButtons(10)} />\r\n                </button>\r\n                <ReactModal isOpen={this.state.isOpen} onRequestClose={() => this.handleClick()} >\r\n                    <Info onClick={() => this.handleClick()} />\r\n                </ReactModal>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nclass TankInfo extends Component {\r\n\r\n    loadTank(){\r\n        const {tank} = this.props;\r\n        if (!tank) return null;\r\n        const valueBody = {...getmapTile(tileNames.tankBody, 100),position: \"absolute\",\r\n            zIndex:9998,\r\n            left: 0,\r\n            top: 0,\r\n            transform: `rotate(${tank.TankDirection}deg)`,\r\n        };\r\n        const valueHead = {...getmapTile(tileNames.tankHead, 100),position: \"absolute\",\r\n            zIndex:9999,\r\n            left: 0,\r\n            top: 0,\r\n            transform: `rotate(${tank.TurretDirection}deg)`,\r\n        };\r\n        const status = this.props.tank.TurretStatus === 0\r\n            ? tileNames.tankStatus_NotLoaded\r\n            : this.props.tank.TurretStatus === 1\r\n                ? tileNames.tankStatus_PartLoaded\r\n                : tileNames.tankStatus_Loaded;\r\n\r\n        const valueStatus = {...getmapTile(status, 100),position: \"absolute\",\r\n            zIndex:9999,\r\n            left: 0,\r\n            top: 0,\r\n        };\r\n        return (\r\n            [\r\n                <div style={valueBody}></div>,\r\n                <div style={valueHead}></div>,\r\n                <div style={valueStatus}></div>,\r\n            ])\r\n    }\r\n\r\n    render()\r\n    {\r\n        return (\r\n            <div id=\"tankDiv\" style={{position: \"relative\", height:100, width:100}}>\r\n                {this.loadTank()}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst WrappedTankInfo = connect(putStateToProps_TankInfo)(TankInfo);\r\n\r\nfunction SpeedRange(props){\r\n    return (\r\n        <div className=\"flex-column\">\r\n            <div>Скорость воспроизведения</div>\r\n            <div className = \"flex-row\">\r\n                <MenuButton image={getMenuButtons(8)} onClick={()=>props.onIncreaseClick()} />\r\n                <MenuButton image={getMenuButtons(9)} onClick={()=>props.onDecreaseClick()} />\r\n                <span style={{width:50}} >{600 - props.speed}</span>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n// ========================================\r\n\r\nclass GameTable extends Component{\r\n    renderRows(){\r\n        let arr=[];\r\n        const {rows} = this.props;\r\n        for(let i = 0; i < rows.length; i++){\r\n            arr.push(\r\n                <GameTableRow\r\n                    selected ={this.props.selectedRow === i}\r\n                    current = {this.props.currentRow === i}\r\n                    index={i}\r\n                    value={rows[i]}\r\n                    OnRowClick={(o)=> {\r\n                        if (!this.props.isPlay)\r\n                            this.props.selectRow(o)}}\r\n                    onClickTD_LMB={(className) => {\r\n                        if (!this.props.isPlay)\r\n                            this.props.addPictureInTD(className, i)}}\r\n                    onClickTD_RMB={(className) => {\r\n                        if (!this.props.isPlay)\r\n                            this.props.removePictureInTD(className, i)}}\r\n                />\r\n            )\r\n        }\r\n\r\n        return arr;\r\n    }\r\n\r\n    handleSaveAlg(){\r\n        if (this.props.rows[0].gunner !== null\r\n            || this.props.rows[0].driver !== null\r\n            || this.props.rows[0].charger !== null\r\n            || this.props.rows.length > 1)\r\n        {\r\n            this.props.saveAlg();\r\n        }\r\n    }\r\n    handleClear(){\r\n        this.props.clear();\r\n    }\r\n\r\n    fileLoad(evt){\r\n        var files = evt.target.files; // FileList object\r\n        var reader = new FileReader();\r\n        const {loadAlg} = this.props;\r\n        reader.onload = function(e) {\r\n            loadAlg(e.target.result)\r\n            //console.log(typeof e.target.result)\r\n        };\r\n        reader.readAsText(files[0].slice());\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <div className=\"flex-row flex-justify-between\">\r\n                    <div className=\"flex-row\">\r\n                        <MenuButton image={getMenuButtons(5)}\r\n                                    onClick={() =>this.handleSaveAlg()}\r\n                        />\r\n                        <label id=\"labelFor_uploadAlg\" htmlFor=\"uploadAlg\">\r\n                            <div style={getMenuButtons(6)} />\r\n                        </label>\r\n                        <input id=\"uploadAlg\" type=\"file\" onChange={(e)=> this.fileLoad(e)}/>\r\n                    </div>\r\n                    <MenuButton image={getMenuButtons(7)}\r\n                                onClick={() =>this.handleClear()}\r\n                    />\r\n                </div>\r\n                <div id=\"commandsDiv\" className=\"overflow overflow-y-visible\">\r\n                    <table id=\"commands\">\r\n                        <tbody>\r\n                        <tr>\r\n                            <th>#</th>\r\n                            <th>Наводчик</th>\r\n                            <th>Водитель</th>\r\n                            <th>Заряжающий</th>\r\n                        </tr>\r\n                        {this.renderRows()}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst WrappedGameTable = connect(putStateToProps_Code, putActionsToProps_Code)(GameTable);\r\n\r\nclass GameTableRow extends Component{\r\n    render() {\r\n        return (\r\n            <tr className={(this.props.selected ? \"selectedRow\": \"\") + (this.props.current ? \" currentRow\": \"\") }\r\n                onClick={()=>this.props.OnRowClick(this.props.index)}>\r\n                <td style={{width: 20}} >{this.props.index+1}</td>\r\n                <GameTableCell\r\n                    value={this.props.value.gunner}\r\n                    onClickTD_LMB={() => this.props.onClickTD_LMB(\"gunner\")}\r\n                    onClickTD_RMB={() => this.props.onClickTD_RMB(\"gunner\")}\r\n                />\r\n                <GameTableCell\r\n                    value={this.props.value.driver}\r\n                    onClickTD_LMB={() => this.props.onClickTD_LMB(\"driver\")}\r\n                    onClickTD_RMB={() => this.props.onClickTD_RMB(\"driver\")}\r\n                />\r\n                <GameTableCell\r\n                    value={this.props.value.charger}\r\n                    onClickTD_LMB={() => this.props.onClickTD_LMB(\"charger\")}\r\n                    onClickTD_RMB={() => this.props.onClickTD_RMB(\"charger\")}\r\n                />\r\n            </tr>\r\n        );\r\n    }\r\n}\r\n\r\nfunction GameTableCell(props) {\r\n    return (\r\n        <td className=\"gameTD\" onClick={() => props.onClickTD_LMB()} onContextMenu={(e) => {e.preventDefault(); props.onClickTD_RMB()} }>\r\n            <div className=\"flex-column flex-justify-center\">\r\n                <div style={props.value} />\r\n            </div>\r\n        </td>\r\n    );\r\n}\r\n\r\n// ========================================\r\n\r\nclass GameButtonsTable extends Component{\r\n    renderButtons(className) {\r\n        let arr = [];\r\n        const {gunnerSelectedIndex,driverSelectedIndex,chargerSelectedIndex,\r\n                changeSelectedButton} = this.props;\r\n        switch (className) {\r\n            case \"gunner\": {\r\n                for (let i = 0; i < gunnerBtnsCount; i++) {\r\n                    arr.push(\r\n                        <GameButton key={`${className} - ${i}`}\r\n                                    index={i} class={className} selected={gunnerSelectedIndex === i}\r\n                                    onClick={() => changeSelectedButton(i, className)}/>\r\n                    );\r\n                }\r\n                break;\r\n            }\r\n            case \"driver\":{\r\n                for (let i = 0; i < driverBtnsCount; i++) {\r\n                    arr.push(\r\n                        <GameButton key={`${className} - ${i}`}\r\n                                    index={i} class={className} selected={driverSelectedIndex === i}\r\n                                    onClick={() => changeSelectedButton(i, className)}/>\r\n                    );\r\n                }\r\n                break;\r\n            }\r\n            case \"charger\":{\r\n                for (let i = 0; i < chargerBtnsCount; i++) {\r\n                    arr.push(\r\n                        <GameButton key={`${className} - ${i}`}\r\n                                    index={i} class={className} selected={chargerSelectedIndex === i}\r\n                                    onClick={() => changeSelectedButton(i, className)}/>\r\n                    );\r\n                }\r\n                break;\r\n            }\r\n            default:\r\n        }\r\n        return arr;\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"flex-row flex-align-start overflow\">\r\n                <div className=\"flex-column\">\r\n                    <div style={{height: 20}} className=\"padding-5\">Наводчик</div>\r\n                    <div className=\"gameButtonsColumn flex-row flex-wrap\">\r\n                        {this.renderButtons(\"gunner\")}\r\n                    </div>\r\n                </div>\r\n                <div className=\"flex-column\">\r\n                    <div style={{height: 20}} className=\"padding-5\">Водитель</div>\r\n                    <div className=\"gameButtonsColumn flex-row flex-wrap\">\r\n                        {this.renderButtons(\"driver\")}\r\n                    </div>\r\n                </div>\r\n                <div className=\"flex-column\">\r\n                    <div style={{height: 20, }} className=\"padding-5\">Заряжающий</div>\r\n                    <div className=\"gameButtonsColumn flex-row flex-wrap\">\r\n                        {this.renderButtons(\"charger\")}\r\n                    </div>\r\n                </div>\r\n                <div className=\"flex-column\">\r\n\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst WrappedGameButtonsTable = connect(putStateToProps_Code, putActionsToProps_Code)(GameButtonsTable);\r\n\r\nfunction GameButton(props) {\r\n    return (\r\n        <button className={props.class + (props.selected? \" selected\":\"\") + \" margin-1\"}\r\n                style={getGameButtonImage(props.class, props.index)}\r\n                onClick={props.onClick}/>\r\n    )\r\n}\r\n\r\nexport default Menu\r\n","import React, {Component} from \"react\";\r\nimport { connect, Provider } from 'react-redux'\r\nimport {store} from '../store/stores.js'\r\nimport ReactModal from \"react-modal\";\r\nimport {putStateToProps_Map, putActionsToProps_Map} from '../store/reducers.js'\r\nimport '../styles/game.css';\r\nimport {tileNames, getmapTile, getMenuButtons} from \"../store/stores\";\r\nimport {MenuButton} from \"../components/menu.js\";\r\n\r\n\r\nclass Map extends Component {\r\n    render() {\r\n        return (\r\n            <div id=\"mapDiv\">\r\n                <Provider store={store}>\r\n                    <WrappedMapTable />\r\n                </Provider>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nclass MapTable extends Component {\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state={sonic:false};\r\n\r\n        props.loadMap(\"\")\r\n    }\r\n\r\n\r\n    renderTable(){\r\n        const tileSize = this.props.tileSize;\r\n        const {map, mapWidth, mapHeight, reduceHP} = this.props;\r\n        const elements = [];\r\n\r\n        for (let i = 0; i < mapHeight; i++){\r\n            const row =[];\r\n\r\n            for (let j = 0; j < mapWidth; j++){\r\n                if (map[i][j].length > 0\r\n                    && (map[i][j][0].tile === tileNames.littleMountains\r\n                    || map[i][j][0].tile === tileNames.littleSwamp)\r\n                    &&(map[i][j][0].XShift !== null && map[i][j][0].YShift !== null)){\r\n                    let combinedTile =[[null, null, null],[null, null, null],[null, null, null]];\r\n                    for (let k = 0; k < map[i][j].length; k++){\r\n\r\n                        combinedTile[map[i][j][k].YShift + 1][map[i][j][k].XShift + 1] =\r\n                            (<MapTile key={`tile ${i} - ${j}: ${map[i][j][k].YShift + 1} - ${map[i][j][k].XShift + 1}`}\r\n                                      value={getmapTile(map[i][j][k].tile, this.props.tileSize, true)} />)\r\n                    }\r\n                    for (let k = 0; k < 9; k++){\r\n                        if (!combinedTile[Math.floor(k / 3)][k %3]){\r\n                            combinedTile[Math.floor(k / 3)][k % 3]\r\n                                = (<MapTile key={`tile ${i} - ${j}: ${Math.floor(k / 3)} - ${k %3}`}\r\n                                            value={getmapTile(tileNames.empty,this.props.tileSize, true)} />);\r\n                        }\r\n                    }\r\n                    const combinedDiv=[];\r\n                    for (let k = 0; k < 3; k++){\r\n                        const combinedRow = [];\r\n                        for (let t = 0; t < 3; t++){\r\n                            combinedRow.push(combinedTile[k][t])\r\n                        }\r\n                        combinedDiv.push(\r\n                            <div className=\"flex-row\">\r\n                                {combinedRow}\r\n                            </div>);\r\n                    }\r\n                    row.push(\r\n                        <div key={`div ${i} - ${j}`} className=\"mapTile flex-column\" style={{height: tileSize, width: tileSize }}>\r\n                            {combinedDiv}\r\n                        </div>);\r\n                }\r\n                else\r\n                for (let k = 0; k < map[i][j].length; k++){\r\n                    row.push(\r\n                        <MapTile key={`tile ${i} - ${j}`} value={getmapTile( map[i][j][k].tile, this.props.tileSize)} />\r\n                    );\r\n                }\r\n                if (map[i][j].length  === 0){\r\n                    const tile = /*{...*/getmapTile(tileNames.empty, this.props.tileSize,);\r\n                    row.push(\r\n                        <MapTile key={`tile ${i} - ${j}`} value={tile} />\r\n                    );\r\n                }\r\n            }\r\n            elements.push(\r\n                <div className=\"flex-row\">\r\n                    {row}\r\n                </div>\r\n            )\r\n        }\r\n        return (\r\n            <div className=\"flex-column flex-align-start\" style={{position: \"relative\"}} >\r\n                {this.loadTank()}\r\n                {this.loadTrails()}\r\n                {elements}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    loadTank(){\r\n        const tileSize= this.props.tileSize;\r\n        const {tank} = this.props;\r\n        if (!tank) return null;\r\n        const valueBody = {...getmapTile(tileNames.tankBody, this.props.tileSize),position: \"absolute\",\r\n            zIndex:9997,\r\n            left: tank.X * (tileSize + 2),\r\n            top: tank.Y * (tileSize + 2),\r\n            transform: `rotate(${tank.TankDirection}deg)`\r\n\r\n        };\r\n        const valueHead = {...getmapTile(tileNames.tankHead, this.props.tileSize),position: \"absolute\",\r\n            zIndex:9998,\r\n            left: tank.X * (tileSize + 2),\r\n            top: tank.Y * (tileSize + 2),\r\n            transform: `rotate(${tank.TurretDirection}deg)`\r\n        };\r\n        const status = this.props.tank.TurretStatus === 0\r\n            ? tileNames.tankStatus_NotLoaded\r\n            : this.props.tank.TurretStatus === 1\r\n                ? tileNames.tankStatus_PartLoaded\r\n                : tileNames.tankStatus_Loaded;\r\n\r\n        const valueStatus = {...getmapTile(status, this.props.tileSize),position: \"absolute\",\r\n            zIndex:9999,\r\n            left: tank.X * (tileSize + 2),\r\n            top: tank.Y * (tileSize + 2),\r\n        };\r\n        return (\r\n            [\r\n                 <div style={valueBody}></div>,\r\n                 <div style={valueHead}></div>,\r\n                 <div style={valueStatus}></div>\r\n            ])\r\n    }\r\n    loadTrails(){\r\n        const tileSize= this.props.tileSize;\r\n        const {mapTracers} = this.props;\r\n        if (mapTracers.length === 0) return null;\r\n\r\n        const arr = [];\r\n        const length = mapTracers.length;\r\n\r\n        for (let i = 0; i < length; i++){\r\n            const little = mapTracers[i].tag === tileNames.littleTrailDiag\r\n                            || mapTracers[i].tag === tileNames.littleTrailVert;\r\n            let left = mapTracers[i].X * (tileSize * (little? 3: 1) + 2)\r\n                + (little? (tileSize+2) * mapTracers[i].XShift :0);\r\n            let top = mapTracers[i].Y * (tileSize * (little? 3: 1) + 2)\r\n                + (little? (tileSize+2) * mapTracers[i].XShift :0);\r\n            const value = {...getmapTile(mapTracers[i].tag, this.props.tileSize),position: \"absolute\",\r\n                zIndex:9996,\r\n                left: left,\r\n                top: top,\r\n                transform: `rotate(${mapTracers[i].inverted? 90 : 0 }deg)`\r\n            };\r\n            arr.push(\r\n                <div style={value}></div>\r\n            )\r\n        }\r\n\r\n        return arr;\r\n    }\r\n\r\n    fileLoad(evt){\r\n        var files = evt.target.files; // FileList object\r\n        var reader = new FileReader();\r\n        const {loadMap} = this.props;\r\n        reader.onload = (e) => {\r\n            if (e.target.result === \"sonic\") {\r\n                this.setState({sonic: true});\r\n                document.getElementById('audio').play();\r\n                document.getElementById('audio').volume=0.05;\r\n            }\r\n            else\r\n            loadMap(e.target.result)\r\n            //console.log(typeof e.target.result)\r\n        };\r\n        reader.readAsText(files[0].slice());\r\n    }\r\n\r\n    hideSonic(){\r\n        const t =document.getElementById('audio');\r\n        t.pause();\r\n        t.currentTime =0;\r\n        this.setState({sonic: false});\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <div id=\"mapTitle\" className=\"flex-row flex-justify-between\">\r\n                    <label id=\"labelFor_uploadMap\" htmlFor=\"uploadMap\">\r\n                        <div style={getMenuButtons(6)}/>\r\n                    </label>\r\n                    <input id=\"uploadMap\" type=\"file\" onChange={(e) => this.fileLoad(e)}/>\r\n                    <div className=\"flex-row\">\r\n                        <span>Приближение</span>\r\n                        <MenuButton image={getMenuButtons(8)}\r\n                                    onClick={()=>this.props.zoomIn()}\r\n                        />\r\n                        <MenuButton image={getMenuButtons(9)}\r\n                                    onClick={()=>this.props.zoomOut()}\r\n                        />\r\n                        <div >{this.props.tileSize} </div>\r\n                    </div>\r\n                </div>\r\n                <div id=\"mapCont\" className=\"overflow-visible\" >\r\n                        {this.renderTable()}\r\n                </div>\r\n                <audio id=\"audio\" src=\"../sanic.mp3\" preload=\"auto\" style={{display:\"none\"}} loop  />\r\n\r\n                <ReactModal id=\"her\" isOpen={this.state.sonic}\r\n                            onRequestClose={() => this.hideSonic()} >\r\n                    <style>\r\n                        {\r\n                            `\r\n                            @-webkit-keyframes sonic {\r\n                                0% {\r\n                                    left: -50%;\r\n                                    top:0\r\n                                    transform: scale(1, 1);\r\n                                }\r\n                                50% {\r\n                                    left: 130%;\r\n                                    top:0;\r\n                                    transform: scale(1, 1);\r\n                                }\r\n                                51% {\r\n                                    left: 130%;\r\n                                    top:70%;\r\n                                    transform: scale(-1, 1);\r\n                                }\r\n                                99% {\r\n                                    left: -50%;\r\n                                    top:70%;\r\n                                }\r\n                                100% {\r\n                                    left: -50%;\r\n                                    top:0;\r\n                                    transform: scale(-1, 1);\r\n                                }\r\n                                }`\r\n                        }\r\n                    </style>\r\n                    {/*<div style={{width:\"90%\", height:\"90%\", textAlign:\"center\", verticalAlign:\"center\",*/}\r\n                                {/*position: \"relative\"}} >*/}\r\n                        <img src=\"../images/sanic.png\" alt =\"\" style={{width:300, height:300, position:\"fixed\",\r\n                            animation: \"sonic 2s infinite linear\"}} onClick={()=>this.hideSonic()} />\r\n                    {/*</div>*/}\r\n                </ReactModal>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nfunction MapTile(props) {\r\n    const value = {\r\n        backgroundImage: props.value.backgroundImage,\r\n        backgroundPosition:  props.value.backgroundPosition,\r\n        border: props.value.border,\r\n        height: props.value.height,\r\n        width: props.value.width,\r\n        backgroundSize: props.value.backgroundSize,\r\n    };\r\n    return(\r\n        <div className=\"mapTile\" style={value} onClickCapture={()=>props.onClick()}>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst WrappedMapTable = connect(putStateToProps_Map, putActionsToProps_Map)(MapTable);\r\n\r\nexport default Map","import React, {Component} from 'react';\nimport Menu from './components/menu.js'\nimport Map from './components/map.js'\nimport ReactDOM from 'react-dom';\nimport './styles/game.css';\nimport './styles/scroll.css';\n\n\nclass Game extends Component {\n    render() {\n        return (\n            <div style={{display:\"flex\", flexDirection:\"column\"}}>\n                <div id=\"snavigator\">Танковый Биатлон</div>\n                <div id=\"gridMain\" >\n                    <Map />\n                    <Menu />\n                </div>\n            </div>\n        )\n    }\n}\n\n// ========================================\n\nReactDOM.render(\n    <Game />,\n    document.getElementById('root')\n);\n\n"],"sourceRoot":""}