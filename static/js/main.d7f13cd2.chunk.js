(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(e,t,a){},25:function(e,t,a){e.exports=a(44)},42:function(e,t,a){},43:function(e,t,a){e.exports=a.p+"static/media/\u043a\u0430\u0440\u0442\u0430.a649f862.png"},44:function(e,t,a){"use strict";a.r(t);var n=a(3),r=a(4),i=a(6),c=a(5),o=a(7),l=a(0),u=a.n(l),s=a(22),d=a.n(s),m=a(8),h=a(1),g=a(2),p=a(24),v={CHANGE_SELECTED_BUTTON:"CHANGE_SELECTED_BUTTON",ADD_PICTURE_IN_TD:"ADD_PICTURE_IN_TD",REMOVE_PICTURE_IN_TD:"REMOVE_PICTURE_IN_TD"},f={REDUCE_HP:"REDUCE_HP",LOAD_MAP:"LOAD_MAP",ZOOM:"ZOOM"},b={RUN_ROW:"RUN_ROW",SELECT_ROW:"SELECT_ROW",ROTATE_TANK:"ROTATE_TANK",ROTATE_TURRET:"ROTATE_TURRET",MOVE_TANK:"MOVE_TANK",MOVE_TANK_ROTATE_AND_FORWARD:"MOVE_TANK_ROTATE_AND_FORWARD",LOAD:"LOAD",SET_CURR_ROW:"SET_CURR_ROW",START:"START",STOP:"STOP",NEXT_MOVE:"NEXT_MOVE",FIRE:"FIRE"},S=f,k=v,E=b,O=function(e,t){return{type:v.CHANGE_SELECTED_BUTTON,payload:{index:e,className:t}}},w=function(e,t){return{type:v.ADD_PICTURE_IN_TD,payload:{className:e,indexRow:t}}},T=function(e,t){return{type:v.REMOVE_PICTURE_IN_TD,payload:{className:e,indexRow:t}}},y=function(e){return{type:b.SELECT_ROW,payload:e}},x=function(e,t){return{type:f.REDUCE_HP,payload:{i:e,j:t}}},R=function(e){return{type:f.LOAD_MAP,payload:e}},j=function(){return{type:f.ZOOM,payload:20}},N=function(){return{type:f.ZOOM,payload:-20}},_=function(e){return{type:b.ROTATE_TANK,payload:e}},M=function(e){return{type:b.ROTATE_TURRET,payload:e}},D=function(){return{type:b.MOVE_TANK,payload:!0}},A=function(){return{type:b.MOVE_TANK,payload:!1}},C=function(){return{type:b.MOVE_TANK_ROTATE_AND_FORWARD,payload:!0}},X=function(){return{type:b.MOVE_TANK_ROTATE_AND_FORWARD,payload:!1}},I=function(){return{type:b.LOAD}},L=function(e){return{type:b.SET_CURR_ROW,payload:e}},P=function(){return{type:b.START}},Y=function(){return{type:b.STOP}},W=function(){return{type:b.NEXT_MOVE}},B=function(){return{type:f.LOAD_MAP,payload:""}},F=function(){return{type:b.FIRE}},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.CHANGE_SELECTED_BUTTON:var a=t.payload,n=a.index,r=a.className;return"gunner"===r?Object(h.a)({},e,{gunnerSelectedIndex:n}):"driver"===r?Object(h.a)({},e,{driverSelectedIndex:n}):"charger"===r?Object(h.a)({},e,{chargerSelectedIndex:n}):e;case v.ADD_PICTURE_IN_TD:var i=e.rows.slice(),c=t.payload,o=c.indexRow,l=c.className;for(i[o]={gunner:"gunner"===l?$("gunner",e.gunnerSelectedIndex):i[o].gunner,driver:"driver"===l?$("driver",e.driverSelectedIndex):i[o].driver,charger:"charger"===l?$("charger",e.chargerSelectedIndex):i[o].charger};null!=i[i.length-1].gunner||null!=i[i.length-1].driver||null!=i[i.length-1].charger;)i.push({gunner:null,driver:null,charger:null});return Object(h.a)({},e,{rows:i});case v.REMOVE_PICTURE_IN_TD:var u=Object(p.a)(e.rows),s=t.payload,d=s.indexRow,m=s.className;for(u[d]={gunner:"gunner"===m?null:u[d].gunner,driver:"driver"===m?null:u[d].driver,charger:"charger"===m?null:u[d].charger};u.length>0&&null==u[u.length-1].gunner&&null==u[u.length-1].driver&&null==u[u.length-1].charger;)u.pop();return u.push({gunner:null,driver:null,charger:null}),Object(h.a)({},e,{rows:u});case v.SELECT_ROW:return Object(h.a)({},e,{selectedRow:t.payload.index});case v.RUN_ROW:return e}return e},H=function(e){return{gunnerSelectedIndex:e.codeState.gunnerSelectedIndex,driverSelectedIndex:e.codeState.driverSelectedIndex,chargerSelectedIndex:e.codeState.chargerSelectedIndex,selectedRow:e.codeState.selectedRow,currentRow:e.codeState.currentRow,rows:e.codeState.rows}},z=function(e){return{changeSelectedButton:Object(g.a)(O,e),addPictureInTD:Object(g.a)(w,e),removePictureInTD:Object(g.a)(T,e),selectRow:Object(g.a)(y,e)}},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.REDUCE_HP:var a=e.map.slice(),n=t.payload,r=n.i,i=n.j;switch(a[r][i].tag){case Z._3hp:return a[r][i]=G(Z._2hp),Object(h.a)({},e,{map:a});case Z._2hp:return a[r][i]=G(Z._1hp),Object(h.a)({},e,{map:a});case Z._1hp:return a[r][i]=G(Z.empty),Object(h.a)({},e,{map:a})}return e;case f.LOAD_MAP:var c=""===t.payload?e.initialMap:t.payload,o=null;try{if(window.DOMParser)o=(new DOMParser).parseFromString(c,"text/xml");else(o=new ActiveXObject("Microsoft.XMLDOM")).async=!1,o.loadXML(c);var l=o.getElementsByTagName("World")[0],u=Number(l.getAttribute("Width")),s=Number(l.getAttribute("Height")),d=Number(l.getAttribute("ShellDistance")),m=l.getElementsByTagName("Tank")[0],g=0;switch(m.getElementsByTagName("TurretStatus")[0].innerHTML){case"PartiallyLoaded":g=1;break;case"Ready":g=2}for(var p={X:Number(m.getAttribute("X")),Y:Number(m.getAttribute("Y")),TankDirection:ee(m.getElementsByTagName("TankDirection")[0].innerHTML),TurretDirection:ee(m.getElementsByTagName("TurretDirection")[0].innerHTML),TurretStatus:g},v=l.getElementsByTagName("Units")[0].children,b=[],S=0;S<s;S++){for(var k=[],E=0;E<u;E++)k.push([]);b.push(k)}for(var O=0;O<v.length;O++){var w=Number(v[O].getAttribute("X")),T=Number(v[O].getAttribute("Y")),y=v[O].getAttribute("XShift");y&&(y=Number(v[O].getAttribute("XShift")));var x=v[O].getAttribute("YShift");x&&(x=Number(v[O].getAttribute("YShift")));var R=Z.empty;switch(v[O].tagName){case"Swamp":R=Z.swamp;break;case"Rock":R=Z.mountains;break;case"LittleRock":R=Z.littleMountains;break;case"LittleSwamp":R=Z.littleSwamp;break;case"LittlePillbox":R=Z._1hp;break;case"MediumPillbox":R=Z._2hp;break;case"BigPillbox":R=Z._3hp}b[T][w].push({XShift:y,YShift:x,tile:R})}return Object(h.a)({},e,{shellDistance:d,tank:p,mapWidth:u,mapHeight:s,map:b,initialMap:c})}catch(N){alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u0444\u0430\u0439\u043b \u043a\u0430\u0440\u0442\u044b \u043d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e \u0441\u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u043d")}case f.ZOOM:var j=e.tileSize;return(j+=t.payload)<20&&(j=20),j>80&&(j=80),Object(h.a)({},e,{tileSize:j})}return e},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b.SELECT_ROW:return Object(h.a)({},e,{codeState:Object(h.a)({},e.codeState,{selectedRow:t.payload})});case b.RUN_ROW:return e;case b.ROTATE_TURRET:var a=te(ee(t.payload)+e.mapState.tank.TurretDirection);if(e.mapState.tank)return Object(h.a)({},e,{mapState:Object(h.a)({},e.mapState,{tank:Object(h.a)({},e.mapState.tank,{TurretDirection:a})})});case b.ROTATE_TANK:var n=te(ee(t.payload)+e.mapState.tank.TankDirection),r=te(ee(t.payload)+e.mapState.tank.TurretDirection);if(e.mapState.tank)return Object(h.a)({},e,{mapState:Object(h.a)({},e.mapState,{tank:Object(h.a)({},e.mapState.tank,{TankDirection:n,TurretDirection:r})})});case b.MOVE_TANK:var i=e.mapState.tank;if(i){var c=[0,0];switch(ae(i.TankDirection)){case Q.driver.North:c=[0,-1];break;case Q.driver.NorthEast:c=[1,-1];break;case Q.driver.East:c=[1,0];break;case Q.driver.SouthEast:c=[1,1];break;case Q.driver.South:c=[0,1];break;case Q.driver.SouthWest:c=[-1,1];break;case Q.driver.West:c=[-1,0];break;case Q.driver.NorthWest:c=[-1,-1]}return t.payload||(c[0]=-1*c[0],c[1]=-1*c[1]),Object(h.a)({},e,{mapState:Object(h.a)({},e.mapState,{tank:Object(h.a)({},e.mapState.tank,{X:i.X+c[0],Y:i.Y+c[1]})})})}case b.MOVE_TANK_ROTATE_AND_FORWARD:var o=e.mapState.tank;if(o){var l=te(o.TankDirection+(t.payload?-45:45)),u=te(o.TurretDirection+(t.payload?-45:45)),s=[0,0];switch(ae(l)){case Q.driver.North:s=[0,-1];break;case Q.driver.NorthEast:s=[1,-1];break;case Q.driver.East:s=[1,0];break;case Q.driver.SouthEast:s=[1,1];break;case Q.driver.South:s=[0,1];break;case Q.driver.SouthWest:s=[-1,1];break;case Q.driver.West:s=[-1,0];break;case Q.driver.NorthWest:s=[-1,-1]}return Object(h.a)({},e,{mapState:Object(h.a)({},e.mapState,{tank:Object(h.a)({},e.mapState.tank,{X:o.X+s[0],Y:o.Y+s[1],TankDirection:l,TurretDirection:u})})})}case b.LOAD:if(e.mapState.tank){var d=e.mapState.tank.TurretStatus+1;return 3===d&&(d=0),Object(h.a)({},e,{mapState:Object(h.a)({},e.mapState,{tank:Object(h.a)({},e.mapState.tank,{TurretStatus:d})})})}case b.SET_CURR_ROW:return Object(h.a)({},e,{codeState:Object(h.a)({},e.codeState,{selectedRow:t.payload})});case b.START:return Object(h.a)({},e,{codeState:Object(h.a)({},e.codeState,{isPlay:!0}),mapState:Object(h.a)({},e.mapState,V(e.mapState,B()))});case b.STOP:return Object(h.a)({},e,{codeState:Object(h.a)({},e.codeState,{isPlay:!1,currentRow:0})});case b.NEXT_MOVE:if(e.codeState.isPlay){var m=e.codeState.currentRow+1;return Object(h.a)({},e,{codeState:Object(h.a)({},e.codeState,{currentRow:m})})}case b.FIRE:if(e.mapState.tank)return console.log("FIRE from ".concat(e.mapState.tank.X,"-").concat(e.mapState.tank.Y)),Object(h.a)({},e,{mapState:Object(h.a)({},e.mapState,{tank:Object(h.a)({},e.mapState.tank,{TurretStatus:0})})})}return e},Z={mountains:"mountains",littleMountains:"littleMountains",littleSwamp:"littleSwamp",swamp:"swamp",tankBody:"tankBody",tankHead:"tankHead",_3hp:"3hp",_2hp:"2hp",_1hp:"1hp",empty:"empty"},G=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(ce+""==="undefined")return{};var a=ce.getState().mapState.tileSize,n={};switch(e){case Z.mountains:case Z.littleMountains:n={tag:e,backgroundImage:"url('../images/game/gametiles.svg')",backgroundPosition:"-".concat(a,"px 0px"),height:a,width:a};break;case Z.swamp:case Z.littleSwamp:n={tag:e,backgroundImage:"url('../images/game/gametiles.svg')",backgroundPosition:"-".concat(2*a,"px 0px"),height:a,width:a};break;case Z.tankBody:n={tag:e,backgroundImage:"url('../images/game/gametiles.svg')",backgroundPosition:"-".concat(3*a,"px 0px"),height:a,width:a};break;case Z.tankHead:n={tag:e,backgroundImage:"url('../images/game/gametiles.svg')",backgroundPosition:"-".concat(4*a,"px 0px"),height:a,width:a};break;case Z._3hp:n={tag:e,backgroundImage:"url('../images/game/gametiles.svg')",backgroundPosition:"0px -".concat(a,"px"),height:a,width:a};break;case Z._2hp:n={tag:e,backgroundImage:"url('../images/game/gametiles.svg')",backgroundPosition:"-".concat(a,"px -").concat(a,"px"),height:a,width:a};break;case Z._1hp:n={tag:e,backgroundImage:"url('../images/game/gametiles.svg')",backgroundPosition:"-".concat(2*a,"px -").concat(a,"px"),height:a,width:a};break;default:n={tag:"empty",backgroundImage:"url('../images/game/gametiles.svg')",backgroundPosition:"0px 0px",height:a,width:a}}if(t){var r=n.backgroundPosition.split(" "),i=Number(r[0].slice(0,r[0].length-2))/3,c=Number(r[1].slice(0,r[1].length-2))/3;n=Object(h.a)({},n,{backgroundPosition:"".concat(Math.floor(i),"px ").concat(Math.floor(c),"px"),backgroundSize:"".concat(5*a/3+2,"px ").concat(5*a/3+2,"px"),height:n.height/3,width:n.width/3,border:"none"})}else n=Object(h.a)({},n,{backgroundSize:"".concat(5*a,"px ").concat(5*a,"px")});return n},J=8,q=11,Q={gunner:{North:"North",East:"East",South:"South",West:"West",NorthWest:"NorthWest",NorthEast:"NorthEast",SouthWest:"SouthWest",SouthEast:"SouthEast",Fire:"Fire"},driver:{North:"North",East:"East",South:"South",West:"West",NorthWest:"NorthWest",NorthEast:"NorthEast",SouthWest:"SouthWest",SouthEast:"SouthEast",MoveForward:"MoveForward",MoveBackward:"MoveBackward",TurnLeftAndMoveForward:"TurnLeftAndMoveForward",TurnRightAndMoveForward:"TurnRigthAndMoveForward",TurnLeftAndMoveBackward:"TurnLeftAndMoveBackward",TurnRightAndMoveBackward:"TurnRigthAndMoveBackward"},charger:{NotLoaded:0,PartiallyLoaded:1,Ready:2}};function $(e,t){return[{tag:Q.gunner.NorthEast,backgroundImage:"url('../images/game/actionbtns.svg')",backgroundPosition:"0px 0px",left:0,height:50,width:50},{tag:Q.gunner.East,backgroundImage:"url('../images/game/actionbtns.svg')",backgroundPosition:"-50px 0px",left:0,height:50,width:50},{tag:Q.gunner.SouthEast,backgroundImage:"url('../images/game/actionbtns.svg')",backgroundPosition:"-100px 0px",left:0,height:50,width:50},{tag:Q.gunner.NorthWest,backgroundImage:"url('../images/game/actionbtns.svg')",backgroundPosition:"0px -50px",left:0,height:50,width:50},{tag:Q.gunner.West,backgroundImage:"url('../images/game/actionbtns.svg')",backgroundPosition:"-50px -50px",left:0,height:50,width:50},{tag:Q.gunner.SouthWest,backgroundImage:"url('../images/game/actionbtns.svg')",backgroundPosition:"-100px -50px",left:0,height:50,width:50},{tag:Q.gunner.South,backgroundImage:"url('../images/game/actionbtns.svg')",backgroundPosition:"0px -100px",left:0,height:50,width:50},{tag:Q.gunner.Fire,backgroundImage:"url('../images/game/actionbtns.svg')",backgroundPosition:"-100px -100px",left:0,height:50,width:50},{tag:Q.driver.NorthEast,backgroundImage:"url('../images/game/actionbtns.svg')",backgroundPosition:"0px -150px",left:0,height:50,width:50},{tag:Q.driver.East,backgroundImage:"url('../images/game/actionbtns.svg')",backgroundPosition:"-50px -150px",left:0,height:50,width:50},{tag:Q.driver.SouthEast,backgroundImage:"url('../images/game/actionbtns.svg')",backgroundPosition:"-100px -150px",left:0,height:50,width:50},{tag:Q.driver.NorthWest,backgroundImage:"url('../images/game/actionbtns.svg')",backgroundPosition:"0px -200px",left:0,height:50,width:50},{tag:Q.driver.West,backgroundImage:"url('../images/game/actionbtns.svg')",backgroundPosition:"-50px -200px",left:0,height:50,width:50},{tag:Q.driver.SouthWest,backgroundImage:"url('../images/game/actionbtns.svg')",backgroundPosition:"-100px -200px",left:0,height:50,width:50},{tag:Q.driver.South,backgroundImage:"url('../images/game/actionbtns.svg')",backgroundPosition:"-50px -100px",left:0,height:50,width:50},{tag:Q.driver.MoveForward,backgroundImage:"url('../images/game/actionbtns.svg')",backgroundPosition:"-150px 0px",left:0,height:50,width:50},{tag:Q.driver.MoveBackward,backgroundImage:"url('../images/game/actionbtns.svg')",backgroundPosition:"-200px 0px",left:0,height:50,width:50},{tag:Q.driver.TurnRightAndMoveForward,backgroundImage:"url('../images/game/actionbtns.svg')",backgroundPosition:"-150px -50px",left:0,height:50,width:50},{tag:Q.driver.TurnLeftAndMoveForward,backgroundImage:"url('../images/game/actionbtns.svg')",backgroundPosition:"-200px -50px",left:0,height:50,width:50},{tag:Q.charger.PartiallyLoaded,backgroundImage:"url('../images/game/actionbtns.svg')",backgroundPosition:"-150px -100px",left:0,height:50,width:50},{tag:Q.charger.Ready,backgroundImage:"url('../images/game/actionbtns.svg')",backgroundPosition:"-200px -100px",left:0,height:50,width:50}][t+("driver"===e?J:0)+("charger"===e?J+q:0)]}function ee(e){switch(e){case"North":return 0;case"East":return 90;case"South":return 180;case"West":return-90;case"NorthWest":return-45;case"NorthEast":return 45;case"SouthWest":return-135;case"SouthEast":return 135}return 0}function te(e){return e>180?e-360:e<-180?e+360:180===e||-180===e?180:e}function ae(e){switch(e=te(e)){case 0:return Q.gunner.North;case 90:return Q.gunner.East;case 180:return Q.gunner.South;case-90:return Q.gunner.West;case-45:return Q.gunner.NorthWest;case 45:return Q.gunner.NorthEast;case-135:return Q.gunner.SouthWest;case 135:return Q.gunner.SouthEast}return"undefined"}var ne={gunnerSelectedIndex:0,driverSelectedIndex:0,chargerSelectedIndex:0,selectedRow:0,currentRow:0,rows:[{gunner:null,driver:null,charger:null}],isPlay:!1},re={tileSize:40,initialMap:'<?xml version="1.0" encoding="utf-8"?>\n<World Height="10" Width="10" ShellDistance="8">\n  <Tank X="4" Y="4">\n    <TankDirection>North</TankDirection>\n    <TurretDirection>North</TurretDirection>\n    <TurretStatus>NotLoaded</TurretStatus>\n  </Tank>\n  <Units>\n    <LittlePillbox X="4" Y="2" />\n    <BigPillbox X="7" Y="1" />\n    <Rock X="5" Y="2" />\n    <LittleRock X="6" Y="2" XShift="-1" YShift="1" />\n    <LittleRock X="6" Y="2" XShift="0" YShift="0" />\n    <LittleRock X="6" Y="2" XShift="1" YShift="-1" />\n    <LittleRock X="7" Y="2" XShift="0" YShift="-1" />\n    <LittleRock X="7" Y="2" XShift="0" YShift="0" />\n    <LittleRock X="7" Y="2" XShift="0" YShift="1" />\n    <Swamp X="3" Y="3" />\n    <Swamp X="4" Y="3" />\n    <Swamp X="5" Y="3" />\n    <LittleSwamp X="6" Y="2" XShift="-1" YShift="0" />\n    <LittleSwamp X="6" Y="2" XShift="-1" YShift="-1" />\n    <LittleSwamp X="6" Y="2" XShift="0" YShift="-1" />\n    <LittleSwamp X="6" Y="2" XShift="1" YShift="0" />\n    <LittleSwamp X="6" Y="2" XShift="1" YShift="1" />\n    <LittleSwamp X="6" Y="2" XShift="0" YShift="1" />\n    <LittleSwamp X="7" Y="2" XShift="-1" YShift="0" />\n    <LittleSwamp X="7" Y="2" XShift="-1" YShift="-1" />\n    <LittleSwamp X="7" Y="2" XShift="-1" YShift="1" />\n    <LittleSwamp X="7" Y="2" XShift="1" YShift="-1" />\n    <LittleSwamp X="7" Y="2" XShift="1" YShift="0" />\n    <LittleSwamp X="7" Y="2" XShift="1" YShift="1" />\n    <LittleSwamp X="6" Y="3" XShift="-1" YShift="1" />\n    <LittleSwamp X="6" Y="3" XShift="0" YShift="0" />\n    <LittleSwamp X="6" Y="3" XShift="1" YShift="-1" />\n    <LittleSwamp X="6" Y="3" XShift="0" YShift="-1" />\n    <LittleSwamp X="6" Y="3" XShift="-1" YShift="-1" />\n    <LittleSwamp X="6" Y="3" XShift="-1" YShift="0" />\n    <LittleSwamp X="6" Y="3" XShift="1" YShift="0" />\n    <LittleSwamp X="7" Y="3" XShift="-1" YShift="-1" />\n    <LittleSwamp X="7" Y="3" XShift="0" YShift="-1" />\n  </Units>\n</World>',map:[[G(Z.empty),G(Z.mountains),G(Z.mountains),G(Z.empty),G(Z.tank)],[G(Z._1hp),G(Z.empty),G(Z.mountains),G(Z.empty),G(Z.empty)],[G(Z._3hp),G(Z.empty),G(Z.swamp),G(Z.empty),G(Z.empty)],[G(Z.empty),G(Z.mountains),G(Z.empty),G(Z.empty),G(Z.empty)],[G(Z.empty),G(Z.mountains),G(Z.empty),G(Z._2hp),G(Z.empty)]]},ie={codeState:ne,mapState:re},ce=Object(g.b)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;return S["".concat(t.type)]+""!=="undefined"?Object(h.a)({},e,{mapState:V(e.mapState,t)}):k["".concat(t.type)]+""!=="undefined"?Object(h.a)({},e,{codeState:U(e.codeState,t)}):E["".concat(t.type)]+""!=="undefined"?K(e,t):e},ie),oe="\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0432\u043e \u0432\u0440\u0435\u043c\u044f \u0434\u0432\u0438\u0436\u0435\u043d\u0438\u044f, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043e\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0442\u0430\u043d\u043a (\u0441\u0434\u0435\u043b\u0430\u0442\u044c \u043f\u0430\u0443\u0437\u0443)",le="\u0422\u0430\u043d\u043a \u0432\u044b\u0435\u0445\u0430\u043b \u0437\u0430 \u0433\u0440\u0430\u043d\u0438\u0446\u0443",ue="\u0422\u0430\u043d\u043a \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u043f\u0440\u043e\u0435\u0445\u0430\u0442\u044c \u043f\u043e \u0433\u043e\u0440\u0430\u043c",se="\u0422\u0430\u043d\u043a \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u043f\u0440\u043e\u0435\u0445\u0430\u0442\u044c \u043f\u043e \u043b\u0435\u0441\u0430\u043c",de="\u0422\u0430\u043d\u043a \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u043f\u0440\u043e\u0435\u0445\u0430\u0442\u044c \u043f\u043e \u043c\u0438\u0448\u0435\u043d\u044f\u043c",me="\u0422\u0430\u043d\u043a \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u043f\u0440\u043e\u0435\u0445\u0430\u0442\u044c \u043f\u043e \u044d\u0442\u043e\u0439 \u043a\u043b\u0435\u0442\u043a\u0435",he='\u041a\u043e\u043c\u0430\u043d\u0434\u0443 "\u0417\u0430\u0440\u044f\u0436\u0430\u0439 1" \u043c\u043e\u0436\u043d\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0435\u0441\u043b\u0438 \u043e\u0440\u0443\u0434\u0438\u0435 \u043d\u0435 \u0437\u0430\u0440\u044f\u0436\u0435\u043d\u043e',ge='\u041a\u043e\u043c\u0430\u043d\u0434\u0443 "\u0417\u0430\u0440\u044f\u0436\u0430\u0439 2" \u043c\u043e\u0436\u043d\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0435\u0441\u043b\u0438 \u0443\u0436\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u0430 "\u0417\u0430\u0440\u044f\u0436\u0430\u0439 1"',pe=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return u.a.createElement("div",null,u.a.createElement(m.a,{store:ce},u.a.createElement(be,null)),u.a.createElement(we,null))}}]),t}(l.Component),ve=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(r.a)(t,[{key:"handlePlay",value:function(){}},{key:"nextMove",value:function(e){var t=ce.getState(),a=t.mapState,n=a.tank,r=a.map,i=a.mapWidth,c=a.mapHeight,o=t.codeState.rows,l=e;if(l>=o.length-1)return!1;var u=o[l],s=u.gunner,d=u.driver,m=u.charger;if(null!==s){var h=s.tag;switch(h){case Q.gunner.North:case Q.gunner.NorthEast:case Q.gunner.East:case Q.gunner.SouthEast:case Q.gunner.South:case Q.gunner.SouthWest:case Q.gunner.West:case Q.gunner.NorthWest:this.props.rotateTurret(h);break;case Q.gunner.Fire:this.props.fire()}}if(null!==d){var g=d.tag;switch(g){case Q.driver.North:case Q.driver.NorthEast:case Q.driver.East:case Q.driver.SouthEast:case Q.driver.South:case Q.driver.SouthWest:case Q.driver.West:case Q.driver.NorthWest:this.props.rotateTank(g);break;case Q.driver.MoveForward:case Q.driver.MoveBackward:if(l>0&&null!==o[l-1].driver&&(g===Q.driver.MoveForward&&o[l-1].driver.tag===Q.driver.MoveBackward||g===Q.driver.MoveBackward&&o[l-1].driver.tag===Q.driver.MoveForward))return alert(oe+"\n\u041e\u0448\u0438\u0431\u043a\u0430 \u0432 \u0441\u0442\u0440\u043e\u043a\u0435 (".concat(e+1,")")),!1;g===Q.driver.MoveForward?this.props.moveTankForward():this.props.moveTankBackward();var p=this.props.tank,v=p.X,f=p.Y;if(v<0||v>=i||f<0||f>=c)return alert(le+"\n\u041e\u0448\u0438\u0431\u043a\u0430 \u0432 \u0441\u0442\u0440\u043e\u043a\u0435 (".concat(e+1,")")),!1;if(r[f][v].length>0){var b=me;switch(r[f][v][0].tile){case Z.swamp:b=se;break;case Z.mountains:b=ue;break;case Z._3hp:case Z._2hp:case Z._1hp:b=de}return alert(b+"\n\u041e\u0448\u0438\u0431\u043a\u0430 \u0432 \u0441\u0442\u0440\u043e\u043a\u0435 (".concat(e+1,")")),!1}break;case Q.driver.TurnLeftAndMoveForward:case Q.driver.TurnRightAndMoveForward:if(l>0&&null!==o[l-1].driver&&o[l-1].driver.tag===Q.driver.MoveBackward)return alert(oe+"\n\u041e\u0448\u0438\u0431\u043a\u0430 \u0432 \u0441\u0442\u0440\u043e\u043a\u0435 (".concat(e+1,")")),!1;g===Q.driver.TurnLeftAndMoveForward?this.props.moveTankRotateLeftAndForward():this.props.moveTankRotateRightAndForward();var S=this.props.tank,k=S.X,E=S.Y;if(k<0||k>=i||E<0||E>=c)return alert(le+"\n\u041e\u0448\u0438\u0431\u043a\u0430 \u0432 \u0441\u0442\u0440\u043e\u043a\u0435 (".concat(e+1,")")),!1;if(r[E][k].length>0){var O=me;switch(r[E][k][0].tile){case Z.swamp:O=se;break;case Z.mountains:O=ue;break;case Z._3hp:case Z._2hp:case Z._1hp:O=de}return alert(O+"\n\u041e\u0448\u0438\u0431\u043a\u0430 \u0432 \u0441\u0442\u0440\u043e\u043a\u0435 (".concat(e+1,")")),!1}}}if(null!==m){switch(m.tag){case Q.charger.PartiallyLoaded:if(n.TurretStatus>=1)return alert(he+"\n\u041e\u0448\u0438\u0431\u043a\u0430 \u0432 \u0441\u0442\u0440\u043e\u043a\u0435 (".concat(e+1,")")),!1;case Q.charger.Ready:if(n.TurretStatus>=2)return alert(ge+"\n\u041e\u0448\u0438\u0431\u043a\u0430 \u0432 \u0441\u0442\u0440\u043e\u043a\u0435 (".concat(e+1,")")),!1}this.props.load()}return!0}},{key:"render",value:function(){var e=this;return setTimeout(function(){e.props.isPlay&&(e.nextMove(e.props.currentRow)?e.props.nextMove():e.props.stop())},200),u.a.createElement("div",{className:"flex-row margin-5"},u.a.createElement("div",{className:"flex-column flex-justify-start widthAll"},u.a.createElement("div",{className:"flex-column"},u.a.createElement("span",null,"\u0421\u043a\u043e\u0440\u043e\u0441\u0442\u044c \u0432\u043e\u0441\u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0434\u0435\u043d\u0438\u044f"),u.a.createElement("div",null),u.a.createElement(Oe,null)),u.a.createElement("div",{id:"moveBtnDiv",className:"flex-row"},u.a.createElement("div",{className:"flex-row"},u.a.createElement(fe,{image:"images/menu/startbtn.svg",OnClick:function(){return e.props.start()}}),u.a.createElement(fe,{image:"images/menu/pausebtn.svg",OnClick:function(){return alert("2")}}),u.a.createElement(fe,{image:"images/menu/stopbtn.svg",OnClick:function(){return alert("3")}}),u.a.createElement(fe,{image:"images/menu/skipbtn.svg",OnClick:function(){return alert("4")}}),u.a.createElement(fe,{image:"images/menu/nextstepbtn.svg",OnClick:function(){return alert("5")}})),u.a.createElement("div",{style:{width:50}}," "),u.a.createElement("div",{className:"flex-row"},u.a.createElement(fe,{image:"images/menu/savebtn.svg",OnClick:function(){return alert("6")}}),u.a.createElement(fe,{image:"images/menu/loadbtn.svg",OnClick:function(){return alert("7")}})),u.a.createElement(fe,{image:"",OnClick:function(){return alert("8")}})),u.a.createElement("div",{style:{textAlign:"right"}},u.a.createElement("span",null,"\u0414\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0441\u0442\u0440\u0435\u043b\u044c\u0431\u044b: "),u.a.createElement("span",null,"10")),u.a.createElement("div",{id:"saveBtnDiv"})),u.a.createElement("div",{className:"flex-column flex-justify-evenly"},u.a.createElement(Se,null),u.a.createElement(Ee,null)))}}]),t}(l.Component);function fe(e){return u.a.createElement("button",{onClick:function(){return e.OnClick()}},u.a.createElement("img",{src:e.image,alt:""}))}var be=Object(m.b)(function(e){return{selectedRow:e.codeState.selectedRow,currentRow:e.codeState.currentRow,rows:e.codeState.rows,shellDistance:e.mapState.shellDistance,tank:e.mapState.tank,mapWidth:e.mapState.width,mapHeight:e.mapState.height,map:e.mapState.map,isPlay:e.codeState.isPlay}},function(e){return{rotateTurret:Object(g.a)(M,e),rotateTank:Object(g.a)(_,e),moveTankForward:Object(g.a)(D,e),moveTankBackward:Object(g.a)(A,e),moveTankRotateLeftAndForward:Object(g.a)(C,e),moveTankRotateRightAndForward:Object(g.a)(X,e),load:Object(g.a)(I,e),setCurrRow:Object(g.a)(L,e),start:Object(g.a)(P,e),stop:Object(g.a)(Y,e),nextMove:Object(g.a)(W,e),restart:Object(g.a)(B,e),fire:Object(g.a)(F,e)}})(ve),Se=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).state={isOpen:!1},a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return u.a.createElement("div",null,u.a.createElement("button",{id:"infoButton",className:"flex-row",onClick:function(){return e.setState({isOpen:!0})}},u.a.createElement("span",null,"INFO"),u.a.createElement("img",{src:"../images/menu/infobtn.svg",alt:""})),u.a.createElement(d.a,{isOpen:this.state.isOpen,onRequestClose:function(){return e.setState({isOpen:!1})}},u.a.createElement(ke,{onClick:function(){return e.setState({isOpen:!1})}})))}}]),t}(l.Component);function ke(e){return u.a.createElement("div",null,u.a.createElement("button",{onClick:function(){return e.OnClick}},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),"/*TODO \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e*/")}var Ee=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return u.a.createElement("div",{id:"tankDiv"},u.a.createElement("img",{src:"../images/game/tank.png",alt:""}))}}]),t}(l.Component),Oe=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return u.a.createElement("div",null,"/*TODO \u0441\u043a\u0440\u043e\u043b\u043b \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u0438*/")}}]),t}(l.Component),we=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return u.a.createElement("div",{className:"flex-row flex-align-start "},u.a.createElement("div",{id:"commandsDiv",className:"overflow overflow-y-visible margin-10"},u.a.createElement(m.a,{store:ce},u.a.createElement(ye,null))),u.a.createElement("div",null,u.a.createElement(m.a,{store:ce},u.a.createElement(Ne,null))))}}]),t}(l.Component),Te=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(r.a)(t,[{key:"renderRows",value:function(){for(var e=this,t=[],a=this.props.rows,n=function(n){t.push(u.a.createElement(xe,{selected:e.props.selectedRow==n,index:n,value:a[n],OnRowClick:function(t){return e.props.selectRow(t)},onClickTD_LMB:function(t){return e.props.addPictureInTD(t,n)},onClickTD_RMB:function(t){return e.props.removePictureInTD(t,n)}}))},r=0;r<a.length;r++)n(r);return t}},{key:"render",value:function(){return u.a.createElement("table",{id:"commands"},u.a.createElement("tbody",null,u.a.createElement("tr",null,u.a.createElement("th",null,"#"),u.a.createElement("th",null,"\u041d\u0430\u0432\u043e\u0434\u0447\u0438\u043a"),u.a.createElement("th",null,"\u0412\u043e\u0434\u0438\u0442\u0435\u043b\u044c"),u.a.createElement("th",null,"\u0417\u0430\u0440\u044f\u0436\u0430\u044e\u0449\u0438\u0439")),this.renderRows()))}}]),t}(l.Component),ye=Object(m.b)(H,z)(Te),xe=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return u.a.createElement("tr",{className:this.props.selected?"selectedRow":"",onClick:function(){return e.props.OnRowClick(e.props.index)}},u.a.createElement("td",{style:{width:20}},this.props.index+1),u.a.createElement(Re,{value:this.props.value.gunner,onClickTD_LMB:function(){return e.props.onClickTD_LMB("gunner")},onClickTD_RMB:function(){return e.props.onClickTD_RMB("gunner")}}),u.a.createElement(Re,{value:this.props.value.driver,onClickTD_LMB:function(){return e.props.onClickTD_LMB("driver")},onClickTD_RMB:function(){return e.props.onClickTD_RMB("driver")}}),u.a.createElement(Re,{value:this.props.value.charger,onClickTD_LMB:function(){return e.props.onClickTD_LMB("charger")},onClickTD_RMB:function(){return e.props.onClickTD_RMB("charger")}}))}}]),t}(l.Component);function Re(e){return u.a.createElement("td",{className:"gameTD",onClick:function(){return e.onClickTD_LMB()},onContextMenu:function(t){t.preventDefault(),e.onClickTD_RMB()}},u.a.createElement("div",{className:"flex-column flex-justify-center"},u.a.createElement("div",{style:e.value})))}var je=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(r.a)(t,[{key:"renderButtons",value:function(e){var t=[],a=this.props,n=a.gunnerSelectedIndex,r=a.driverSelectedIndex,i=a.chargerSelectedIndex,c=a.changeSelectedButton;switch(e){case"gunner":for(var o=function(a){t.push(u.a.createElement(_e,{key:"".concat(e," - ").concat(a),index:a,class:e,selected:n===a,onClick:function(){return c(a,e)}}))},l=0;l<J;l++)o(l);break;case"driver":var s=function(a){t.push(u.a.createElement(_e,{key:"".concat(e," - ").concat(a),index:a,class:e,selected:r===a,onClick:function(){return c(a,e)}}))};for(l=0;l<q;l++)s(l);break;case"charger":var d=function(a){t.push(u.a.createElement(_e,{key:"".concat(e," - ").concat(a),index:a,class:e,selected:i===a,onClick:function(){return c(a,e)}}))};for(l=0;l<2;l++)d(l)}return t}},{key:"render",value:function(){return u.a.createElement("div",{className:"flex-row flex-align-start overflow"},u.a.createElement("div",{className:"flex-column"},u.a.createElement("div",{style:{height:20},className:"padding-5"},"\u041d\u0430\u0432\u043e\u0434\u0447\u0438\u043a"),u.a.createElement("div",{className:"gameButtonsColumn flex-row flex-wrap"},this.renderButtons("gunner"))),u.a.createElement("div",{className:"flex-column"},u.a.createElement("div",{style:{height:20},className:"padding-5"},"\u0412\u043e\u0434\u0438\u0442\u0435\u043b\u044c"),u.a.createElement("div",{className:"gameButtonsColumn flex-row flex-wrap"},this.renderButtons("driver"))),u.a.createElement("div",{className:"flex-column"},u.a.createElement("div",{style:{height:20},className:"padding-5"},"\u0417\u0430\u0440\u044f\u0436\u0430\u044e\u0449\u0438\u0439"),u.a.createElement("div",{className:"gameButtonsColumn flex-row flex-wrap"},this.renderButtons("charger"))))}}]),t}(l.Component),Ne=Object(m.b)(H,z)(je);function _e(e){return u.a.createElement("button",{className:e.class+(e.selected?" selected":"")+" margin-1",style:$(e.class,e.index),onClick:e.onClick})}var Me=pe,De=(a(21),function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return u.a.createElement("div",null,u.a.createElement(m.a,{store:ce},u.a.createElement(Xe,null)))}}]),t}(l.Component)),Ae=function(e){function t(e){var a;return Object(n.a)(this,t),a=Object(i.a)(this,Object(c.a)(t).call(this,e)),e.loadMap(""),a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"renderTable",value:function(){for(var e=this.props.tileSize,t=this.props,a=t.map,n=t.mapWidth,r=t.mapHeight,i=(t.reduceHP,[]),c=0;c<r;c++){for(var o=[],l=0;l<n;l++){if(a[c][l].length>0&&(a[c][l][0].tile===Z.littleMountains||a[c][l][0].tile===Z.littleSwamp)&&null!==a[c][l][0].XShift&&null!==a[c][l][0].YShift){for(var s=[[null,null,null],[null,null,null],[null,null,null]],d=0;d<a[c][l].length;d++)s[a[c][l][d].YShift+1][a[c][l][d].XShift+1]=u.a.createElement(Ce,{key:"tile ".concat(c," - ").concat(l,": ").concat(a[c][l][d].YShift+1," - ").concat(a[c][l][d].XShift+1),value:G(a[c][l][d].tile,!0)});for(var m=0;m<9;m++)s[Math.floor(m/3)][m%3]||(s[Math.floor(m/3)][m%3]=u.a.createElement(Ce,{key:"tile ".concat(c," - ").concat(l,": ").concat(Math.floor(m/3)," - ").concat(m%3),value:G(Z.empty,!0)}));for(var h=[],g=0;g<3;g++){for(var p=[],v=0;v<3;v++)p.push(s[g][v]);h.push(u.a.createElement("div",{className:"flex-row"},p))}o.push(u.a.createElement("div",{key:"div ".concat(c," - ").concat(l),className:"mapTile flex-column",style:{height:e,width:e}},h))}else for(var f=0;f<a[c][l].length;f++)o.push(u.a.createElement(Ce,{key:"tile ".concat(c," - ").concat(l),value:G(a[c][l][f].tile)}));if(0===a[c][l].length){var b=G(Z.empty);o.push(u.a.createElement(Ce,{key:"tile ".concat(c," - ").concat(l),value:b}))}}i.push(u.a.createElement("div",{className:"flex-row"},o))}return u.a.createElement("div",{className:"flex-column flex-align-start",style:{position:"relative"}},this.loadTank(),i)}},{key:"loadTank",value:function(){var e=this.props.tileSize,t=this.props.tank;if(!t)return null;var a=Object(h.a)({},G(Z.tankBody),{position:"absolute",zIndex:9998,left:t.X*(e+2),top:t.Y*(e+2),transform:"rotate(".concat(t.TankDirection,"deg)")}),n=Object(h.a)({},G(Z.tankHead),{position:"absolute",zIndex:9999,left:t.X*(e+2),top:t.Y*(e+2),transform:"rotate(".concat(t.TurretDirection,"deg)")});return[u.a.createElement("div",{style:a}),u.a.createElement("div",{style:n})]}},{key:"fileLoad",value:function(e){var t=e.target.files,a=new FileReader,n=this.props.loadMap;a.onload=function(e){n(e.target.result)},a.readAsText(t[0].slice())}},{key:"render",value:function(){var e=this;return u.a.createElement("div",{id:"mapCont",className:"overflow-visible"},u.a.createElement("div",{style:{positon:"sticky",top:0}},u.a.createElement("div",{className:"flex-row"},u.a.createElement("input",{type:"file",onChange:function(t){return e.fileLoad(t)}}),u.a.createElement("button",{style:{width:20},onClick:function(){return e.props.zoomIn()}},"+"),u.a.createElement("button",{style:{width:20},onClick:function(){return e.props.zoomOut()}},"-"),u.a.createElement("div",null,this.props.tileSize," "))),this.renderTable())}}]),t}(l.Component);function Ce(e){var t={backgroundImage:e.value.backgroundImage,backgroundPosition:e.value.backgroundPosition,border:e.value.border,height:e.value.height,width:e.value.width,backgroundSize:e.value.backgroundSize};return u.a.createElement("div",{className:"mapTile",style:t,onClickCapture:function(){return e.onClick()}})}var Xe=Object(m.b)(function(e){return{shellDistance:e.mapState.shellDistance,tank:e.mapState.tank,mapWidth:e.mapState.mapWidth,mapHeight:e.mapState.mapHeight,map:e.mapState.map,tileSize:e.mapState.tileSize}},function(e){return{reduceHP:Object(g.a)(x,e),loadMap:Object(g.a)(R,e),zoomIn:Object(g.a)(j,e),zoomOut:Object(g.a)(N,e)}})(Ae),Ie=De,Le=a(13),Pe=a.n(Le),Ye=(a(42),a(43),function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return u.a.createElement("div",null,u.a.createElement("div",{id:"snavigator"},"\u0422\u0430\u043d\u043a\u043e\u0432\u044b\u0439 \u042d\u043a\u0438\u043f\u0430\u0436"),u.a.createElement("div",{id:"gridMain"},u.a.createElement(Ie,null),u.a.createElement(Me,null)))}}]),t}(l.Component));Pe.a.render(u.a.createElement(Ye,null),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.d7f13cd2.chunk.js.map