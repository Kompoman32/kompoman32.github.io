{"version":3,"sources":["store/actions.js","store/reducers.js","store/stores.js","components/menu.js","components/map.js","index.js"],"names":["actionsCode","CHANGE_SELECTED_BUTTON","ADD_PICTURE_IN_TD","REMOVE_PICTURE_IN_TD","actionsMap","REDUCE_HP","LOAD_MAP","ZOOM","actionsMap_Code","SELECT_ROW","ROTATE_TANK","ROTATE_TURRET","MOVE_TANK","MOVE_TANK_ROTATE_AND_FORWARD","LOAD","START","STOP","PAUSE","RESTART","NEXT_MOVE","FIRE","SAVE_ALG","LOAD_ALG","CHANGE_SPEED","actionsTypes","changeSelectedButton","index","className","type","payload","addPictureInTD","indexRow","removePictureInTD","SelectRow","reduceHP","i","j","loadMap","text","zoomIn","zoomOut","RotateTank","direction","RotateTurret","MoveTankForward","MoveTankBackward","MoveTankRotateLeftAndForward","MoveTankRotateRightAndForward","Load","Start","NextMove","Stop","Pause","Restart","Fire","SaveAlg","LoadAlg","IncreaseSpeed","DecreaseSpeed","codeReducer","state","arguments","length","undefined","initialState_Code","action","_action$payload","Object","objectSpread","gunnerSelectedIndex","driverSelectedIndex","chargerSelectedIndex","rows","slice","_action$payload2","gunner","getGameButtonImage","driver","charger","push","toConsumableArray","_action$payload3","pop","putStateToProps_Code","codeState","selectedRow","currentRow","isPlay","putActionsToProps_Code","dispatch","bindActionCreators","selectRow","saveAlg","loadAlg","mapReducer","initialState_Map","mapArr","map","_action$payload4","tile","tileNames","_3hp","_2hp","_1hp","targetCount","initialMap","xmlDoc","window","DOMParser","parseFromString","ActiveXObject","async","loadXML","world","getElementsByTagName","width","Number","getAttribute","height","shellDistance","tankEl","turretstatus","innerHTML","tank","X","Y","TankDirection","getAngleByDirection","TurretDirection","TurretStatus","units","children","row","c","XShift","YShift","empty","tagName","swamp","mountains","littleMountains","littleSwamp","mapWidth","mapHeight","mapTracers","e","alert","tileSize","getPointByDirection","nextPoint","classT","gameButtons","concat","angle","transformAngle","North","East","South","West","NorthWest","NorthEast","SouthWest","SouthEast","getDirectionByAngle","map_codeReducer","initialState","newAngle","mapState","newAngleBody","newAngleTurret","status","isPause","console","log","_state$mapState","newX","newY","point","tag","offsetX","offsetY","k","obj","littleTrailVert","littleTrailDiag","inverted","trailVert","trailDiag","document","implementation","createDocument","program","createElement","command","elName","appendChild","data","XMLSerializer","serializeToString","file","Blob","navigator","msSaveOrOpenBlob","a","url","URL","createObjectURL","href","download","body","dataset","downloadurl","join","click","setTimeout","removeChild","revokeObjectURL","commands","childNodes","nextSibling","nodeName","speed","tankBody","tankHead","tankStatus_NotLoaded","tankStatus_PartLoaded","tankStatus_Loaded","getmapTile","anotherTileSize","little","store","tS","getState","backgroundImage","backgroundPosition","positionArr","split","Math","floor","backgroundSize","border","gunnerBtnsCount","driverBtnsCount","MoveForward","MoveBackward","TurnLeftAndMoveForward","TurnRightAndMoveForward","TurnLeftAndMoveBackward","TurnRightAndMoveBackward","NotLoaded","PartiallyLoaded","Ready","isNaN","left","createStore","error","Menu","react_default","id","es","WrappedGameTable","WrappedMenuButtons","WrappedGameButtonsTable","Component","MenuButtons","_this","this","props","start","playNext","restart","pause","_this2","nextMove","_this3","handleUntilRow","_this4","stop","_this$props","currRowIndex","currRow","rotateTurret","fire","rotateTank","moveTankForward","moveTankBackward","_this$props$tank","msg","moveTankRotateLeftAndForward","moveTankRotateRightAndForward","_this$props$tank2","load","_this5","menu_InfoButton","WrappedTankInfo","SpeedRange","onIncreaseClick","increaseSpeed","onDecreaseClick","decreaseSpeed","MenuButton","image","onClick","handlePlay","handlePause","handleStop","handleNextStep","style","textAlign","src","alt","padding","background","connect","InfoButton","_this6","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","isOpen","setState","_this7","lib_default","onRequestClose","Info","handleClick","TankInfo","valueBody","position","zIndex","top","transform","valueHead","valueStatus","loadTank","margin","GameTable","_this8","arr","_loop","menu_GameTableRow","selected","current","value","OnRowClick","o","onClickTD_LMB","onClickTD_RMB","evt","files","target","reader","FileReader","onload","result","readAsText","_this9","handleSaveAlg","onChange","fileLoad","renderRows","GameTableRow","_this10","GameTableCell","onContextMenu","preventDefault","GameButtonsTable","_this$props2","_loop2","GameButton","key","class","_loop3","_loop4","renderButtons","Map","WrappedMapTable","MapTable","elements","combinedTile","MapTile","combinedDiv","combinedRow","t","loadTrails","event","renderTable","onClickCapture","Game","display","flexDirection","components_map","menu","ReactDOM","render","src_Game","getElementById"],"mappings":"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","file":"static/js/main.2cc4cc33.chunk.js","sourcesContent":["import {initialState_Map, tileNames} from './stores'\r\nimport {getAngleByDirection} from './stores'\r\n\r\nexport const actionsCode={\r\n    CHANGE_SELECTED_BUTTON: \"CHANGE_SELECTED_BUTTON\",\r\n    ADD_PICTURE_IN_TD: \"ADD_PICTURE_IN_TD\",\r\n    REMOVE_PICTURE_IN_TD: \"REMOVE_PICTURE_IN_TD\",\r\n\r\n};\r\nexport const actionsMap={\r\n    REDUCE_HP: \"REDUCE_HP\",\r\n    LOAD_MAP: \"LOAD_MAP\",\r\n    ZOOM: \"ZOOM\",\r\n};\r\nexport const actionsMap_Code={\r\n    SELECT_ROW: \"SELECT_ROW\",\r\n    ROTATE_TANK: \"ROTATE_TANK\",\r\n    ROTATE_TURRET: \"ROTATE_TURRET\",\r\n    MOVE_TANK: \"MOVE_TANK\",\r\n    MOVE_TANK_ROTATE_AND_FORWARD: \"MOVE_TANK_ROTATE_AND_FORWARD\",\r\n    LOAD: \"LOAD\",\r\n    START: \"START\",\r\n    STOP: \"STOP\",\r\n    PAUSE: \"PAUSE\",\r\n    RESTART: \"RESTART\",\r\n    NEXT_MOVE: \"NEXT_MOVE\",\r\n    FIRE: \"FIRE\",\r\n    SAVE_ALG: \"SAVE_ALG\",\r\n    LOAD_ALG: \"LOAD_ALG\",\r\n    CHANGE_SPEED: \"CHANGE_SPEED\",\r\n};\r\nexport const actionsTypes ={\r\n    MAP: actionsMap,\r\n    CODE: actionsCode,\r\n    MAP_CODE: actionsMap_Code\r\n};\r\n\r\n\r\n//----------------------------------------------\r\n\r\nexport const changeSelectedButton = (index, className) =>{\r\n    return{\r\n        type: actionsCode.CHANGE_SELECTED_BUTTON,\r\n        payload: {\r\n            index: index,\r\n            className: className\r\n        }\r\n    }\r\n};\r\nexport const addPictureInTD = (className , indexRow) => {\r\n    return{\r\n        type: actionsCode.ADD_PICTURE_IN_TD,\r\n        payload: {\r\n            className: className,\r\n            indexRow: indexRow\r\n        }\r\n    };\r\n};\r\nexport const removePictureInTD = (className , indexRow) => {\r\n    return{\r\n        type: actionsCode.REMOVE_PICTURE_IN_TD,\r\n        payload: {\r\n            className: className,\r\n            indexRow: indexRow\r\n        }\r\n    };\r\n};\r\nexport const SelectRow = (index) => {\r\n    return{\r\n        type: actionsMap_Code.SELECT_ROW,\r\n        payload: index\r\n    };\r\n};\r\n\r\n//-------------------------------------------------\r\n\r\nexport const reduceHP = (i, j) => {\r\n    return {\r\n        type: actionsMap.REDUCE_HP,\r\n        payload: {\r\n            i:i,\r\n            j:j\r\n        }\r\n    }\r\n};\r\nexport const loadMap = (text) => {\r\n    return {\r\n        type: actionsMap.LOAD_MAP,\r\n        payload: text\r\n    }\r\n};\r\nexport const zoomIn = () =>{\r\n    return {\r\n        type: actionsMap.ZOOM,\r\n        payload: 20\r\n    }\r\n};\r\nexport const zoomOut = () =>{\r\n    return {\r\n        type: actionsMap.ZOOM,\r\n        payload: -20\r\n    }\r\n};\r\n\r\n//----------------------------------------------\r\n\r\nexport const RotateTank = (direction) => {\r\n    return {\r\n        type: actionsMap_Code.ROTATE_TANK,\r\n        payload: direction\r\n    }\r\n};\r\nexport const RotateTurret = (direction) => {\r\n    return {\r\n        type: actionsMap_Code.ROTATE_TURRET,\r\n        payload: direction\r\n    }\r\n};\r\nexport const MoveTankForward = () => {\r\n    return {\r\n        type: actionsMap_Code.MOVE_TANK,\r\n        payload: true\r\n    }\r\n};\r\nexport const MoveTankBackward = () => {\r\n    return {\r\n        type: actionsMap_Code.MOVE_TANK,\r\n        payload: false\r\n    }\r\n};\r\nexport const MoveTankRotateLeftAndForward = () => {\r\n    return {\r\n        type: actionsMap_Code.MOVE_TANK_ROTATE_AND_FORWARD,\r\n        payload: true\r\n    }\r\n};\r\nexport const MoveTankRotateRightAndForward = () => {\r\n    return {\r\n        type: actionsMap_Code.MOVE_TANK_ROTATE_AND_FORWARD,\r\n        payload: false\r\n    }\r\n};\r\nexport const Load = () => {\r\n    return {\r\n        type: actionsMap_Code.LOAD,\r\n    }\r\n};\r\nexport const Start = () => {\r\n    return {\r\n        type: actionsMap_Code.START,\r\n    }\r\n};\r\nexport const NextMove = () => {\r\n    return {\r\n        type: actionsMap_Code.NEXT_MOVE,\r\n    }\r\n};\r\nexport const Stop = () => {\r\n    return {\r\n        type: actionsMap_Code.STOP,\r\n    }\r\n};\r\nexport const Pause = () => {\r\n    return {\r\n        type: actionsMap_Code.PAUSE,\r\n    }\r\n};\r\nexport const Restart = () => {\r\n    return {\r\n        type: actionsMap_Code.RESTART,\r\n        payload: \"\"\r\n    }\r\n};\r\nexport const Fire = () => {\r\n    return {\r\n        type: actionsMap_Code.FIRE,\r\n    }\r\n};\r\nexport const SaveAlg = () => {\r\n    return {\r\n        type: actionsMap_Code.SAVE_ALG,\r\n    }\r\n};\r\nexport const LoadAlg = (text) => {\r\n    return {\r\n        type: actionsMap_Code.LOAD_ALG,\r\n        payload: text,\r\n    }\r\n};\r\nexport const IncreaseSpeed = () => {\r\n    return {\r\n        type: actionsMap_Code.CHANGE_SPEED,\r\n        payload: true\r\n    }\r\n};\r\nexport const DecreaseSpeed = () => {\r\n    return {\r\n        type: actionsMap_Code.CHANGE_SPEED,\r\n        payload: false\r\n    }\r\n};\r\n\r\n","import {bindActionCreators} from 'redux'\r\nimport {getGameButtonImage,\r\n        tileNames,getmapTile,\r\n        initialState, initialState_Map, initialState_Code} from \"./stores.js\";\r\nimport {actionsTypes, actionsCode, actionsMap_Code, actionsMap ,\r\n        reduceHP, loadMap, zoomIn , zoomOut,\r\n        RotateTank, RotateTurret,Load, Start, Stop, NextMove, Restart, Fire, Pause,SaveAlg, LoadAlg,\r\n        IncreaseSpeed, DecreaseSpeed,\r\n        MoveTankForward, MoveTankBackward, MoveTankRotateLeftAndForward,\r\n        MoveTankRotateRightAndForward,\r\n        addPictureInTD, changeSelectedButton, removePictureInTD, SelectRow,} from \"./actions.js\";\r\nimport {gameButtons, getAngleByDirection, getDirectionByAngle, transformAngle} from \"./stores\";\r\n\r\n\r\nexport const rootReducer = (state = initialState, action) =>{\r\n    if (actionsTypes.MAP[`${action.type}`] +\"\" !== \"undefined\")\r\n        return {...state, mapState: mapReducer(state.mapState, action)};\r\n\r\n    if (actionsTypes.CODE[`${action.type}`]+\"\" !== \"undefined\")\r\n        return {...state, codeState: codeReducer(state.codeState, action)};\r\n\r\n    if (actionsTypes.MAP_CODE[`${action.type}`]+\"\" !== \"undefined\")\r\n        return map_codeReducer(state, action);\r\n    return state;\r\n};\r\n\r\n//-----------------------------------------------------------\r\n\r\nexport const codeReducer = (state = initialState_Code , action) => {\r\n    switch (action.type) {\r\n        case actionsCode.CHANGE_SELECTED_BUTTON:\r\n        {\r\n            const {index, className} = action.payload;\r\n\r\n            if (className === \"gunner\") {\r\n                return {\r\n                    ...state,\r\n                    gunnerSelectedIndex: index,\r\n                }\r\n            }\r\n            if (className === \"driver\") {\r\n                return {\r\n                    ...state,\r\n                    driverSelectedIndex: index,\r\n                }\r\n            }\r\n            if (className === \"charger\") {\r\n                return {\r\n                    ...state,\r\n                    chargerSelectedIndex: index,\r\n                }\r\n            }\r\n            return state;\r\n        }\r\n        case actionsCode.ADD_PICTURE_IN_TD:\r\n        {\r\n            const rows = state.rows.slice();\r\n            const { indexRow, className } = action.payload;\r\n\r\n            rows[indexRow]={\r\n                gunner: className === \"gunner\" ? getGameButtonImage(\"gunner\", state.gunnerSelectedIndex ) : rows[indexRow].gunner,\r\n                driver: className === \"driver\" ? getGameButtonImage(\"driver\", state.driverSelectedIndex ) : rows[indexRow].driver,\r\n                charger: className === \"charger\" ? getGameButtonImage(\"charger\", state.chargerSelectedIndex ) : rows[indexRow].charger\r\n            };\r\n\r\n            while (\r\n                rows[rows.length-1].gunner != null ||\r\n                rows[rows.length-1].driver != null ||\r\n                rows[rows.length-1].charger != null)\r\n            {\r\n                rows.push(\r\n                    {\r\n                        gunner: null,\r\n                        driver: null,\r\n                        charger: null\r\n                    });\r\n            }\r\n\r\n\r\n            return {...state, rows: rows}\r\n        }\r\n        case actionsCode.REMOVE_PICTURE_IN_TD:\r\n        {\r\n            let rows = [...state.rows];\r\n            const { indexRow, className } = action.payload;\r\n\r\n            // console.log(state);\r\n            // console.log(rows.length);\r\n            // console.log(JSON.stringify(rows ));\r\n\r\n            rows[indexRow] = {\r\n                gunner: className === \"gunner\" ? null : rows[indexRow].gunner,\r\n                driver: className === \"driver\" ? null : rows[indexRow].driver,\r\n                charger: className === \"charger\" ? null : rows[indexRow].charger\r\n            };\r\n\r\n            // console.log(rows);\r\n\r\n            while (\r\n                rows.length > 0 &&\r\n                rows[rows.length-1].gunner == null &&\r\n                rows[rows.length-1].driver == null &&\r\n                rows[rows.length-1].charger == null)\r\n            {\r\n                rows.pop();\r\n            }\r\n            rows.push(\r\n                {\r\n                    gunner: null,\r\n                    driver: null,\r\n                    charger: null\r\n                });\r\n\r\n            return {...state, rows: rows}\r\n        }\r\n    }\r\n    return state\r\n};\r\n\r\nexport const putStateToProps_Code = (state) =>{\r\n\r\n    return {\r\n        gunnerSelectedIndex: state.codeState.gunnerSelectedIndex,\r\n        driverSelectedIndex: state.codeState.driverSelectedIndex,\r\n        chargerSelectedIndex: state.codeState.chargerSelectedIndex,\r\n        selectedRow: state.codeState.selectedRow,\r\n        currentRow: state.codeState.currentRow,\r\n        rows: state.codeState.rows,\r\n        isPlay: state.codeState.isPlay\r\n    }\r\n};\r\nexport const putActionsToProps_Code = (dispatch) => {\r\n    return {\r\n        changeSelectedButton: bindActionCreators(changeSelectedButton, dispatch),\r\n        addPictureInTD: bindActionCreators(addPictureInTD, dispatch),\r\n        removePictureInTD: bindActionCreators(removePictureInTD, dispatch),\r\n        selectRow: bindActionCreators(SelectRow, dispatch),\r\n        saveAlg: bindActionCreators(SaveAlg, dispatch),\r\n        loadAlg: bindActionCreators(LoadAlg, dispatch),\r\n    }\r\n};\r\n\r\n//-----------------------------------------------------------\r\n\r\nexport const mapReducer = (state = initialState_Map, action) => {\r\n    switch (action.type) {\r\n        case actionsMap.REDUCE_HP: {\r\n            let mapArr = state.map.slice();\r\n            let {i,j} = action.payload;\r\n            let img = mapArr[j][i][0];\r\n\r\n            switch (img.tile) {\r\n                case tileNames._3hp:\r\n                    mapArr[j][i][0] = {tile: tileNames._2hp };\r\n                    return {...state, map: mapArr};\r\n\r\n                case tileNames._2hp:\r\n                    mapArr[j][i][0] = {tile: tileNames._1hp };\r\n                    return {...state, map: mapArr};\r\n\r\n                case tileNames._1hp:\r\n                    mapArr[j][i] = [];\r\n                    return {...state, map: mapArr, targetCount: state.targetCount - 1 };\r\n            }\r\n            return state\r\n        }\r\n        case actionsMap.LOAD_MAP:{\r\n            const text = action.payload === \"\"? state.initialMap : action.payload;\r\n\r\n            let xmlDoc = null;\r\n\r\n            try {\r\n                if (window.DOMParser) {\r\n                    // code for modern browsers\r\n                    const parser = new DOMParser();\r\n                    xmlDoc = parser.parseFromString(text,\"text/xml\");\r\n                }\r\n                else {\r\n                    // code for old IE browsers\r\n                    // eslint-disable-next-line\r\n                    xmlDoc = new ActiveXObject(\"Microsoft.XMLDOM\");\r\n                    xmlDoc.async = false;\r\n                    xmlDoc.loadXML(text);\r\n                }\r\n\r\n                let targetCount = 0;\r\n\r\n                const world = xmlDoc.getElementsByTagName('World')[0];\r\n                const width = Number(world.getAttribute('Width'));\r\n                const height = Number(world.getAttribute('Height'));\r\n                const shellDistance = Number(world.getAttribute('ShellDistance'));\r\n\r\n                const tankEl = world.getElementsByTagName('Tank')[0];\r\n                let turretstatus = 0;\r\n                switch (tankEl.getElementsByTagName('TurretStatus')[0].innerHTML) {\r\n                    case \"PartiallyLoaded\":\r\n                        turretstatus = 1;\r\n                        break;\r\n                    case \"Ready\":\r\n                        turretstatus = 2;\r\n                        break;\r\n                }\r\n\r\n\r\n                const tank = {\r\n                    X: Number(tankEl.getAttribute('X')),\r\n                    Y: Number(tankEl.getAttribute('Y')),\r\n                    TankDirection: getAngleByDirection(tankEl.getElementsByTagName('TankDirection')[0].innerHTML),\r\n                    TurretDirection: getAngleByDirection(tankEl.getElementsByTagName('TurretDirection')[0].innerHTML),\r\n                    TurretStatus: turretstatus,\r\n                };\r\n                const units = world.getElementsByTagName('Units')[0].children;\r\n\r\n                let map = [];\r\n                for (let i = 0 ; i < height; i++){\r\n                    let row = [];\r\n                    for (let j = 0 ; j < width; j++) {\r\n                        row.push([]);\r\n                    }\r\n                    map.push(row)\r\n                }\r\n\r\n\r\n                for(let c = 0 ; c < units.length; c++){\r\n                    const X = Number(units[c].getAttribute('X'));\r\n                    const Y = Number(units[c].getAttribute('Y'));\r\n                    let XShift = units[c].getAttribute('XShift');\r\n                    if (XShift)\r\n                        XShift = Number(units[c].getAttribute('XShift'));\r\n                    let YShift = units[c].getAttribute('YShift');\r\n                    if (YShift)\r\n                        YShift = Number(units[c].getAttribute('YShift'));\r\n\r\n                    let tile = tileNames.empty;\r\n                    switch (units[c].tagName) {\r\n                        case \"Swamp\":{\r\n                            tile = (tileNames.swamp);\r\n                            break;\r\n                        }\r\n                        case \"Rock\":{\r\n                            tile = (tileNames.mountains);\r\n                            break;\r\n                        }\r\n                        case \"LittleRock\":{\r\n                            tile = (tileNames.littleMountains);\r\n                            break;\r\n                        }\r\n                        case \"LittleSwamp\":{\r\n                            tile = (tileNames.littleSwamp);\r\n                            break;\r\n                        }\r\n                        case \"LittlePillbox\":{\r\n                            targetCount+=1;\r\n                            tile = (tileNames._1hp);\r\n                            break;\r\n                        }\r\n                        case \"MediumPillbox\":{\r\n                            targetCount+=1;\r\n                            tile = (tileNames._2hp);\r\n                            break;\r\n                        }\r\n                        case \"BigPillbox\":{\r\n                            targetCount+=1;\r\n                            tile = (tileNames._3hp);\r\n                            break;\r\n                        }\r\n                    }\r\n                    map[Y][X].push({ XShift: XShift, YShift: YShift, tile: tile});\r\n                }\r\n                return {...state,\r\n                        shellDistance: shellDistance,\r\n                        tank: tank,\r\n                        mapWidth: width,\r\n                        mapHeight: height,\r\n                        map: map,\r\n                        mapTracers:[],\r\n                        initialMap: text,\r\n                        targetCount: targetCount\r\n                }\r\n            }\r\n            catch (e) {\r\n                alert('Ошибка файл карты неправильно сформирован');\r\n            }\r\n            break;\r\n        }\r\n        case actionsMap.ZOOM:{\r\n            let {tileSize} = state;\r\n            tileSize += action.payload;\r\n            if (tileSize < 20)\r\n                {tileSize = 20;}\r\n            if (tileSize > 80)\r\n                {tileSize = 80;}\r\n            return {...state, tileSize: tileSize};\r\n        }\r\n    }\r\n    return state\r\n};\r\n\r\nexport const putStateToProps_Map = (state) =>{\r\n    return {\r\n        shellDistance: state.mapState.shellDistance,\r\n        tank: state.mapState.tank,\r\n        mapWidth: state.mapState.mapWidth,\r\n        mapHeight: state.mapState.mapHeight,\r\n        map: state.mapState.map,\r\n        mapTracers: state.mapState.mapTracers,\r\n        tileSize: state.mapState.tileSize,\r\n    }\r\n};\r\nexport const putActionsToProps_Map = (dispatch) => {\r\n    return {\r\n        reduceHP: bindActionCreators(reduceHP, dispatch),\r\n        loadMap: bindActionCreators(loadMap, dispatch),\r\n        zoomIn: bindActionCreators(zoomIn, dispatch),\r\n        zoomOut: bindActionCreators(zoomOut, dispatch)\r\n    }\r\n};\r\n\r\n//-----------------------------------------------------------\r\n\r\nconst getPointByDirection = (className, direction) =>{\r\n    let nextPoint= [0,0];\r\n\r\n    const classT = gameButtons[`${className}`];\r\n\r\n    switch (getDirectionByAngle(className, direction)) {\r\n        case classT.North:\r\n            nextPoint = [0, -1];\r\n            break;\r\n        case classT.NorthEast:\r\n            nextPoint = [1, -1];\r\n            break;\r\n        case classT.East:\r\n            nextPoint = [1, 0];\r\n            break;\r\n        case classT.SouthEast:\r\n            nextPoint = [1, 1];\r\n            break;\r\n        case classT.South:\r\n            nextPoint = [0, 1];\r\n            break;\r\n        case classT.SouthWest:\r\n            nextPoint = [-1, 1];\r\n            break;\r\n        case classT.West:\r\n            nextPoint = [-1, 0];\r\n            break;\r\n        case classT.NorthWest:\r\n            nextPoint = [-1, -1];\r\n            break;\r\n    }\r\n    return nextPoint;\r\n}\r\n\r\n// function getXMLTag(className, tag ) {\r\n//     switch (className) {\r\n//         case \"gunner\":\r\n//             switch (tag) {\r\n//                 case gameButtons.gunner.North:\r\n//                     return \"PauseGunner\";\r\n//                 case gameButtons.gunner.NorthEast:\r\n//                     return \"TurnTurretClockwise45\";\r\n//                 case gameButtons.gunner.East:\r\n//                     return \"TurnTurretClockwise90\";\r\n//                 case gameButtons.gunner.SouthEast:\r\n//                     return \"TurnTurretClockwise135\";\r\n//                 case gameButtons.gunner.South:\r\n//                     return \"TurnTurretAround\";\r\n//                 case gameButtons.gunner.SouthWest:\r\n//                     return \"TurnTurretCounterClockwise135\";\r\n//                 case gameButtons.gunner.West:\r\n//                     return \"TurnTurretCounterClockwise90\";\r\n//                 case gameButtons.gunner.NorthWest:\r\n//                     return \"TurnTurretCounterClockwise45\";\r\n//                 case gameButtons.gunner.Fire:\r\n//                     return \"FireCommand\";\r\n//                 case gameButtons.gunner.Pause:\r\n//                     return \"PauseGunner\"\r\n//             }\r\n//             break;\r\n//         case \"driver\":\r\n//             break;\r\n//         case \"charger\":\r\n//             break;\r\n//         default:\r\n//     }\r\n//     return \"\"\r\n// }\r\n\r\nexport const map_codeReducer = (state = initialState, action) =>{\r\n    switch (action.type) {\r\n        case actionsMap_Code.SELECT_ROW:\r\n        {\r\n            return {...state, codeState:{...state.codeState, selectedRow: action.payload }}\r\n        }\r\n        case actionsMap_Code.ROTATE_TURRET:\r\n        {\r\n            const newAngle = transformAngle(getAngleByDirection(action.payload)\r\n                                + state.mapState.tank.TurretDirection);\r\n            if (state.mapState.tank)\r\n                return {...state, mapState:{...state.mapState,\r\n                        tank: {...state.mapState.tank,\r\n                            TurretDirection: newAngle }}};\r\n            break;\r\n        }\r\n        case actionsMap_Code.ROTATE_TANK:\r\n        {\r\n            const newAngleBody = transformAngle(getAngleByDirection(action.payload)\r\n                                    + state.mapState.tank.TankDirection);\r\n            const newAngleTurret = transformAngle(getAngleByDirection(action.payload)\r\n                                    + state.mapState.tank.TurretDirection);\r\n            if (state.mapState.tank)\r\n                return {...state, mapState:{...state.mapState,\r\n                        tank: {...state.mapState.tank,\r\n                            TankDirection: newAngleBody,\r\n                            TurretDirection: newAngleTurret}}};\r\n            break;\r\n        }\r\n        case actionsMap_Code.MOVE_TANK:\r\n        {\r\n            const {tank} = state.mapState;\r\n\r\n            if (tank) {\r\n                let nextPoint = getPointByDirection(\"driver\",tank.TankDirection);\r\n\r\n                if (!action.payload) {\r\n                    nextPoint[0] = nextPoint[0] * -1;\r\n                    nextPoint[1] = nextPoint[1] * -1;\r\n                }\r\n\r\n\r\n                return {\r\n                    ...state, mapState: {\r\n                        ...state.mapState,\r\n                        tank: {\r\n                            ...state.mapState.tank,\r\n                            X: tank.X + nextPoint[0], Y: tank.Y + nextPoint[1]\r\n                        }\r\n                    }\r\n                };\r\n            }\r\n            break;\r\n        }\r\n        case actionsMap_Code.MOVE_TANK_ROTATE_AND_FORWARD:\r\n        {\r\n            const {tank} = state.mapState;\r\n\r\n            if (tank) {\r\n\r\n                const newAngleBody = transformAngle( tank.TankDirection + (action.payload? -45 : 45 ));\r\n                const newAngleTurret = transformAngle( tank.TurretDirection + (action.payload? -45 : 45 ));\r\n\r\n                let nextPoint = getPointByDirection(\"driver\",newAngleBody);\r\n\r\n                return {\r\n                    ...state, mapState: {\r\n                        ...state.mapState,\r\n                        tank: {\r\n                            ...state.mapState.tank,\r\n                            X: tank.X + nextPoint[0], Y: tank.Y +  nextPoint[1],\r\n                            TankDirection: newAngleBody, TurretDirection: newAngleTurret\r\n                        }\r\n                    }\r\n                };\r\n            }\r\n            break;\r\n        }\r\n        case actionsMap_Code.LOAD:\r\n        {\r\n            if (state.mapState.tank) {\r\n                let status = state.mapState.tank.TurretStatus + 1;\r\n                if (status === 3){\r\n                    status = 0;\r\n                }\r\n                return {\r\n                    ...state, mapState: {\r\n                        ...state.mapState,\r\n                        tank: {\r\n                            ...state.mapState.tank,\r\n                            TurretStatus: status\r\n                        }\r\n                    }\r\n                };\r\n            }\r\n            break;\r\n        }\r\n        case actionsMap_Code.START:\r\n        {\r\n            const mapState = !state.codeState.isPause\r\n                ?  mapReducer(state.mapState,\r\n                {type: actionsMap.LOAD_MAP, payload:\"\"})\r\n                :{} ;\r\n\r\n            return {\r\n                ...state, codeState: {\r\n                    ...state.codeState,\r\n                    isPlay: true,\r\n                    currentRow: state.codeState.isPause? state.codeState.currentRow: 0,\r\n                    // isPause: false\r\n                }, mapState: { ...state.mapState,\r\n                    ...mapState}\r\n            };\r\n        }\r\n        case actionsMap_Code.STOP:\r\n        {\r\n            if(state.mapState.targetCount <= 0)\r\n                alert(`Все цели уничтожены. Поздравляю!!\\nБыло задействовано ${state.codeState.rows.length-1} строк`);\r\n            else\r\n                alert('Не все цели уничтожены :((');\r\n\r\n            return {\r\n                ...state, codeState: {\r\n                    ...state.codeState, isPlay: false, isPause: false\r\n                }\r\n            };\r\n        }\r\n        case actionsMap_Code.PAUSE:\r\n        {\r\n            return {\r\n                ...state, codeState: {\r\n                    ...state.codeState, isPlay: false, isPause: true\r\n                }\r\n            };\r\n        }\r\n        case actionsMap_Code.RESTART:\r\n        {\r\n            return {\r\n                ...state,\r\n                mapState: {\r\n                    ...state.mapState, ...mapReducer(\r\n                        state.mapState,\r\n                        {type: actionsMap.LOAD_MAP, payload:\"\"}\r\n                    )\r\n                },\r\n                codeState: {\r\n                    ...state.codeState, isPlay: false, currentRow:0\r\n                }\r\n            };\r\n        }\r\n        case actionsMap_Code.NEXT_MOVE:\r\n        {\r\n            if (state.codeState.isPlay) {\r\n                const index = state.codeState.currentRow + 1;\r\n                return {\r\n                    ...state, codeState: {\r\n                        ...state.codeState, currentRow: index\r\n                    }\r\n                };\r\n            }\r\n            break;\r\n        }\r\n        case actionsMap_Code.FIRE:\r\n        {\r\n            if (state.mapState.tank) {\r\n                console.log(`FIRE from ${state.mapState.tank.X}-${state.mapState.tank.Y}`);\r\n\r\n                const {map, tank, shellDistance} = state.mapState;\r\n                const {X, Y} = tank;\r\n\r\n                let newX = X;\r\n                let newY = Y;\r\n\r\n                const point = getPointByDirection(\"gunner\", tank.TurretDirection);\r\n\r\n                for (let i= 0;  i < shellDistance; i++){\r\n                    newX += point[0];\r\n                    newY += point[1];\r\n\r\n                    if (newX >= state.mapState.mapWidth\r\n                        || newX < 0\r\n                        || newY >= state.mapState.mapHeight\r\n                        || newY < 0)\r\n                        break;\r\n\r\n                    if (map[newY][newX].length > 0 ){\r\n                        const tag = map[newY][newX][0].tile;\r\n                        if (tag === tileNames.mountains){\r\n                            break;\r\n                        }\r\n                        if (tag === tileNames._3hp\r\n                            || tag === tileNames._2hp\r\n                            || tag === tileNames._1hp){\r\n                            state = {...state, mapState:{...state.mapState,\r\n                                                        ...mapReducer(state.mapState,reduceHP(newX, newY))}};\r\n                            break;\r\n                        }\r\n                        else{\r\n                            let offsetX = point[0] * -1;\r\n                            let offsetY = point[1] * -1;\r\n                            let j;\r\n                            for (j =0; j < 3; j++ ){\r\n                                let k = 0;\r\n                                for (k=0; k < map[newY][newX].length; k++ ){\r\n                                    const obj = map[newY][newX][k];\r\n                                    if (offsetX === obj.XShift\r\n                                        && offsetY === obj.YShift\r\n                                        && obj.tile === tileNames.littleMountains){\r\n                                        break;\r\n                                    }\r\n                                }\r\n                                if (k !== map[newY][newX].length){\r\n                                    break;\r\n                                }\r\n                                offsetX += point[0];\r\n                                offsetY += point[1];\r\n                                state.mapState.mapTracers.push(\r\n                                    {\r\n                                        tag: point[0] * point[1] === 0? tileNames.littleTrailVert\r\n                                                                        : tileNames.littleTrailDiag,\r\n                                        X: newX,\r\n                                        Y: newY,\r\n                                        XShift: offsetX,\r\n                                        YShift: offsetY,\r\n                                        inverted: point[1] === 0 || point[0] * point[1] > 0,\r\n                                    }\r\n                                )\r\n                            }\r\n\r\n                            if (j < 3)\r\n                                break;\r\n                        }\r\n                    }\r\n\r\n                    state.mapState.mapTracers.push(\r\n                        {\r\n                            tag: point[0] * point[1] === 0? tileNames.trailVert: tileNames.trailDiag,\r\n                            X: newX,\r\n                            Y: newY,\r\n                            inverted: point[1] === 0 || point[0] * point[1] > 0,\r\n                        }\r\n                    );\r\n                }\r\n\r\n                return {\r\n                    ...state, mapState: {\r\n                        ...state.mapState, tank: {\r\n                            ...state.mapState.tank,\r\n                            TurretStatus: 0\r\n                        }\r\n                    }\r\n                };\r\n            }\r\n            break;\r\n        }\r\n        case actionsMap_Code.SAVE_ALG:{\r\n            const filename = \"Program.tankcrewprogram\";\r\n            const xmlDoc = document.implementation.createDocument(\"\", \"\", null );\r\n\r\n            const program = xmlDoc.createElement(\"Program\");\r\n\r\n            const rows = state.codeState.rows;\r\n            for (let i = 0; i < rows.length-1; i++){\r\n                const command = xmlDoc.createElement(\"Command\");\r\n                let elName = rows[i].gunner !== null\r\n                    ? rows[i].gunner.tag\r\n                    : gameButtons.gunner.Pause;\r\n                command.appendChild(xmlDoc.createElement(elName));\r\n\r\n                elName = rows[i].driver !== null\r\n                    ? rows[i].driver.tag\r\n                    : gameButtons.driver.Pause;\r\n                command.appendChild(xmlDoc.createElement(elName));\r\n\r\n                elName = rows[i].charger !== null\r\n                    ? \"LoadTurret_\" + rows[i].charger.tag\r\n                    : gameButtons.charger.Pause;\r\n                command.appendChild(xmlDoc.createElement(elName));\r\n\r\n                program.appendChild(command);\r\n            }\r\n\r\n            xmlDoc.appendChild(program);\r\n\r\n            const data = `<?xml version=\"1.0\" encoding=\"utf-8\"?>` + ( new XMLSerializer().serializeToString(xmlDoc));\r\n\r\n            const file = new Blob([data], {type: 'text/plain'});\r\n            if (window.navigator.msSaveOrOpenBlob) // IE10+\r\n                window.navigator.msSaveOrOpenBlob(file, filename);\r\n            else { // Others\r\n                const a = document.createElement(\"a\"),\r\n                    url = URL.createObjectURL(file);\r\n                a.href = url;\r\n                a.download = filename;\r\n                document.body.appendChild(a);\r\n\r\n                a.dataset.downloadurl = ['text/plain', a.download, a.href].join(':');\r\n\r\n                a.click();\r\n                setTimeout(function() {\r\n                    document.body.removeChild(a);\r\n                    window.URL.revokeObjectURL(url);\r\n                }, 0);\r\n            }\r\n            return state;\r\n        }\r\n        case actionsMap_Code.LOAD_ALG:{\r\n            let text = action.payload;\r\n\r\n            // const text = action.payload === \"\"? state.initialMap : action.payload;\r\n\r\n            let xmlDoc = null;\r\n\r\n            try {\r\n                if (window.DOMParser) {\r\n                    // code for modern browsers\r\n                    const parser = new DOMParser();\r\n                    xmlDoc = parser.parseFromString(text,\"text/xml\");\r\n                }\r\n                else {\r\n                    // code for old IE browsers\r\n                    // eslint-disable-next-line\r\n                    xmlDoc = new ActiveXObject(\"Microsoft.XMLDOM\");\r\n                    xmlDoc.async = false;\r\n                    xmlDoc.loadXML(text);\r\n                }\r\n\r\n                const program = xmlDoc.getElementsByTagName('Program')[0];\r\n                const commands = program.getElementsByTagName(\"Command\");\r\n\r\n                let rows = [];\r\n\r\n                for(let i = 0 ; i < commands.length; i++){\r\n\r\n                    const row = {gunner: null, driver: null, charger: null};\r\n\r\n                    const gunner = commands[i].childNodes[0];\r\n                    const driver = commands[i].childNodes[1];\r\n                    const charger = commands[i].childNodes[2];\r\n\r\n                    row.gunner  = getGameButtonImage(\"gunner\", gunner.nextSibling.nodeName);\r\n                    row.driver  = getGameButtonImage(\"driver\", driver.nextSibling.nodeName);\r\n                    row.charger  = getGameButtonImage(\"charger\", charger.nextSibling.nodeName);\r\n\r\n                    rows.push(row);\r\n                }\r\n                while (rows.length > 0\r\n                    && rows[rows.length-1].gunner.tag === gameButtons.gunner.Pause\r\n                    && rows[rows.length-1].driver.tag === gameButtons.driver.Pause\r\n                    && rows[rows.length-1].charger.tag === gameButtons.charger.Pause )\r\n                {\r\n                    rows.pop();\r\n                }\r\n\r\n                rows.push({gunner: null, driver: null, charger: null});\r\n\r\n                return {...state, codeState: {...state.codeState, rows: rows}}\r\n            }\r\n            catch (e) {\r\n                alert('Ошибка файл алгоритма неправильно сформирован');\r\n            }\r\n            break;\r\n        }\r\n        case actionsMap_Code.CHANGE_SPEED:{\r\n\r\n            let speed = state.codeState.speed;\r\n\r\n            speed += 100 * (action.payload? -1 : 1);\r\n\r\n            if (speed > 500)\r\n                speed = 500;\r\n\r\n            if (speed < 100)\r\n                speed = 100;\r\n\r\n            return {\r\n                ...state, codeState: {\r\n                    ...state.codeState, speed: speed\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return state\r\n};\r\n\r\nexport const putStateToProps_AlgButtons = (state) =>{\r\n\r\n    return {\r\n        selectedRow: state.codeState.selectedRow,\r\n        currentRow: state.codeState.currentRow,\r\n        rows: state.codeState.rows,\r\n        shellDistance: state.mapState.shellDistance,\r\n        tank: state.mapState.tank,\r\n        mapWidth: state.mapState.width,\r\n        mapHeight: state.mapState.height,\r\n        map: state.mapState.map,\r\n        isPlay: state.codeState.isPlay,\r\n        speed: state.codeState.speed\r\n    }\r\n};\r\nexport const putActionsToProps_AlgButtons = (dispatch) => {\r\n    return {\r\n        rotateTurret: bindActionCreators(RotateTurret, dispatch),\r\n        rotateTank: bindActionCreators(RotateTank, dispatch),\r\n        moveTankForward: bindActionCreators(MoveTankForward, dispatch),\r\n        moveTankBackward: bindActionCreators(MoveTankBackward, dispatch),\r\n        moveTankRotateLeftAndForward: bindActionCreators(MoveTankRotateLeftAndForward, dispatch),\r\n        moveTankRotateRightAndForward: bindActionCreators(MoveTankRotateRightAndForward, dispatch),\r\n        load: bindActionCreators(Load, dispatch),\r\n        selectRow: bindActionCreators(SelectRow, dispatch),\r\n        start: bindActionCreators(Start, dispatch),\r\n        stop: bindActionCreators(Stop, dispatch),\r\n        pause: bindActionCreators(Pause, dispatch),\r\n        nextMove: bindActionCreators(NextMove, dispatch),\r\n        restart: bindActionCreators(Restart, dispatch),\r\n        fire: bindActionCreators(Fire, dispatch),\r\n        increaseSpeed: bindActionCreators(IncreaseSpeed, dispatch),\r\n        decreaseSpeed: bindActionCreators(DecreaseSpeed, dispatch),\r\n    }\r\n};\r\n\r\nexport const putStateToProps_TankInfo = (state) =>{\r\n\r\n    return {\r\n        tank: state.mapState.tank,\r\n    }\r\n};\r\n","import {createStore} from \"redux\";\r\nimport {rootReducer} from \"./reducers.js\"\r\n\r\nexport const tileNames = {\r\n    mountains: \"mountains\",\r\n    swamp: \"swamp\",\r\n    littleMountains: \"littleMountains\",\r\n    littleSwamp: \"littleSwamp\",\r\n    trailVert: \"trailVert\",\r\n    trailDiag: \"trailDiag\",\r\n    littleTrailVert: \"littleTrailVert\",\r\n    littleTrailDiag: \"littleTrailDiag\",\r\n    tankBody: \"tankBody\",\r\n    tankHead: \"tankHead\",\r\n    tankStatus_NotLoaded: \"tankStatus_NotLoaded\",\r\n    tankStatus_PartLoaded: \"tankStatus_PartLoaded\",\r\n    tankStatus_Loaded: \"tankStatus_Loaded\",\r\n    _3hp: \"3hp\",\r\n    _2hp: \"2hp\",\r\n    _1hp: \"1hp\",\r\n    empty: \"empty\"\r\n};\r\n\r\nexport const getmapTile = (type, anotherTileSize, little = false) =>{\r\n    if (store + \"\" === \"undefined\")\r\n        return {};\r\n    const tS = anotherTileSize || store.getState().mapState.tileSize; //tileSize\r\n    let obj = {};\r\n    switch (type) {\r\n        case tileNames.mountains:\r\n        case tileNames.littleMountains:\r\n            obj = {\r\n                tag: type,\r\n                backgroundImage: \"url('../images/game/gametiles.svg')\",\r\n                backgroundPosition: `-${tS}px 0px`,\r\n                height: tS,\r\n                width: tS,};\r\n            break;\r\n        case tileNames.swamp:\r\n        case tileNames.littleSwamp:\r\n            obj = {\r\n                tag: type,\r\n                backgroundImage: \"url('../images/game/gametiles.svg')\",\r\n                backgroundPosition: `-${tS * 2}px 0px`,\r\n                height: tS,\r\n                width: tS,};\r\n            break;\r\n        case tileNames.tankBody:\r\n            obj = {\r\n                tag: type,\r\n                backgroundImage: \"url('../images/game/gametiles.svg')\",\r\n                backgroundPosition: `-${tS * 3}px 0px`,\r\n                height: tS,\r\n                width: tS,};\r\n            break;\r\n        case tileNames.tankHead:\r\n            obj = {\r\n                tag: type,\r\n                backgroundImage: \"url('../images/game/gametiles.svg')\",\r\n                backgroundPosition: `-${tS * 4}px 0px`,\r\n                height: tS,\r\n                width: tS,};\r\n            break;\r\n        case tileNames.tankStatus_NotLoaded:\r\n            obj = {\r\n                tag: type,\r\n                backgroundImage: \"url('../images/game/gametiles.svg')\",\r\n                backgroundPosition: `-${tS * 3}px -${tS * 2}px`,\r\n                height: tS,\r\n                width: tS,};\r\n            break;\r\n        case tileNames.tankStatus_PartLoaded:\r\n            obj = {\r\n                tag: type,\r\n                backgroundImage: \"url('../images/game/gametiles.svg')\",\r\n                backgroundPosition: `-${tS * 4}px -${tS * 2}px`,\r\n                height: tS,\r\n                width: tS,};\r\n            break;\r\n        case tileNames.tankStatus_Loaded:\r\n            obj = {\r\n                tag: type,\r\n                backgroundImage: \"url('../images/game/gametiles.svg')\",\r\n                backgroundPosition: `-${tS * 4}px -${tS * 3}px`,\r\n                height: tS,\r\n                width: tS,};\r\n            break;\r\n        case tileNames._3hp:\r\n            obj = {\r\n                tag: type,\r\n                backgroundImage: \"url('../images/game/gametiles.svg')\",\r\n                backgroundPosition: `0px -${tS}px`,\r\n                height: tS,\r\n                width: tS,};\r\n            break;\r\n        case tileNames._2hp:\r\n            obj = {\r\n                tag: type,\r\n                backgroundImage: \"url('../images/game/gametiles.svg')\",\r\n                backgroundPosition: `-${tS}px -${tS}px`,\r\n                height: tS,\r\n                width: tS,};\r\n            break;\r\n        case tileNames._1hp:\r\n            obj = {\r\n                tag: type,\r\n                backgroundImage: \"url('../images/game/gametiles.svg')\",\r\n                backgroundPosition: `-${tS * 2}px -${tS}px`,\r\n                height: tS,\r\n                width: tS,};\r\n            break;\r\n        case tileNames.trailVert:\r\n            console.log(1);\r\n            obj = {\r\n                tag: type,\r\n                backgroundImage: \"url('../images/game/gametiles.svg')\",\r\n                backgroundPosition: `-${tS * 3}px -${tS}px`,\r\n                height: tS,\r\n                width: tS,};\r\n            break;\r\n        case tileNames.littleTrailVert:\r\n            little = true;\r\n            obj = {\r\n                tag: type,\r\n                backgroundImage: \"url('../images/game/gametiles.svg')\",\r\n                backgroundPosition: `-${tS * 3}px -${tS}px`,\r\n                height: tS,\r\n                width: tS,};\r\n            break;\r\n        case tileNames.trailDiag:\r\n            obj = {\r\n                tag: type,\r\n                backgroundImage: \"url('../images/game/gametiles.svg')\",\r\n                backgroundPosition: `-${tS * 4}px -${tS}px`,\r\n                height: tS,\r\n                width: tS,};\r\n            break;\r\n        case tileNames.littleTrailDiag:\r\n            little = true;\r\n            obj = {\r\n                tag: type,\r\n                backgroundImage: \"url('../images/game/gametiles.svg')\",\r\n                backgroundPosition: `-${tS * 4}px -${tS}px`,\r\n                height: tS,\r\n                width: tS,};\r\n            break;\r\n        default:\r\n            obj = {\r\n                tag: \"empty\",\r\n                backgroundImage: \"url('../images/game/gametiles.svg')\",\r\n                backgroundPosition: \"0px 0px\",\r\n                height: tS,\r\n                width: tS,};\r\n            break;\r\n    }\r\n    if (little){\r\n        const positionArr = obj.backgroundPosition.split(' ');\r\n        const X = Number(positionArr[0].slice(0,positionArr[0].length-2)) / 3;\r\n        const Y = Number(positionArr[1].slice(0,positionArr[1].length-2)) / 3;\r\n\r\n        obj = { ...obj,\r\n            backgroundPosition: `${Math.floor(X)}px ${Math.floor(Y)}px`,\r\n            backgroundSize: `${tS * 5 / 3 + 2 }px ${tS * 5 / 3 + 2 }px`,\r\n            height: obj.height / 3, width: obj.width / 3 ,\r\n            border:\"none\", }\r\n    }\r\n    else{\r\n        obj = {...obj, backgroundSize: `${tS * 5}px ${tS * 5}px`,}\r\n    }\r\n\r\n\r\n    return obj;\r\n};\r\n\r\nexport const gunnerBtnsCount =9;\r\nexport const driverBtnsCount =12;\r\nexport const chargerBtnsCount =3;\r\n\r\nexport const gameButtons = {\r\n    gunner:{\r\n        North: \"PauseGunner\",\r\n        East: \"TurnTurretClockwise90\",\r\n        South: \"TurnTurretAround\",\r\n        West: \"TurnTurretCounterClockwise90\",\r\n        NorthWest: \"TurnTurretCounterClockwise45\",\r\n        NorthEast: \"TurnTurretClockwise45\",\r\n        SouthWest: \"TurnTurretCounterClockwise135\",\r\n        SouthEast: \"TurnTurretClockwise135\",\r\n        Fire: \"FireCommand\",\r\n        Pause: \"PauseGunner\"\r\n    },\r\n    driver:{\r\n        North: \"StopDriver\",\r\n        East: \"TurnTankClockwise90\",\r\n        South: \"TurnTankAround\",\r\n        West: \"TurnTankCounterClockwise90\",\r\n        NorthWest: \"TurnTankCounterClockwise45\",\r\n        NorthEast: \"TurnTankClockwise45\",\r\n        SouthWest: \"TurnTankCounterClockwise135\",\r\n        SouthEast: \"TurnTankClockwise135\",\r\n        MoveForward: \"MoveForward\",\r\n        MoveBackward: \"MoveBackward\",\r\n        TurnLeftAndMoveForward: \"TurnTankCounterClockwiseAndMoveForward\",\r\n        TurnRightAndMoveForward: \"TurnTankClockwiseAndMoveForward\",\r\n        TurnLeftAndMoveBackward: \"=TBD=\",\r\n        TurnRightAndMoveBackward: \"=TBD=\",\r\n        Stop: \"StopDriver\",\r\n        Pause: \"StopDriver\"\r\n    },\r\n    charger:{\r\n        NotLoaded: 0,\r\n        PartiallyLoaded: 1,\r\n        Ready:2,\r\n        Pause: \"PauseLoader\"\r\n    }\r\n};\r\n\r\nexport function getGameButtonImage(className, index) {\r\n\r\n    if (isNaN(index)){\r\n        switch (className) {\r\n            case \"gunner\":\r\n                switch (index) {\r\n                    case gameButtons.gunner.NorthEast:\r\n                        index = 0;\r\n                        break;\r\n                    case gameButtons.gunner.East:\r\n                        index = 1;\r\n                        break;\r\n                    case gameButtons.gunner.SouthEast:\r\n                        index = 2;\r\n                        break;\r\n                    case gameButtons.gunner.NorthWest:\r\n                        index = 3;\r\n                        break;\r\n                    case gameButtons.gunner.West:\r\n                        index = 4;\r\n                        break;\r\n                    case gameButtons.gunner.SouthWest:\r\n                        index = 5;\r\n                        break;\r\n                    case gameButtons.gunner.South:\r\n                        index = 6;\r\n                        break;\r\n                    case gameButtons.gunner.Fire:\r\n                        index = 7;\r\n                        break;\r\n                    default:\r\n                        index = 8\r\n                }\r\n                break;\r\n            case \"driver\":\r\n                switch (index) {\r\n                    case gameButtons.driver.NorthEast:\r\n                        index = 0;\r\n                        break;\r\n                    case gameButtons.driver.East:\r\n                        index = 1;\r\n                        break;\r\n                    case gameButtons.driver.SouthEast:\r\n                        index = 2;\r\n                        break;\r\n                    case gameButtons.driver.NorthWest:\r\n                        index = 3;\r\n                        break;\r\n                    case gameButtons.driver.West:\r\n                        index = 4;\r\n                        break;\r\n                    case gameButtons.driver.SouthWest:\r\n                        index = 5;\r\n                        break;\r\n                    case gameButtons.driver.South:\r\n                        index = 6;\r\n                        break;\r\n                    case gameButtons.driver.MoveForward:\r\n                        index = 7;\r\n                        break;\r\n                    case gameButtons.driver.MoveBackward:\r\n                        index = 8;\r\n                        break;\r\n                    case gameButtons.driver.TurnRightAndMoveForward:\r\n                        index = 9;\r\n                        break;\r\n                    case gameButtons.driver.TurnLeftAndMoveForward:\r\n                        index = 10;\r\n                        break;\r\n                    default:\r\n                        index = 11;\r\n                }\r\n                break;\r\n            case \"charger\":\r\n                switch (index) {\r\n                    case gameButtons.charger.PartiallyLoaded:\r\n                        index = 0;\r\n                        break;\r\n                    case gameButtons.charger.Ready:\r\n                        index = 1;\r\n                        break;\r\n                    default:\r\n                        index = 2;\r\n                }\r\n                break;\r\n        }\r\n    }\r\n\r\n\r\n    return [\r\n        //-----------------Gunner----------------------\r\n        {\r\n            tag:gameButtons.gunner.NorthEast,\r\n            backgroundImage: \"url('../images/game/actionbtns.svg')\",\r\n            backgroundPosition: \"0px 0px\",\r\n            left: 0,\r\n            height: 50,\r\n            width: 50,},\r\n        {\r\n            tag:gameButtons.gunner.East,\r\n            backgroundImage: \"url('../images/game/actionbtns.svg')\",\r\n            backgroundPosition: \"-50px 0px\",\r\n            left: 0,\r\n            height: 50,\r\n            width: 50,},\r\n        {\r\n            tag:gameButtons.gunner.SouthEast,\r\n            backgroundImage: \"url('../images/game/actionbtns.svg')\",\r\n            backgroundPosition: \"-100px 0px\",\r\n            left: 0,\r\n            height: 50,\r\n            width: 50,},\r\n        {\r\n            tag:gameButtons.gunner.NorthWest,\r\n            backgroundImage: \"url('../images/game/actionbtns.svg')\",\r\n            backgroundPosition: \"0px -50px\",\r\n            left: 0,\r\n            height: 50,\r\n            width: 50,},\r\n        {\r\n            tag:gameButtons.gunner.West,\r\n            backgroundImage: \"url('../images/game/actionbtns.svg')\",\r\n            backgroundPosition: \"-50px -50px\",\r\n            left: 0,\r\n            height: 50,\r\n            width: 50,},\r\n        {\r\n            tag:gameButtons.gunner.SouthWest,\r\n            backgroundImage: \"url('../images/game/actionbtns.svg')\",\r\n            backgroundPosition: \"-100px -50px\",\r\n            left: 0,\r\n            height: 50,\r\n            width: 50,},\r\n        {\r\n            tag:gameButtons.gunner.South,\r\n            backgroundImage: \"url('../images/game/actionbtns.svg')\",\r\n            backgroundPosition: \"0px -100px\",\r\n            left: 0,\r\n            height: 50,\r\n            width: 50,},\r\n        {\r\n            tag:gameButtons.gunner.Fire,\r\n            backgroundImage: \"url('../images/game/actionbtns.svg')\",\r\n            backgroundPosition: \"-100px -100px\",\r\n            left: 0,\r\n            height: 50,\r\n            width: 50,},\r\n        {\r\n            tag:gameButtons.gunner.Pause,\r\n            backgroundImage: \"url('../images/game/actionbtns.svg')\",\r\n            backgroundPosition: \"-150px -150px\",\r\n            left: 0,\r\n            height: 50,\r\n            width: 50,},\r\n        //---------------Driver------------\r\n        {\r\n            tag:gameButtons.driver.NorthEast,\r\n            backgroundImage: \"url('../images/game/actionbtns.svg')\",\r\n            backgroundPosition: \"0px -150px\",\r\n            left: 0,\r\n            height: 50,\r\n            width: 50,},\r\n        {\r\n            tag:gameButtons.driver.East,\r\n            backgroundImage: \"url('../images/game/actionbtns.svg')\",\r\n            backgroundPosition: \"-50px -150px\",\r\n            left: 0,\r\n            height: 50,\r\n            width: 50,},\r\n        {\r\n            tag:gameButtons.driver.SouthEast,\r\n            backgroundImage: \"url('../images/game/actionbtns.svg')\",\r\n            backgroundPosition: \"-100px -150px\",\r\n            left: 0,\r\n            height: 50,\r\n            width: 50,},\r\n        {\r\n            tag:gameButtons.driver.NorthWest,\r\n            backgroundImage: \"url('../images/game/actionbtns.svg')\",\r\n            backgroundPosition: \"0px -200px\",\r\n            left: 0,\r\n            height: 50,\r\n            width: 50,},\r\n        {\r\n            tag:gameButtons.driver.West,\r\n            backgroundImage: \"url('../images/game/actionbtns.svg')\",\r\n            backgroundPosition: \"-50px -200px\",\r\n            left: 0,\r\n            height: 50,\r\n            width: 50,},\r\n        {\r\n            tag:gameButtons.driver.SouthWest,\r\n            backgroundImage: \"url('../images/game/actionbtns.svg')\",\r\n            backgroundPosition: \"-100px -200px\",\r\n            left: 0,\r\n            height: 50,\r\n            width: 50,},\r\n        {\r\n            tag:gameButtons.driver.South,\r\n            backgroundImage: \"url('../images/game/actionbtns.svg')\",\r\n            backgroundPosition: \"-50px -100px\",\r\n            left: 0,\r\n            height: 50,\r\n            width: 50,},\r\n        {\r\n            tag:gameButtons.driver.MoveForward,\r\n            backgroundImage: \"url('../images/game/actionbtns.svg')\",\r\n            backgroundPosition: \"-150px 0px\",\r\n            left: 0,\r\n            height: 50,\r\n            width: 50,},\r\n        {\r\n            tag:gameButtons.driver.MoveBackward,\r\n            backgroundImage: \"url('../images/game/actionbtns.svg')\",\r\n            backgroundPosition: \"-200px 0px\",\r\n            left: 0,\r\n            height: 50,\r\n            width: 50,},\r\n        {\r\n            tag:gameButtons.driver.TurnRightAndMoveForward,\r\n            backgroundImage: \"url('../images/game/actionbtns.svg')\",\r\n            backgroundPosition: \"-150px -50px\",\r\n            left: 0,\r\n            height: 50,\r\n            width: 50,},\r\n        {\r\n            tag:gameButtons.driver.TurnLeftAndMoveForward,\r\n            backgroundImage: \"url('../images/game/actionbtns.svg')\",\r\n            backgroundPosition: \"-200px -50px\",\r\n            left: 0,\r\n            height: 50,\r\n            width: 50,},\r\n        {\r\n            tag:gameButtons.driver.Pause,\r\n            backgroundImage: \"url('../images/game/actionbtns.svg')\",\r\n            backgroundPosition: \"-150px -150px\",\r\n            left: 0,\r\n            height: 50,\r\n            width: 50,},\r\n        //-----------------Charger--------------\r\n        {\r\n            tag:gameButtons.charger.PartiallyLoaded,\r\n            backgroundImage: \"url('../images/game/actionbtns.svg')\",\r\n            backgroundPosition: \"-150px -100px\",\r\n            left: 0,\r\n            height: 50,\r\n            width: 50,},\r\n        {\r\n            tag:gameButtons.charger.Ready,\r\n            backgroundImage: \"url('../images/game/actionbtns.svg')\",\r\n            backgroundPosition: \"-200px -100px\",\r\n            left: 0,\r\n            height: 50,\r\n            width: 50,},\r\n        {\r\n            tag:gameButtons.charger.Pause,\r\n            backgroundImage: \"url('../images/game/actionbtns.svg')\",\r\n            backgroundPosition: \"-150px -150px\",\r\n            left: 0,\r\n            height: 50,\r\n            width: 50,},\r\n    ][index + (className === \"driver\" ? gunnerBtnsCount : 0) + ( className === \"charger\" ? gunnerBtnsCount + driverBtnsCount : 0 )]\r\n}\r\n\r\nexport function getAngleByDirection(direction){\r\n    switch (direction) {\r\n        case gameButtons.driver.North:\r\n        case gameButtons.gunner.North:\r\n            return 0;\r\n        case gameButtons.driver.East:\r\n        case gameButtons.gunner.East:\r\n            return 90;\r\n        case gameButtons.driver.South:\r\n        case gameButtons.gunner.South:\r\n            return 180;\r\n        case gameButtons.driver.West:\r\n        case gameButtons.gunner.West:\r\n            return -90;\r\n        case gameButtons.driver.NorthWest:\r\n        case gameButtons.gunner.NorthWest:\r\n            return -45;\r\n        case gameButtons.driver.NorthEast:\r\n        case gameButtons.gunner.NorthEast:\r\n            return 45;\r\n        case gameButtons.driver.SouthWest:\r\n        case gameButtons.gunner.SouthWest:\r\n            return -135;\r\n        case gameButtons.driver.SouthEast:\r\n        case gameButtons.gunner.SouthEast:\r\n            return 135;\r\n    }\r\n    return 0;\r\n}\r\n\r\nexport function transformAngle(angle) {\r\n    if (angle > 180 )\r\n        return angle - 360;\r\n\r\n    if (angle < -180 )\r\n        return angle + 360;\r\n\r\n    if (angle === 180 || angle === -180)\r\n        return 180;\r\n\r\n    return angle;\r\n}\r\n\r\nexport function getDirectionByAngle(className, angle){\r\n    angle = transformAngle(angle);\r\n\r\n    switch (angle) {\r\n        case 0:\r\n            return gameButtons[`${className}`].North;\r\n        case 90:\r\n            return gameButtons[`${className}`].East;\r\n        case 180:\r\n            return gameButtons[`${className}`].South;\r\n        case -90:\r\n            return gameButtons[`${className}`].West;\r\n        case -45:\r\n            return gameButtons[`${className}`].NorthWest;\r\n        case 45:\r\n            return gameButtons[`${className}`].NorthEast;\r\n        case -135:\r\n            return gameButtons[`${className}`].SouthWest;\r\n        case 135:\r\n            return gameButtons[`${className}`].SouthEast;\r\n    }\r\n    return \"undefined\";\r\n}\r\n\r\nexport const initialState_Code ={\r\n    gunnerSelectedIndex: 0,\r\n    driverSelectedIndex: 0,\r\n    chargerSelectedIndex: 0,\r\n    selectedRow: 0,\r\n    currentRow: 0,\r\n    rows: [{\r\n        gunner: null,\r\n        driver: null,\r\n        charger: null\r\n    }],\r\n    isPlay: false,\r\n    isPause: false,\r\n    speed: 500,\r\n\r\n};\r\n\r\nconst testMap=`<?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<World Height=\"10\" Width=\"10\" ShellDistance=\"8\">\r\n  <Tank X=\"4\" Y=\"4\">\r\n    <TankDirection>North</TankDirection>\r\n    <TurretDirection>North</TurretDirection>\r\n    <TurretStatus>NotLoaded</TurretStatus>\r\n  </Tank>\r\n  <Units>\r\n    <LittlePillbox X=\"4\" Y=\"2\" />\r\n    <BigPillbox X=\"7\" Y=\"1\" />\r\n    <Rock X=\"5\" Y=\"2\" />\r\n    <LittleRock X=\"6\" Y=\"2\" XShift=\"-1\" YShift=\"1\" />\r\n    <LittleRock X=\"6\" Y=\"2\" XShift=\"0\" YShift=\"0\" />\r\n    <LittleRock X=\"6\" Y=\"2\" XShift=\"1\" YShift=\"-1\" />\r\n    <LittleRock X=\"7\" Y=\"2\" XShift=\"0\" YShift=\"-1\" />\r\n    <LittleRock X=\"7\" Y=\"2\" XShift=\"0\" YShift=\"0\" />\r\n    <LittleRock X=\"7\" Y=\"2\" XShift=\"0\" YShift=\"1\" />\r\n    <Swamp X=\"3\" Y=\"3\" />\r\n    <Swamp X=\"4\" Y=\"3\" />\r\n    <Swamp X=\"5\" Y=\"3\" />\r\n    <LittleSwamp X=\"6\" Y=\"2\" XShift=\"-1\" YShift=\"0\" />\r\n    <LittleSwamp X=\"6\" Y=\"2\" XShift=\"-1\" YShift=\"-1\" />\r\n    <LittleSwamp X=\"6\" Y=\"2\" XShift=\"0\" YShift=\"-1\" />\r\n    <LittleSwamp X=\"6\" Y=\"2\" XShift=\"1\" YShift=\"0\" />\r\n    <LittleSwamp X=\"6\" Y=\"2\" XShift=\"1\" YShift=\"1\" />\r\n    <LittleSwamp X=\"6\" Y=\"2\" XShift=\"0\" YShift=\"1\" />\r\n    <LittleSwamp X=\"7\" Y=\"2\" XShift=\"-1\" YShift=\"0\" />\r\n    <LittleSwamp X=\"7\" Y=\"2\" XShift=\"-1\" YShift=\"-1\" />\r\n    <LittleSwamp X=\"7\" Y=\"2\" XShift=\"-1\" YShift=\"1\" />\r\n    <LittleSwamp X=\"7\" Y=\"2\" XShift=\"1\" YShift=\"-1\" />\r\n    <LittleSwamp X=\"7\" Y=\"2\" XShift=\"1\" YShift=\"0\" />\r\n    <LittleSwamp X=\"7\" Y=\"2\" XShift=\"1\" YShift=\"1\" />\r\n    <LittleSwamp X=\"6\" Y=\"3\" XShift=\"-1\" YShift=\"1\" />\r\n    <LittleSwamp X=\"6\" Y=\"3\" XShift=\"0\" YShift=\"0\" />\r\n    <LittleSwamp X=\"6\" Y=\"3\" XShift=\"1\" YShift=\"-1\" />\r\n    <LittleSwamp X=\"6\" Y=\"3\" XShift=\"0\" YShift=\"-1\" />\r\n    <LittleSwamp X=\"6\" Y=\"3\" XShift=\"-1\" YShift=\"-1\" />\r\n    <LittleSwamp X=\"6\" Y=\"3\" XShift=\"-1\" YShift=\"0\" />\r\n    <LittleSwamp X=\"6\" Y=\"3\" XShift=\"1\" YShift=\"0\" />\r\n    <LittleSwamp X=\"7\" Y=\"3\" XShift=\"-1\" YShift=\"-1\" />\r\n    <LittleSwamp X=\"7\" Y=\"3\" XShift=\"0\" YShift=\"-1\" />\r\n  </Units>\r\n</World>`;\r\n\r\n\r\nconst intitalTileSize = 40;\r\n\r\nexport const initialState_Map = {\r\n    tileSize:intitalTileSize,\r\n    initialMap: testMap,\r\n    mapTracers: [],\r\n    map:[],\r\n    targetCount:0\r\n};\r\n\r\nexport const initialState = {\r\n    codeState: initialState_Code,\r\n    mapState: initialState_Map\r\n};\r\n\r\nexport const store = createStore(rootReducer, initialState);\r\n\r\n\r\n","import React, {Component} from \"react\";\r\nimport ReactModal from \"react-modal\";\r\nimport {connect, Provider} from \"react-redux\";\r\nimport {store} from '../store/stores.js'\r\nimport {getGameButtonImage} from '../store/stores.js'\r\nimport {gunnerBtnsCount, driverBtnsCount, chargerBtnsCount, gameButtons} from '../store/stores.js'\r\nimport {putActionsToProps_Code, putStateToProps_Code} from \"../store/reducers.js\";\r\nimport {putStateToProps_AlgButtons, putActionsToProps_AlgButtons, putStateToProps_TankInfo} from \"../store/reducers.js\";\r\nimport {getmapTile, tileNames} from \"../store/stores\";\r\n\r\nconst error = {\r\n    cannotChangeDirection: 'Невозможно изменить направление во время движения, необходимо остановить танк (сделать паузу)',\r\n    outOfBounds: 'Танк выехал за границу',\r\n    moveOnMountain: 'Танк не может проехать по горам',\r\n    moveOnSwamp: 'Танк не может проехать по лесам',\r\n    moveOnTarget: 'Танк не может проехать по мишеням',\r\n    moveOnSmth: 'Танк не может проехать по этой клетке',\r\n    cannotPartiallyLoad: 'Команду \"Заряжай 1\" можно выполнить только если орудие не заряжено',\r\n    cannotFullyLoad: 'Команду \"Заряжай 2\" можно выполнить только если уже выполнена команда \"Заряжай 1\"',\r\n    cannotFire: 'Нельзя выстрелить, пока орудие не полностью заряжено',\r\n};\r\n\r\nclass Menu extends Component {\r\n    render() {\r\n        return (\r\n            <div id=\"menuDiv\" className=\"flex-row flex-align-start\" >\r\n                <div  className=\"margin-10\">\r\n                    <Provider store={store}>\r\n                        <WrappedGameTable />\r\n                    </Provider>\r\n                </div>\r\n                <div  className=\"flex-column flex-align-start\">\r\n                    <Provider store={store}>\r\n                        <WrappedMenuButtons />\r\n                    </Provider>\r\n                    <Provider store={store}>\r\n                        <WrappedGameButtonsTable />\r\n                    </Provider>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nclass MenuButtons extends Component {\r\n    handlePlay(){\r\n            this.props.start();\r\n            setTimeout(() => this.playNext(), this.props.speed)\r\n    }\r\n    handleStop(){\r\n        this.props.restart();\r\n    }\r\n    handlePause(){\r\n        this.props.pause();\r\n    }\r\n    handleNextStep(){\r\n        if (!this.props.isPlay) {\r\n            this.props.start();\r\n        }\r\n        setTimeout(() => {\r\n            if (this.nextMove(this.props.currentRow)) {\r\n                this.props.nextMove();\r\n                this.props.pause();\r\n            }\r\n        }, this.props.speed)\r\n    }\r\n    handleUntilRow(){\r\n        if (!this.props.isPlay) {\r\n            this.props.start();\r\n        }\r\n        setTimeout(() => {\r\n            if (this.props.currentRow < this.props.selectedRow)\r\n                if (this.nextMove(this.props.currentRow)) {\r\n                    this.props.nextMove();\r\n                    this.handleUntilRow();\r\n                }\r\n            else {\r\n                this.props.pause();\r\n                }\r\n        }, this.props.speed)\r\n    }\r\n\r\n    playNext(){\r\n        if (this.props.isPlay) {\r\n            if (this.nextMove(this.props.currentRow)) {\r\n                this.props.nextMove();\r\n                setTimeout(()=> {\r\n                    if (this.props.isPlay)\r\n                        this.playNext();\r\n                },this.props.speed);\r\n            } else\r\n                {\r\n                    console.log('stop');\r\n                    this.props.stop();}\r\n        }\r\n        else {\r\n            this.props.stop();\r\n        }\r\n    }\r\n    nextMove(indexRow){\r\n        // const state = store.getState();\r\n        const {tank, map, mapWidth, mapHeight} = this.props;//state.mapState;\r\n        const {rows} = this.props;//state.codeState;\r\n        const currRowIndex = indexRow;\r\n\r\n        if (currRowIndex >= rows.length - 1)\r\n            return false;\r\n\r\n        const currRow = rows[currRowIndex];\r\n        const {gunner, driver,  charger} = currRow;\r\n\r\n        if (gunner !== null){\r\n            const tag = gunner.tag;\r\n            switch (tag) {\r\n                case gameButtons.gunner.North:\r\n                case gameButtons.gunner.NorthEast:\r\n                case gameButtons.gunner.East:\r\n                case gameButtons.gunner.SouthEast:\r\n                case gameButtons.gunner.South:\r\n                case gameButtons.gunner.SouthWest:\r\n                case gameButtons.gunner.West:\r\n                case gameButtons.gunner.NorthWest:{\r\n                    this.props.rotateTurret(tag);\r\n                    break;\r\n                }\r\n                case gameButtons.gunner.Fire:{\r\n                    /*TODO кнопка стрельбы*/\r\n                    if (tank.TurretStatus !== 2)\r\n                    {\r\n                        alert(error.cannotFire + `\\nОшибка в строке (${indexRow + 1})`);\r\n                        return false;\r\n                    }\r\n                    this.props.fire();\r\n                    break;\r\n                }\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n\r\n        if (driver !== null){\r\n            const tag = driver.tag;\r\n            switch (tag) {\r\n                case gameButtons.driver.North:\r\n                case gameButtons.driver.NorthEast:\r\n                case gameButtons.driver.East:\r\n                case gameButtons.driver.SouthEast:\r\n                case gameButtons.driver.South:\r\n                case gameButtons.driver.SouthWest:\r\n                case gameButtons.driver.West:\r\n                case gameButtons.driver.NorthWest:{\r\n                    this.props.rotateTank(tag);\r\n                    break;\r\n                }\r\n\r\n                case gameButtons.driver.MoveForward:\r\n                case gameButtons.driver.MoveBackward:{\r\n                    if (currRowIndex > 0\r\n                        && rows[currRowIndex - 1].driver !== null\r\n                        && (\r\n                        (tag === gameButtons.driver.MoveForward\r\n                            && rows[currRowIndex -1].driver.tag === gameButtons.driver.MoveBackward)\r\n                            ||\r\n                        (tag === gameButtons.driver.MoveBackward\r\n                            && rows[currRowIndex -1].driver.tag === gameButtons.driver.MoveForward)\r\n                            )){\r\n                        alert(error.cannotChangeDirection + `\\nОшибка в строке (${indexRow + 1})`);\r\n                        return false;\r\n                    }\r\n\r\n                    if (tag === gameButtons.driver.MoveForward)\r\n                        this.props.moveTankForward();\r\n                    else this.props.moveTankBackward();\r\n\r\n                    const {X,Y} = this.props.tank;\r\n\r\n                    if (X < 0 || X >= mapWidth\r\n                        || Y < 0 || Y >= mapHeight)\r\n                    {\r\n                        alert(error.outOfBounds + `\\nОшибка в строке (${indexRow + 1})`);\r\n                        return false;\r\n                    }\r\n\r\n                    if (map[Y][X].length > 0){\r\n                        let msg = error.moveOnSmth;\r\n                        switch (map[Y][X][0].tile) {\r\n                            case tileNames.swamp:\r\n                                msg = error.moveOnSwamp;\r\n                                break;\r\n                            case tileNames.mountains:\r\n                                msg = error.moveOnMountain;\r\n                                break;\r\n                            case tileNames._3hp:\r\n                            case tileNames._2hp:\r\n                            case tileNames._1hp:\r\n                                msg = error.moveOnTarget;\r\n                                break;\r\n                        }\r\n                        alert(msg + `\\nОшибка в строке (${indexRow + 1})`);\r\n                        return false;\r\n                    }\r\n\r\n                    break;\r\n                }\r\n\r\n                case gameButtons.driver.TurnLeftAndMoveForward:\r\n                case gameButtons.driver.TurnRightAndMoveForward:\r\n                {\r\n                    if (currRowIndex > 0\r\n                        && rows[currRowIndex - 1].driver !== null\r\n                        && rows[currRowIndex -1].driver.tag === gameButtons.driver.MoveBackward)\r\n                    {\r\n                        alert(error.cannotChangeDirection + `\\nОшибка в строке (${indexRow + 1})`);\r\n                        return false;\r\n                    }\r\n\r\n                    if (tag === gameButtons.driver.TurnLeftAndMoveForward)\r\n                        this.props.moveTankRotateLeftAndForward();\r\n                    else this.props.moveTankRotateRightAndForward();\r\n\r\n                    const {X,Y} = this.props.tank;\r\n\r\n                    if (X < 0 || X >= mapWidth\r\n                        || Y < 0 || Y >= mapHeight)\r\n                    {\r\n                        alert(error.outOfBounds + `\\nОшибка в строке (${indexRow + 1})`);\r\n                        return false;\r\n                    }\r\n\r\n                    if (map[Y][X].length > 0){\r\n                        let msg = error.moveOnSmth;\r\n                        switch (map[Y][X][0].tile) {\r\n                            case tileNames.swamp:\r\n                                msg = error.moveOnSwamp;\r\n                                break;\r\n                            case tileNames.mountains:\r\n                                msg = error.moveOnMountain;\r\n                                break;\r\n                            case tileNames._3hp:\r\n                            case tileNames._2hp:\r\n                            case tileNames._1hp:\r\n                                msg = error.moveOnTarget;\r\n                                break;\r\n                        }\r\n                        alert(msg + `\\nОшибка в строке (${indexRow + 1})`);\r\n                        return false;\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (charger !== null){\r\n            switch (charger.tag) {\r\n                case gameButtons.charger.PartiallyLoaded:{\r\n                    if (tank.TurretStatus === 1 || (tank.TurretStatus === 2\r\n                                                    && (gunner.tag !== gameButtons.gunner.Fire))){\r\n                        alert(error.cannotPartiallyLoad + `\\nОшибка в строке (${indexRow + 1})`);\r\n                        return false;\r\n                    }\r\n                    break;\r\n                }\r\n                case gameButtons.charger.Ready:{\r\n                    if (tank.TurretStatus >= 2){\r\n                        alert(error.cannotFullyLoad + `\\nОшибка в строке (${indexRow + 1})`);\r\n                        return false;\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n            this.props.load();\r\n        }\r\n        return true;\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"flex-row \">\r\n                <div className=\"flex-column flex-justify-evenly margin-10\">\r\n                    <InfoButton />\r\n                    <Provider store={store}>\r\n                        <WrappedTankInfo />\r\n                    </Provider>\r\n                </div>\r\n                <div className=\"flex-column flex-justify-center widthAll\">\r\n                    <div className=\"flex-column\">\r\n                        <SpeedRange\r\n                            onIncreaseClick={() => this.props.increaseSpeed()}\r\n                            onDecreaseClick={() => this.props.decreaseSpeed()}\r\n                            speed = {this.props.speed}\r\n                        />\r\n                    </div>\r\n                    <div id=\"moveBtnDiv\" className=\"flex-row\">\r\n                        <div className=\"flex-row\">\r\n                            <MenuButton image=\"images/menu/startbtn.svg\" onClick={() => this.handlePlay()} />\r\n                            <MenuButton image=\"images/menu/pausebtn.svg\" onClick={() => this.handlePause()} />\r\n                            <MenuButton image=\"images/menu/stopbtn.svg\" onClick={() =>this.handleStop()} />\r\n                            <MenuButton image=\"images/menu/skipbtn.svg\" onClick={() =>this.handleUntilRow()} />\r\n                            <MenuButton image=\"images/menu/nextstepbtn.svg\" onClick={() =>this.handleNextStep()} />\r\n                        </div>\r\n                        <div style={{width: 50}}> </div>\r\n                    </div>\r\n                    <div style={{textAlign: 'right'}} >\r\n                        <span>Дальность стрельбы: </span>\r\n                        <span>{this.props.shellDistance}</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nfunction MenuButton(props) {\r\n\r\n    const width = props.width || 20;\r\n    const height = props.height || 20;\r\n\r\n    if (!props.onClick){\r\n        return (\r\n            <button style={{background:\"red\"}} >\r\n                <img src={props.image} alt=\"\" style={{width:width, height:height, padding: \"5px\"}}  />\r\n            </button>)\r\n    }\r\n\r\n    return (\r\n        <button onClick={()=> props.onClick()} >\r\n            <img src={props.image} alt=\"\" style={{width:width, height:height, padding: \"5px\"}}  />\r\n        </button>\r\n    )\r\n\r\n}\r\n\r\nconst WrappedMenuButtons = connect(putStateToProps_AlgButtons, putActionsToProps_AlgButtons)(MenuButtons);\r\n\r\n// =============================================\r\n\r\nclass InfoButton extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state={\r\n            isOpen: false\r\n        }\r\n    }\r\n\r\n    handleClick(){\r\n        this.setState({isOpen: false});\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <button id=\"infoButton\" className=\"flex-row\" onClick={() => this.setState({isOpen: true})}>\r\n                    <span>INFO</span>\r\n                    <img src=\"../images/menu/infobtn.svg\" alt=\"\"/>\r\n                </button>\r\n                <ReactModal isOpen={this.state.isOpen} onRequestClose={() => this.setState({isOpen: false})} >\r\n                    <Info onClick={() => this.handleClick()} />\r\n                </ReactModal>\r\n            </div>\r\n        );\r\n    }\r\n}\r\nfunction Info(props){\r\n    return(\r\n        <div>\r\n            <button onClick={() => props.onClick()}>Закрыть</button>\r\n            TBD\r\n            {/*TODO информацию*/}\r\n        </div>\r\n    )\r\n}\r\n\r\nclass TankInfo extends Component {\r\n\r\n    loadTank(){\r\n        const {tank} = this.props;\r\n        if (!tank) return null;\r\n        const valueBody = {...getmapTile(tileNames.tankBody, 100),position: \"absolute\",\r\n            zIndex:9998,\r\n            left: 0,\r\n            top: 0,\r\n            transform: `rotate(${tank.TankDirection}deg)`,\r\n        };\r\n        const valueHead = {...getmapTile(tileNames.tankHead, 100),position: \"absolute\",\r\n            zIndex:9999,\r\n            left: 0,\r\n            top: 0,\r\n            transform: `rotate(${tank.TurretDirection}deg)`,\r\n        };\r\n        const status = this.props.tank.TurretStatus === 0\r\n            ? tileNames.tankStatus_NotLoaded\r\n            : this.props.tank.TurretStatus === 1\r\n                ? tileNames.tankStatus_PartLoaded\r\n                : tileNames.tankStatus_Loaded;\r\n\r\n        const valueStatus = {...getmapTile(status, 100),position: \"absolute\",\r\n            zIndex:9999,\r\n            left: 0,\r\n            top: 0,\r\n        };\r\n        return (\r\n            [\r\n                <div style={valueBody}></div>,\r\n                <div style={valueHead}></div>,\r\n                <div style={valueStatus}></div>,\r\n            ])\r\n    }\r\n\r\n    render()\r\n    {\r\n        return (\r\n            <div id=\"tankDiv\" style={{position: \"relative\", height:100, width:100}}>\r\n                {this.loadTank()}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst WrappedTankInfo = connect(putStateToProps_TankInfo)(TankInfo);\r\n\r\nfunction SpeedRange(props){\r\n    return (\r\n        <div className=\"flex-column\">\r\n            <div>Скорость воспроизведения</div>\r\n            <div className = \"flex-row\">\r\n                <button style={{width:20, margin:5}} onClick={()=>props.onIncreaseClick()}> + </button>\r\n                <button style={{width:20, margin:5}} onClick={()=>props.onDecreaseClick()}> - </button>\r\n                <span style={{width:50}} >{600 - props.speed}</span>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n// ========================================\r\n\r\nclass GameTable extends Component{\r\n    renderRows(){\r\n        let arr=[];\r\n        const {rows} = this.props;\r\n        for(let i = 0; i < rows.length; i++){\r\n            arr.push(\r\n                <GameTableRow\r\n                    selected ={this.props.selectedRow === i}\r\n                    current = {this.props.currentRow === i}\r\n                    index={i}\r\n                    value={rows[i]}\r\n                    OnRowClick={(o)=> {\r\n                        if (!this.props.isPlay)\r\n                            this.props.selectRow(o)}}\r\n                    onClickTD_LMB={(className) => {\r\n                        if (!this.props.isPlay)\r\n                            this.props.addPictureInTD(className, i)}}\r\n                    onClickTD_RMB={(className) => {\r\n                        if (!this.props.isPlay)\r\n                            this.props.removePictureInTD(className, i)}}\r\n                />\r\n            )\r\n        }\r\n\r\n        return arr;\r\n    }\r\n\r\n    handleSaveAlg(){\r\n        if (this.props.rows[0].gunner !== null\r\n            || this.props.rows[0].driver !== null\r\n            || this.props.rows[0].charger !== null\r\n            || this.props.rows.length > 1)\r\n        {\r\n            this.props.saveAlg();\r\n        }\r\n    }\r\n\r\n    fileLoad(evt){\r\n        var files = evt.target.files; // FileList object\r\n        var reader = new FileReader();\r\n        const {loadAlg} = this.props;\r\n        reader.onload = function(e) {\r\n            loadAlg(e.target.result)\r\n            //console.log(typeof e.target.result)\r\n        };\r\n        reader.readAsText(files[0].slice());\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <div className=\"flex-row flex-justify-evenly margin-5\">\r\n                    <MenuButton image=\"images/menu/savebtn.svg\"\r\n                                onClick={() =>this.handleSaveAlg()}\r\n                                width = {20} height = {20}\r\n                    />\r\n                    <div>Загрузить</div>\r\n                    <input type=\"file\" onChange={(e)=> this.fileLoad(e)} style={{width:200}}/>\r\n                </div>\r\n                <div id=\"commandsDiv\" className=\"overflow overflow-y-visible\">\r\n                    <table id=\"commands\">\r\n                        <tbody>\r\n                        <tr>\r\n                            <th>#</th>\r\n                            <th>Наводчик</th>\r\n                            <th>Водитель</th>\r\n                            <th>Заряжающий</th>\r\n                        </tr>\r\n                        {this.renderRows()}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst WrappedGameTable = connect(putStateToProps_Code, putActionsToProps_Code)(GameTable);\r\n\r\nclass GameTableRow extends Component{\r\n    render() {\r\n        return (\r\n            <tr className={(this.props.selected ? \"selectedRow\": \"\") + (this.props.current ? \" currentRow\": \"\") }\r\n                onClick={()=>this.props.OnRowClick(this.props.index)}>\r\n                <td style={{width: 20}} >{this.props.index+1}</td>\r\n                <GameTableCell\r\n                    value={this.props.value.gunner}\r\n                    onClickTD_LMB={() => this.props.onClickTD_LMB(\"gunner\")}\r\n                    onClickTD_RMB={() => this.props.onClickTD_RMB(\"gunner\")}\r\n                />\r\n                <GameTableCell\r\n                    value={this.props.value.driver}\r\n                    onClickTD_LMB={() => this.props.onClickTD_LMB(\"driver\")}\r\n                    onClickTD_RMB={() => this.props.onClickTD_RMB(\"driver\")}\r\n                />\r\n                <GameTableCell\r\n                    value={this.props.value.charger}\r\n                    onClickTD_LMB={() => this.props.onClickTD_LMB(\"charger\")}\r\n                    onClickTD_RMB={() => this.props.onClickTD_RMB(\"charger\")}\r\n                />\r\n            </tr>\r\n        );\r\n    }\r\n}\r\n\r\nfunction GameTableCell(props) {\r\n    return (\r\n        <td className=\"gameTD\" onClick={() => props.onClickTD_LMB()} onContextMenu={(e) => {e.preventDefault(); props.onClickTD_RMB()} }>\r\n            <div className=\"flex-column flex-justify-center\">\r\n                <div style={props.value} />\r\n            </div>\r\n        </td>\r\n    );\r\n}\r\n\r\n// ========================================\r\n\r\nclass GameButtonsTable extends Component{\r\n    renderButtons(className) {\r\n        let arr = [];\r\n        const {gunnerSelectedIndex,driverSelectedIndex,chargerSelectedIndex,\r\n                changeSelectedButton} = this.props;\r\n        switch (className) {\r\n            case \"gunner\": {\r\n                for (let i = 0; i < gunnerBtnsCount; i++) {\r\n                    arr.push(\r\n                        <GameButton key={`${className} - ${i}`}\r\n                                    index={i} class={className} selected={gunnerSelectedIndex === i}\r\n                                    onClick={() => changeSelectedButton(i, className)}/>\r\n                    );\r\n                }\r\n                break;\r\n            }\r\n            case \"driver\":{\r\n                for (let i = 0; i < driverBtnsCount; i++) {\r\n                    arr.push(\r\n                        <GameButton key={`${className} - ${i}`}\r\n                                    index={i} class={className} selected={driverSelectedIndex === i}\r\n                                    onClick={() => changeSelectedButton(i, className)}/>\r\n                    );\r\n                }\r\n                break;\r\n            }\r\n            case \"charger\":{\r\n                for (let i = 0; i < chargerBtnsCount; i++) {\r\n                    arr.push(\r\n                        <GameButton key={`${className} - ${i}`}\r\n                                    index={i} class={className} selected={chargerSelectedIndex === i}\r\n                                    onClick={() => changeSelectedButton(i, className)}/>\r\n                    );\r\n                }\r\n                break;\r\n            }\r\n            default:\r\n        }\r\n        return arr;\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"flex-row flex-align-start overflow\">\r\n                <div className=\"flex-column\">\r\n                    <div style={{height: 20}} className=\"padding-5\">Наводчик</div>\r\n                    <div className=\"gameButtonsColumn flex-row flex-wrap\">\r\n                        {this.renderButtons(\"gunner\")}\r\n                    </div>\r\n                </div>\r\n                <div className=\"flex-column\">\r\n                    <div style={{height: 20}} className=\"padding-5\">Водитель</div>\r\n                    <div className=\"gameButtonsColumn flex-row flex-wrap\">\r\n                        {this.renderButtons(\"driver\")}\r\n                    </div>\r\n                </div>\r\n                <div className=\"flex-column\">\r\n                    <div style={{height: 20, }} className=\"padding-5\">Заряжающий</div>\r\n                    <div className=\"gameButtonsColumn flex-row flex-wrap\">\r\n                        {this.renderButtons(\"charger\")}\r\n                    </div>\r\n                </div>\r\n                <div className=\"flex-column\">\r\n\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst WrappedGameButtonsTable = connect(putStateToProps_Code, putActionsToProps_Code)(GameButtonsTable);\r\n\r\nfunction GameButton(props) {\r\n    return (\r\n        <button className={props.class + (props.selected? \" selected\":\"\") + \" margin-1\"}\r\n                style={getGameButtonImage(props.class, props.index)}\r\n                onClick={props.onClick}/>\r\n    )\r\n}\r\n\r\nexport default Menu\r\n","import React, {Component} from \"react\";\r\nimport { connect, Provider } from 'react-redux'\r\nimport {store} from '../store/stores.js'\r\nimport {putStateToProps_Map, putActionsToProps_Map} from '../store/reducers.js'\r\nimport '../styles/game.css';\r\nimport {tileNames,getmapTile} from \"../store/stores\";\r\n\r\n\r\nclass Map extends Component {\r\n    render() {\r\n        return (\r\n            <div id=\"mapDiv\">\r\n                <Provider store={store}>\r\n                    <WrappedMapTable />\r\n                </Provider>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nclass MapTable extends Component {\r\n    constructor(props){\r\n        super(props);\r\n\r\n        props.loadMap(\"\")\r\n    }\r\n\r\n\r\n    renderTable(){\r\n        const tileSize = this.props.tileSize;\r\n        const {map, mapWidth, mapHeight, reduceHP} = this.props;\r\n        const elements = [];\r\n\r\n        for (let i = 0; i < mapHeight; i++){\r\n            const row =[];\r\n\r\n            for (let j = 0; j < mapWidth; j++){\r\n                if (map[i][j].length > 0\r\n                    && (map[i][j][0].tile === tileNames.littleMountains\r\n                    || map[i][j][0].tile === tileNames.littleSwamp)\r\n                    &&(map[i][j][0].XShift !== null && map[i][j][0].YShift !== null)){\r\n                    let combinedTile =[[null, null, null],[null, null, null],[null, null, null]];\r\n                    for (let k = 0; k < map[i][j].length; k++){\r\n\r\n                        combinedTile[map[i][j][k].YShift + 1][map[i][j][k].XShift + 1] =\r\n                            (<MapTile key={`tile ${i} - ${j}: ${map[i][j][k].YShift + 1} - ${map[i][j][k].XShift + 1}`}\r\n                                      value={getmapTile(map[i][j][k].tile, this.props.tileSize, true)} />)\r\n                    }\r\n                    for (let k = 0; k < 9; k++){\r\n                        if (!combinedTile[Math.floor(k / 3)][k %3]){\r\n                            combinedTile[Math.floor(k / 3)][k % 3]\r\n                                = (<MapTile key={`tile ${i} - ${j}: ${Math.floor(k / 3)} - ${k %3}`}\r\n                                            value={getmapTile(tileNames.empty,this.props.tileSize, true)} />);\r\n                        }\r\n                    }\r\n                    const combinedDiv=[];\r\n                    for (let k = 0; k < 3; k++){\r\n                        const combinedRow = [];\r\n                        for (let t = 0; t < 3; t++){\r\n                            combinedRow.push(combinedTile[k][t])\r\n                        }\r\n                        combinedDiv.push(\r\n                            <div className=\"flex-row\">\r\n                                {combinedRow}\r\n                            </div>);\r\n                    }\r\n                    row.push(\r\n                        <div key={`div ${i} - ${j}`} className=\"mapTile flex-column\" style={{height: tileSize, width: tileSize }}>\r\n                            {combinedDiv}\r\n                        </div>);\r\n                }\r\n                else\r\n                for (let k = 0; k < map[i][j].length; k++){\r\n                    row.push(\r\n                        <MapTile key={`tile ${i} - ${j}`} value={getmapTile( map[i][j][k].tile, this.props.tileSize)} />\r\n                    );\r\n                }\r\n                if (map[i][j].length  === 0){\r\n                    const tile = /*{...*/getmapTile(tileNames.empty, this.props.tileSize,);\r\n                    row.push(\r\n                        <MapTile key={`tile ${i} - ${j}`} value={tile} />\r\n                    );\r\n                }\r\n            }\r\n            elements.push(\r\n                <div className=\"flex-row\">\r\n                    {row}\r\n                </div>\r\n            )\r\n        }\r\n        return (\r\n            <div className=\"flex-column flex-align-start\" style={{position: \"relative\"}} >\r\n                {this.loadTank()}\r\n                {this.loadTrails()}\r\n                {elements}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    loadTank(){\r\n        const tileSize= this.props.tileSize;\r\n        const {tank} = this.props;\r\n        if (!tank) return null;\r\n        const valueBody = {...getmapTile(tileNames.tankBody, this.props.tileSize),position: \"absolute\",\r\n            zIndex:9997,\r\n            left: tank.X * (tileSize + 2),\r\n            top: tank.Y * (tileSize + 2),\r\n            transform: `rotate(${tank.TankDirection}deg)`\r\n\r\n        };\r\n        const valueHead = {...getmapTile(tileNames.tankHead, this.props.tileSize),position: \"absolute\",\r\n            zIndex:9998,\r\n            left: tank.X * (tileSize + 2),\r\n            top: tank.Y * (tileSize + 2),\r\n            transform: `rotate(${tank.TurretDirection}deg)`\r\n        };\r\n        const status = this.props.tank.TurretStatus === 0\r\n            ? tileNames.tankStatus_NotLoaded\r\n            : this.props.tank.TurretStatus === 1\r\n                ? tileNames.tankStatus_PartLoaded\r\n                : tileNames.tankStatus_Loaded;\r\n\r\n        const valueStatus = {...getmapTile(status, this.props.tileSize),position: \"absolute\",\r\n            zIndex:9999,\r\n            left: tank.X * (tileSize + 2),\r\n            top: tank.Y * (tileSize + 2),\r\n        };\r\n        return (\r\n            [\r\n                 <div style={valueBody}></div>,\r\n                 <div style={valueHead}></div>,\r\n                 <div style={valueStatus}></div>\r\n            ])\r\n    }\r\n    loadTrails(){\r\n        const tileSize= this.props.tileSize;\r\n        const {mapTracers} = this.props;\r\n        if (mapTracers.length === 0) return null;\r\n\r\n        const arr = [];\r\n        const length = mapTracers.length;\r\n\r\n        for (let i = 0; i < length; i++){\r\n            const little = mapTracers[i].tag === tileNames.littleTrailDiag\r\n                            || mapTracers[i].tag === tileNames.littleTrailVert;\r\n            let left = mapTracers[i].X * (tileSize * (little? 3: 1) + 2)\r\n                + (little? (tileSize+2) * mapTracers[i].XShift :0);\r\n            let top = mapTracers[i].Y * (tileSize * (little? 3: 1) + 2)\r\n                + (little? (tileSize+2) * mapTracers[i].XShift :0);\r\n            const value = {...getmapTile(mapTracers[i].tag, this.props.tileSize),position: \"absolute\",\r\n                zIndex:9996,\r\n                left: left,\r\n                top: top,\r\n                transform: `rotate(${mapTracers[i].inverted? 90 : 0 }deg)`\r\n            };\r\n            arr.push(\r\n                <div style={value}></div>\r\n            )\r\n        }\r\n\r\n        return arr;\r\n    }\r\n\r\n    fileLoad(evt){\r\n        var files = evt.target.files; // FileList object\r\n        var reader = new FileReader();\r\n        const {loadMap} = this.props;\r\n        reader.onload = function(e) {\r\n            loadMap(e.target.result)\r\n            //console.log(typeof e.target.result)\r\n        };\r\n        reader.readAsText(files[0].slice());\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <div id=\"mapTitle\" className=\"flex-row\">\r\n                    <input type=\"file\" onChange={(event => this.fileLoad(event))} />\r\n                    <button style={{width:20}} onClick={()=>this.props.zoomIn()}>+</button>\r\n                    <button style={{width:20}} onClick={()=>this.props.zoomOut()}>-</button>\r\n                    <div >{this.props.tileSize} </div>\r\n                </div>\r\n                <div id=\"mapCont\" className=\"overflow-visible\" >\r\n                        {this.renderTable()}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nfunction MapTile(props) {\r\n    const value = {\r\n        backgroundImage: props.value.backgroundImage,\r\n        backgroundPosition:  props.value.backgroundPosition,\r\n        border: props.value.border,\r\n        height: props.value.height,\r\n        width: props.value.width,\r\n        backgroundSize: props.value.backgroundSize,\r\n    };\r\n    return(\r\n        <div className=\"mapTile\" style={value} onClickCapture={()=>props.onClick()}>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst WrappedMapTable = connect(putStateToProps_Map, putActionsToProps_Map)(MapTable);\r\n\r\nexport default Map","import React, {Component} from 'react';\nimport Menu from './components/menu.js'\nimport Map from './components/map.js'\nimport ReactDOM from 'react-dom';\nimport './styles/game.css';\nimport './styles/scroll.css';\n\n\nclass Game extends Component {\n    render() {\n        return (\n            <div style={{display:\"flex\", flexDirection:\"column\"}}>\n                <div id=\"snavigator\">Танковый Экипаж</div>\n                <div id=\"gridMain\" >\n                    <Map />\n                    <Menu />\n                </div>\n            </div>\n        )\n    }\n}\n\n// ========================================\n\nReactDOM.render(\n    <Game />,\n    document.getElementById('root')\n);\n\n"],"sourceRoot":""}