{"version":3,"sources":["store/actions.js","store/reducers.js","store/stores.js","components/info.js","components/menu.js","components/map.js","index.js"],"names":["actionsCode","CHANGE_SELECTED_BUTTON","ADD_PICTURE_IN_TD","REMOVE_PICTURE_IN_TD","CLEAR","actionsMap","REDUCE_HP","LOAD_MAP","ZOOM","actionsMap_Code","SELECT_ROW","ROTATE_TANK","ROTATE_TURRET","MOVE_TANK","MOVE_TANK_ROTATE_AND_FORWARD","LOAD","START","STOP","PAUSE","RESTART","NEXT_MOVE","FIRE","SAVE_ALG","LOAD_ALG","CHANGE_SPEED","actionsTypes","changeSelectedButton","index","className","type","payload","addPictureInTD","indexRow","removePictureInTD","SelectRow","reduceHP","i","j","loadMap","text","zoomIn","zoomOut","RotateTank","direction","RotateTurret","MoveTankForward","MoveTankBackward","MoveTankRotateLeftAndForward","MoveTankRotateRightAndForward","Load","Start","NextMove","Stop","Pause","Restart","Fire","SaveAlg","LoadAlg","IncreaseSpeed","DecreaseSpeed","ClearRows","codeReducer","state","arguments","length","undefined","initialState_Code","action","_action$payload","Object","objectSpread","gunnerSelectedIndex","driverSelectedIndex","chargerSelectedIndex","rows","slice","_action$payload2","gunner","getGameButtonImage","driver","charger","push","toConsumableArray","_action$payload3","pop","selectedRow","Math","min","currentRow","putStateToProps_Code","codeState","isPlay","isPause","putActionsToProps_Code","dispatch","bindActionCreators","selectRow","saveAlg","loadAlg","clear","restart","mapReducer","initialState_Map","mapArr","map","_action$payload4","tile","tileNames","_3hp","_2hp","_1hp","targetCount","initialMap","xmlDoc","window","DOMParser","parseFromString","ActiveXObject","async","loadXML","world","getElementsByTagName","width","Number","getAttribute","height","shellDistance","tankEl","turretstatus","innerHTML","tank","X","Y","TankDirection","getAngleByDirection","TurretDirection","TurretStatus","units","children","row","c","XShift","YShift","empty","tagName","swamp","mountains","littleMountains","littleSwamp","mapWidth","mapHeight","mapTracers","e","alert","tileSize","getPointByDirection","nextPoint","classT","gameButtons","concat","angle","transformAngle","North","East","South","West","NorthWest","NorthEast","SouthWest","SouthEast","getDirectionByAngle","map_codeReducer","initialState","newAngle","mapState","newAngleBody","newAngleTurret","status","console","log","_state$mapState","newX","newY","point","tag","trailVert","trailDiag","inverted","offsetX","offsetY","k","obj","littleTrailVert","littleTrailDiag","document","implementation","createDocument","program","createElement","command","elName","appendChild","data","XMLSerializer","serializeToString","file","Blob","navigator","msSaveOrOpenBlob","a","url","URL","createObjectURL","href","download","body","dataset","downloadurl","join","click","setTimeout","removeChild","revokeObjectURL","commands","nodeName","speed","tankBody","tankHead","tankStatus_NotLoaded","tankStatus_PartLoaded","tankStatus_Loaded","getmapTile","anotherTileSize","little","store","tS","getState","backgroundImage","backgroundPosition","positionArr","split","floor","backgroundSize","border","gunnerBtnsCount","driverBtnsCount","MoveForward","MoveBackward","TurnLeftAndMoveForward","TurnRightAndMoveForward","TurnLeftAndMoveBackward","TurnRightAndMoveBackward","NotLoaded","PartiallyLoaded","Ready","isNaN","left","getMenuButtons","createStore","shrinkGameButtonImage","image","shrinkgetMenuButtons","Info","props","react_default","style","position","right","padding","onClick","id","marginBottom","marginTop","alt","error","Menu","es","WrappedGameTable","WrappedMenuButtons","WrappedGameButtonsTable","Component","MenuButtons","_this","this","start","playNext","pause","_this2","nextMove","stop","_this3","playUntilRow","_this4","_this5","_this$props","currRowIndex","currRow","rotateTurret","fire","rotateTank","moveTankForward","moveTankBackward","_this$props$tank","msg","moveTankRotateLeftAndForward","moveTankRotateRightAndForward","_this$props$tank2","load","_this6","menu_InfoButton","WrappedTankInfo","SpeedRange","onIncreaseClick","increaseSpeed","onDecreaseClick","decreaseSpeed","display","MenuButton","handlePlay","handlePause","handleStop","handleUntilRow","handleNextStep","textAlign","connect","InfoButton","_this7","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","isOpen","setState","_this8","lib_default","onRequestClose","handleClick","TankInfo","valueBody","zIndex","top","transform","valueHead","valueStatus","loadTank","GameTable","_this9","arr","_loop","menu_GameTableRow","selected","current","value","OnRowClick","o","onClickTD_LMB","onClickTD_RMB","evt","_this10","files","target","reader","FileReader","onload","result","readAsText","_this11","handleSaveAlg","htmlFor","onChange","fileLoad","handleClear","renderRows","GameTableRow","_this12","GameTableCell","onContextMenu","preventDefault","GameButtonsTable","_this$props2","_loop2","GameButton","key","class","_loop3","_loop4","renderButtons","Map","WrappedMapTable","MapTable","sonic","elements","combinedTile","MapTile","combinedDiv","combinedRow","t","loadTrails","getElementById","play","volume","currentTime","renderTable","src","preload","loop","hideSonic","animation","onClickCapture","Game","flexDirection","components_map","menu","ReactDOM","render","src_Game"],"mappings":"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","file":"static/js/main.ba58b246.chunk.js","sourcesContent":["import {initialState_Map, tileNames} from './stores'\r\nimport {getAngleByDirection} from './stores'\r\n\r\nexport const actionsCode={\r\n    CHANGE_SELECTED_BUTTON: \"CHANGE_SELECTED_BUTTON\",\r\n    ADD_PICTURE_IN_TD: \"ADD_PICTURE_IN_TD\",\r\n    REMOVE_PICTURE_IN_TD: \"REMOVE_PICTURE_IN_TD\",\r\n    CLEAR: \"CLEAR\",\r\n};\r\nexport const actionsMap={\r\n    REDUCE_HP: \"REDUCE_HP\",\r\n    LOAD_MAP: \"LOAD_MAP\",\r\n    ZOOM: \"ZOOM\",\r\n};\r\nexport const actionsMap_Code={\r\n    SELECT_ROW: \"SELECT_ROW\",\r\n    ROTATE_TANK: \"ROTATE_TANK\",\r\n    ROTATE_TURRET: \"ROTATE_TURRET\",\r\n    MOVE_TANK: \"MOVE_TANK\",\r\n    MOVE_TANK_ROTATE_AND_FORWARD: \"MOVE_TANK_ROTATE_AND_FORWARD\",\r\n    LOAD: \"LOAD\",\r\n    START: \"START\",\r\n    STOP: \"STOP\",\r\n    PAUSE: \"PAUSE\",\r\n    RESTART: \"RESTART\",\r\n    NEXT_MOVE: \"NEXT_MOVE\",\r\n    FIRE: \"FIRE\",\r\n    SAVE_ALG: \"SAVE_ALG\",\r\n    LOAD_ALG: \"LOAD_ALG\",\r\n    CHANGE_SPEED: \"CHANGE_SPEED\",\r\n};\r\nexport const actionsTypes ={\r\n    MAP: actionsMap,\r\n    CODE: actionsCode,\r\n    MAP_CODE: actionsMap_Code\r\n};\r\n\r\n\r\n//----------------------------------------------\r\n\r\nexport const changeSelectedButton = (index, className) =>{\r\n    return{\r\n        type: actionsCode.CHANGE_SELECTED_BUTTON,\r\n        payload: {\r\n            index: index,\r\n            className: className\r\n        }\r\n    }\r\n};\r\nexport const addPictureInTD = (className , indexRow) => {\r\n    return{\r\n        type: actionsCode.ADD_PICTURE_IN_TD,\r\n        payload: {\r\n            className: className,\r\n            indexRow: indexRow\r\n        }\r\n    };\r\n};\r\nexport const removePictureInTD = (className , indexRow) => {\r\n    return{\r\n        type: actionsCode.REMOVE_PICTURE_IN_TD,\r\n        payload: {\r\n            className: className,\r\n            indexRow: indexRow\r\n        }\r\n    };\r\n};\r\nexport const SelectRow = (index) => {\r\n    return{\r\n        type: actionsMap_Code.SELECT_ROW,\r\n        payload: index\r\n    };\r\n};\r\n\r\n//-------------------------------------------------\r\n\r\nexport const reduceHP = (i, j) => {\r\n    return {\r\n        type: actionsMap.REDUCE_HP,\r\n        payload: {\r\n            i:i,\r\n            j:j\r\n        }\r\n    }\r\n};\r\nexport const loadMap = (text) => {\r\n    return {\r\n        type: actionsMap.LOAD_MAP,\r\n        payload: text\r\n    }\r\n};\r\nexport const zoomIn = () =>{\r\n    return {\r\n        type: actionsMap.ZOOM,\r\n        payload: 10\r\n    }\r\n};\r\nexport const zoomOut = () =>{\r\n    return {\r\n        type: actionsMap.ZOOM,\r\n        payload: -10\r\n    }\r\n};\r\n\r\n//----------------------------------------------\r\n\r\nexport const RotateTank = (direction) => {\r\n    return {\r\n        type: actionsMap_Code.ROTATE_TANK,\r\n        payload: direction\r\n    }\r\n};\r\nexport const RotateTurret = (direction) => {\r\n    return {\r\n        type: actionsMap_Code.ROTATE_TURRET,\r\n        payload: direction\r\n    }\r\n};\r\nexport const MoveTankForward = () => {\r\n    return {\r\n        type: actionsMap_Code.MOVE_TANK,\r\n        payload: true\r\n    }\r\n};\r\nexport const MoveTankBackward = () => {\r\n    return {\r\n        type: actionsMap_Code.MOVE_TANK,\r\n        payload: false\r\n    }\r\n};\r\nexport const MoveTankRotateLeftAndForward = () => {\r\n    return {\r\n        type: actionsMap_Code.MOVE_TANK_ROTATE_AND_FORWARD,\r\n        payload: true\r\n    }\r\n};\r\nexport const MoveTankRotateRightAndForward = () => {\r\n    return {\r\n        type: actionsMap_Code.MOVE_TANK_ROTATE_AND_FORWARD,\r\n        payload: false\r\n    }\r\n};\r\nexport const Load = () => {\r\n    return {\r\n        type: actionsMap_Code.LOAD,\r\n    }\r\n};\r\nexport const Start = () => {\r\n    return {\r\n        type: actionsMap_Code.START,\r\n    }\r\n};\r\nexport const NextMove = () => {\r\n    return {\r\n        type: actionsMap_Code.NEXT_MOVE,\r\n    }\r\n};\r\nexport const Stop = () => {\r\n    return {\r\n        type: actionsMap_Code.STOP,\r\n    }\r\n};\r\nexport const Pause = () => {\r\n    return {\r\n        type: actionsMap_Code.PAUSE,\r\n    }\r\n};\r\nexport const Restart = () => {\r\n    return {\r\n        type: actionsMap_Code.RESTART,\r\n        payload: \"\"\r\n    }\r\n};\r\nexport const Fire = () => {\r\n    return {\r\n        type: actionsMap_Code.FIRE,\r\n    }\r\n};\r\nexport const SaveAlg = () => {\r\n    return {\r\n        type: actionsMap_Code.SAVE_ALG,\r\n    }\r\n};\r\nexport const LoadAlg = (text) => {\r\n    return {\r\n        type: actionsMap_Code.LOAD_ALG,\r\n        payload: text,\r\n    }\r\n};\r\nexport const IncreaseSpeed = () => {\r\n    return {\r\n        type: actionsMap_Code.CHANGE_SPEED,\r\n        payload: true\r\n    }\r\n};\r\nexport const DecreaseSpeed = () => {\r\n    return {\r\n        type: actionsMap_Code.CHANGE_SPEED,\r\n        payload: false\r\n    }\r\n};\r\nexport const ClearRows = () => {\r\n    return {\r\n        type: actionsCode.CLEAR,\r\n    }\r\n};\r\n\r\n","import {bindActionCreators} from 'redux'\r\nimport {getGameButtonImage,\r\n        tileNames,getmapTile,\r\n        initialState, initialState_Map, initialState_Code} from \"./stores.js\";\r\nimport {actionsTypes, actionsCode, actionsMap_Code, actionsMap ,\r\n        reduceHP, loadMap, zoomIn , zoomOut,\r\n        RotateTank, RotateTurret,Load, Start, Stop, NextMove, Restart, Fire, Pause,SaveAlg, LoadAlg,\r\n        IncreaseSpeed, DecreaseSpeed,ClearRows,\r\n        MoveTankForward, MoveTankBackward, MoveTankRotateLeftAndForward,\r\n        MoveTankRotateRightAndForward,\r\n        addPictureInTD, changeSelectedButton, removePictureInTD, SelectRow,} from \"./actions.js\";\r\nimport {gameButtons, getAngleByDirection, getDirectionByAngle, transformAngle} from \"./stores\";\r\n\r\n\r\nexport const rootReducer = (state = initialState, action) =>{\r\n    if (actionsTypes.MAP[`${action.type}`] +\"\" !== \"undefined\")\r\n        return {...state, mapState: mapReducer(state.mapState, action)};\r\n\r\n    if (actionsTypes.CODE[`${action.type}`]+\"\" !== \"undefined\")\r\n        return {...state, codeState: codeReducer(state.codeState, action)};\r\n\r\n    if (actionsTypes.MAP_CODE[`${action.type}`]+\"\" !== \"undefined\")\r\n        return map_codeReducer(state, action);\r\n    return state;\r\n};\r\n\r\n//-----------------------------------------------------------\r\n\r\nexport const codeReducer = (state = initialState_Code , action) => {\r\n    switch (action.type) {\r\n        case actionsCode.CHANGE_SELECTED_BUTTON:\r\n        {\r\n            const {index, className} = action.payload;\r\n\r\n            if (className === \"gunner\") {\r\n                return {\r\n                    ...state,\r\n                    gunnerSelectedIndex: index,\r\n                }\r\n            }\r\n            if (className === \"driver\") {\r\n                return {\r\n                    ...state,\r\n                    driverSelectedIndex: index,\r\n                }\r\n            }\r\n            if (className === \"charger\") {\r\n                return {\r\n                    ...state,\r\n                    chargerSelectedIndex: index,\r\n                }\r\n            }\r\n            return state;\r\n        }\r\n        case actionsCode.ADD_PICTURE_IN_TD:\r\n        {\r\n            const rows = state.rows.slice();\r\n            const { indexRow, className } = action.payload;\r\n\r\n            rows[indexRow]={\r\n                gunner: className === \"gunner\" ? getGameButtonImage(\"gunner\", state.gunnerSelectedIndex ) : rows[indexRow].gunner,\r\n                driver: className === \"driver\" ? getGameButtonImage(\"driver\", state.driverSelectedIndex ) : rows[indexRow].driver,\r\n                charger: className === \"charger\" ? getGameButtonImage(\"charger\", state.chargerSelectedIndex ) : rows[indexRow].charger\r\n            };\r\n\r\n            while (\r\n                rows[rows.length-1].gunner != null ||\r\n                rows[rows.length-1].driver != null ||\r\n                rows[rows.length-1].charger != null)\r\n            {\r\n                rows.push(\r\n                    {\r\n                        gunner: null,\r\n                        driver: null,\r\n                        charger: null\r\n                    });\r\n            }\r\n\r\n\r\n            return {...state, rows: rows}\r\n        }\r\n        case actionsCode.REMOVE_PICTURE_IN_TD:\r\n        {\r\n            let rows = [...state.rows];\r\n            const { indexRow, className } = action.payload;\r\n\r\n            // console.log(state);\r\n            // console.log(rows.length);\r\n            // console.log(JSON.stringify(rows ));\r\n\r\n            rows[indexRow] = {\r\n                gunner: className === \"gunner\" ? null : rows[indexRow].gunner,\r\n                driver: className === \"driver\" ? null : rows[indexRow].driver,\r\n                charger: className === \"charger\" ? null : rows[indexRow].charger\r\n            };\r\n\r\n            // console.log(rows);\r\n\r\n            while (\r\n                rows.length > 0 &&\r\n                rows[rows.length-1].gunner == null &&\r\n                rows[rows.length-1].driver == null &&\r\n                rows[rows.length-1].charger == null)\r\n            {\r\n                rows.pop();\r\n            }\r\n            rows.push(\r\n                {\r\n                    gunner: null,\r\n                    driver: null,\r\n                    charger: null\r\n                });\r\n\r\n            return {...state, rows: rows, selectedRow: Math.min(state.selectedRow, rows.length-1)}\r\n        }\r\n        case actionsCode.CLEAR:{\r\n            return {\r\n                ...state,  rows: [{gunner:null, driver:null, charger:null}],\r\n                selectedRow: 0, currentRow:0\r\n            }\r\n        }\r\n        default:\r\n            break;\r\n    }\r\n    return state\r\n};\r\n\r\nexport const putStateToProps_Code = (state) =>{\r\n\r\n    return {\r\n        gunnerSelectedIndex: state.codeState.gunnerSelectedIndex,\r\n        driverSelectedIndex: state.codeState.driverSelectedIndex,\r\n        chargerSelectedIndex: state.codeState.chargerSelectedIndex,\r\n        selectedRow: state.codeState.selectedRow,\r\n        currentRow: state.codeState.currentRow,\r\n        rows: state.codeState.rows,\r\n        isPlay: state.codeState.isPlay,\r\n        isPause: state.codeState.isPause,\r\n    }\r\n};\r\nexport const putActionsToProps_Code = (dispatch) => {\r\n    return {\r\n        changeSelectedButton: bindActionCreators(changeSelectedButton, dispatch),\r\n        addPictureInTD: bindActionCreators(addPictureInTD, dispatch),\r\n        removePictureInTD: bindActionCreators(removePictureInTD, dispatch),\r\n        selectRow: bindActionCreators(SelectRow, dispatch),\r\n        saveAlg: bindActionCreators(SaveAlg, dispatch),\r\n        loadAlg: bindActionCreators(LoadAlg, dispatch),\r\n        clear: bindActionCreators(ClearRows, dispatch),\r\n        restart: bindActionCreators(Restart, dispatch),\r\n    }\r\n};\r\n\r\n//-----------------------------------------------------------\r\n\r\nexport const mapReducer = (state = initialState_Map, action) => {\r\n    switch (action.type) {\r\n        case actionsMap.REDUCE_HP: {\r\n            let mapArr = state.map.slice();\r\n            let {i,j} = action.payload;\r\n            let img = mapArr[j][i][0];\r\n\r\n            switch (img.tile) {\r\n                case tileNames._3hp:\r\n                    mapArr[j][i][0] = {tile: tileNames._2hp };\r\n                    return {...state, map: mapArr};\r\n\r\n                case tileNames._2hp:\r\n                    mapArr[j][i][0] = {tile: tileNames._1hp };\r\n                    return {...state, map: mapArr};\r\n\r\n                case tileNames._1hp:\r\n                    mapArr[j][i] = [];\r\n                    return {...state, map: mapArr, targetCount: state.targetCount - 1 };\r\n            }\r\n            return state\r\n        }\r\n        case actionsMap.LOAD_MAP:{\r\n            const text = action.payload === \"\"? state.initialMap : action.payload;\r\n\r\n            let xmlDoc = null;\r\n\r\n            try {\r\n                if (window.DOMParser) {\r\n                    // code for modern browsers\r\n                    const parser = new DOMParser();\r\n                    xmlDoc = parser.parseFromString(text,\"text/xml\");\r\n                }\r\n                else {\r\n                    // code for old IE browsers\r\n                    // eslint-disable-next-line\r\n                    xmlDoc = new ActiveXObject(\"Microsoft.XMLDOM\");\r\n                    xmlDoc.async = false;\r\n                    xmlDoc.loadXML(text);\r\n                }\r\n\r\n                let targetCount = 0;\r\n\r\n                const world = xmlDoc.getElementsByTagName('World')[0];\r\n                const width = Number(world.getAttribute('Width'));\r\n                const height = Number(world.getAttribute('Height'));\r\n                const shellDistance = Number(world.getAttribute('ShellDistance'));\r\n\r\n                const tankEl = world.getElementsByTagName('Tank')[0];\r\n                let turretstatus = 0;\r\n                switch (tankEl.getElementsByTagName('TurretStatus')[0].innerHTML) {\r\n                    case \"PartiallyLoaded\":\r\n                        turretstatus = 1;\r\n                        break;\r\n                    case \"Ready\":\r\n                        turretstatus = 2;\r\n                        break;\r\n                }\r\n\r\n\r\n                const tank = {\r\n                    X: Number(tankEl.getAttribute('X')),\r\n                    Y: Number(tankEl.getAttribute('Y')),\r\n                    TankDirection: getAngleByDirection(tankEl.getElementsByTagName('TankDirection')[0].innerHTML),\r\n                    TurretDirection: getAngleByDirection(tankEl.getElementsByTagName('TurretDirection')[0].innerHTML),\r\n                    TurretStatus: turretstatus,\r\n                };\r\n                const units = world.getElementsByTagName('Units')[0].children;\r\n\r\n                let map = [];\r\n                for (let i = 0 ; i < height; i++){\r\n                    let row = [];\r\n                    for (let j = 0 ; j < width; j++) {\r\n                        row.push([]);\r\n                    }\r\n                    map.push(row)\r\n                }\r\n\r\n\r\n                for(let c = 0 ; c < units.length; c++){\r\n                    const X = Number(units[c].getAttribute('X'));\r\n                    const Y = Number(units[c].getAttribute('Y'));\r\n                    let XShift = units[c].getAttribute('XShift');\r\n                    if (XShift)\r\n                        XShift = Number(units[c].getAttribute('XShift'));\r\n                    let YShift = units[c].getAttribute('YShift');\r\n                    if (YShift)\r\n                        YShift = Number(units[c].getAttribute('YShift'));\r\n\r\n                    let tile = tileNames.empty;\r\n                    switch (units[c].tagName) {\r\n                        case \"Swamp\":{\r\n                            tile = (tileNames.swamp);\r\n                            break;\r\n                        }\r\n                        case \"Rock\":{\r\n                            tile = (tileNames.mountains);\r\n                            break;\r\n                        }\r\n                        case \"LittleRock\":{\r\n                            tile = (tileNames.littleMountains);\r\n                            break;\r\n                        }\r\n                        case \"LittleSwamp\":{\r\n                            tile = (tileNames.littleSwamp);\r\n                            break;\r\n                        }\r\n                        case \"LittlePillbox\":{\r\n                            targetCount+=1;\r\n                            tile = (tileNames._1hp);\r\n                            break;\r\n                        }\r\n                        case \"MediumPillbox\":{\r\n                            targetCount+=1;\r\n                            tile = (tileNames._2hp);\r\n                            break;\r\n                        }\r\n                        case \"BigPillbox\":{\r\n                            targetCount+=1;\r\n                            tile = (tileNames._3hp);\r\n                            break;\r\n                        }\r\n                    }\r\n                    map[Y][X].push({ XShift: XShift, YShift: YShift, tile: tile});\r\n                }\r\n                return {...state,\r\n                        shellDistance: shellDistance,\r\n                        tank: tank,\r\n                        mapWidth: width,\r\n                        mapHeight: height,\r\n                        map: map,\r\n                        mapTracers:[],\r\n                        initialMap: text,\r\n                        targetCount: targetCount\r\n                }\r\n            }\r\n            catch (e) {\r\n                alert('Ошибка файл карты неправильно сформирован');\r\n            }\r\n            break;\r\n        }\r\n        case actionsMap.ZOOM:{\r\n            let {tileSize} = state;\r\n            tileSize += action.payload;\r\n            if (tileSize < 20)\r\n                {tileSize = 20;}\r\n            if (tileSize > 80)\r\n                {tileSize = 80;}\r\n            return {...state, tileSize: tileSize};\r\n        }\r\n    }\r\n    return state\r\n};\r\n\r\nexport const putStateToProps_Map = (state) =>{\r\n    return {\r\n        shellDistance: state.mapState.shellDistance,\r\n        tank: state.mapState.tank,\r\n        mapWidth: state.mapState.mapWidth,\r\n        mapHeight: state.mapState.mapHeight,\r\n        map: state.mapState.map,\r\n        mapTracers: state.mapState.mapTracers,\r\n        tileSize: state.mapState.tileSize,\r\n    }\r\n};\r\nexport const putActionsToProps_Map = (dispatch) => {\r\n    return {\r\n        reduceHP: bindActionCreators(reduceHP, dispatch),\r\n        loadMap: bindActionCreators(loadMap, dispatch),\r\n        zoomIn: bindActionCreators(zoomIn, dispatch),\r\n        zoomOut: bindActionCreators(zoomOut, dispatch),\r\n        restart:bindActionCreators(Restart, dispatch),\r\n    }\r\n};\r\n\r\n//-----------------------------------------------------------\r\n\r\nconst getPointByDirection = (className, direction) =>{\r\n    let nextPoint= [0,0];\r\n\r\n    const classT = gameButtons[`${className}`];\r\n\r\n    switch (getDirectionByAngle(className, direction)) {\r\n        case classT.North:\r\n            nextPoint = [0, -1];\r\n            break;\r\n        case classT.NorthEast:\r\n            nextPoint = [1, -1];\r\n            break;\r\n        case classT.East:\r\n            nextPoint = [1, 0];\r\n            break;\r\n        case classT.SouthEast:\r\n            nextPoint = [1, 1];\r\n            break;\r\n        case classT.South:\r\n            nextPoint = [0, 1];\r\n            break;\r\n        case classT.SouthWest:\r\n            nextPoint = [-1, 1];\r\n            break;\r\n        case classT.West:\r\n            nextPoint = [-1, 0];\r\n            break;\r\n        case classT.NorthWest:\r\n            nextPoint = [-1, -1];\r\n            break;\r\n    }\r\n    return nextPoint;\r\n}\r\n\r\n// function getXMLTag(className, tag ) {\r\n//     switch (className) {\r\n//         case \"gunner\":\r\n//             switch (tag) {\r\n//                 case gameButtons.gunner.North:\r\n//                     return \"PauseGunner\";\r\n//                 case gameButtons.gunner.NorthEast:\r\n//                     return \"TurnTurretClockwise45\";\r\n//                 case gameButtons.gunner.East:\r\n//                     return \"TurnTurretClockwise90\";\r\n//                 case gameButtons.gunner.SouthEast:\r\n//                     return \"TurnTurretClockwise135\";\r\n//                 case gameButtons.gunner.South:\r\n//                     return \"TurnTurretAround\";\r\n//                 case gameButtons.gunner.SouthWest:\r\n//                     return \"TurnTurretCounterClockwise135\";\r\n//                 case gameButtons.gunner.West:\r\n//                     return \"TurnTurretCounterClockwise90\";\r\n//                 case gameButtons.gunner.NorthWest:\r\n//                     return \"TurnTurretCounterClockwise45\";\r\n//                 case gameButtons.gunner.Fire:\r\n//                     return \"FireCommand\";\r\n//                 case gameButtons.gunner.Pause:\r\n//                     return \"PauseGunner\"\r\n//             }\r\n//             break;\r\n//         case \"driver\":\r\n//             break;\r\n//         case \"charger\":\r\n//             break;\r\n//         default:\r\n//     }\r\n//     return \"\"\r\n// }\r\n\r\nexport const map_codeReducer = (state = initialState, action) =>{\r\n    switch (action.type) {\r\n        case actionsMap_Code.SELECT_ROW:\r\n        {\r\n            return {...state, codeState:{...state.codeState, selectedRow: action.payload }}\r\n        }\r\n        case actionsMap_Code.ROTATE_TURRET:\r\n        {\r\n            const newAngle = transformAngle(getAngleByDirection(action.payload)\r\n                                + state.mapState.tank.TurretDirection);\r\n            if (state.mapState.tank)\r\n                return {...state, mapState:{...state.mapState,\r\n                        tank: {...state.mapState.tank,\r\n                            TurretDirection: newAngle }}};\r\n            break;\r\n        }\r\n        case actionsMap_Code.ROTATE_TANK:\r\n        {\r\n            const newAngleBody = transformAngle(getAngleByDirection(action.payload)\r\n                                    + state.mapState.tank.TankDirection);\r\n            const newAngleTurret = transformAngle(getAngleByDirection(action.payload)\r\n                                    + state.mapState.tank.TurretDirection);\r\n            if (state.mapState.tank)\r\n                return {...state, mapState:{...state.mapState,\r\n                        tank: {...state.mapState.tank,\r\n                            TankDirection: newAngleBody,\r\n                            TurretDirection: newAngleTurret}}};\r\n            break;\r\n        }\r\n        case actionsMap_Code.MOVE_TANK:\r\n        {\r\n            const {tank} = state.mapState;\r\n\r\n            if (tank) {\r\n                let nextPoint = getPointByDirection(\"driver\",tank.TankDirection);\r\n\r\n                if (!action.payload) {\r\n                    nextPoint[0] = nextPoint[0] * -1;\r\n                    nextPoint[1] = nextPoint[1] * -1;\r\n                }\r\n\r\n\r\n                return {\r\n                    ...state, mapState: {\r\n                        ...state.mapState,\r\n                        tank: {\r\n                            ...state.mapState.tank,\r\n                            X: tank.X + nextPoint[0], Y: tank.Y + nextPoint[1]\r\n                        }\r\n                    }\r\n                };\r\n            }\r\n            break;\r\n        }\r\n        case actionsMap_Code.MOVE_TANK_ROTATE_AND_FORWARD:\r\n        {\r\n            const {tank} = state.mapState;\r\n\r\n            if (tank) {\r\n\r\n                const newAngleBody = transformAngle( tank.TankDirection + (action.payload? -45 : 45 ));\r\n                const newAngleTurret = transformAngle( tank.TurretDirection + (action.payload? -45 : 45 ));\r\n\r\n                let nextPoint = getPointByDirection(\"driver\",newAngleBody);\r\n\r\n                return {\r\n                    ...state, mapState: {\r\n                        ...state.mapState,\r\n                        tank: {\r\n                            ...state.mapState.tank,\r\n                            X: tank.X + nextPoint[0], Y: tank.Y +  nextPoint[1],\r\n                            TankDirection: newAngleBody, TurretDirection: newAngleTurret\r\n                        }\r\n                    }\r\n                };\r\n            }\r\n            break;\r\n        }\r\n        case actionsMap_Code.LOAD:\r\n        {\r\n            if (state.mapState.tank) {\r\n                let status = state.mapState.tank.TurretStatus + 1;\r\n                if (status === 3){\r\n                    status = 0;\r\n                }\r\n                return {\r\n                    ...state, mapState: {\r\n                        ...state.mapState,\r\n                        tank: {\r\n                            ...state.mapState.tank,\r\n                            TurretStatus: status\r\n                        }\r\n                    }\r\n                };\r\n            }\r\n            break;\r\n        }\r\n        case actionsMap_Code.START:\r\n        {\r\n            const mapState = !state.codeState.isPause\r\n                ?  mapReducer(state.mapState,\r\n                {type: actionsMap.LOAD_MAP, payload:\"\"})\r\n                :{} ;\r\n\r\n            return {\r\n                ...state, codeState: {\r\n                    ...state.codeState,\r\n                    isPlay: true,\r\n                    currentRow: state.codeState.isPause? state.codeState.currentRow: 0,\r\n                     isPause: false\r\n                }, mapState: { ...state.mapState,\r\n                    ...mapState}\r\n            };\r\n        }\r\n        case actionsMap_Code.STOP:\r\n        {\r\n            if(state.mapState.targetCount <= 0)\r\n                alert(`Все цели уничтожены. Поздравляю!!\\nБыло задействовано ${state.codeState.rows.length-1} строк`);\r\n            else\r\n                alert('Не все цели уничтожены :((');\r\n\r\n            return {\r\n                ...state, codeState: {\r\n                    ...state.codeState, isPlay: false, isPause: false\r\n                }\r\n            };\r\n        }\r\n        case actionsMap_Code.PAUSE:\r\n        {\r\n            return {\r\n                ...state, codeState: {\r\n                    ...state.codeState, isPlay: false, isPause: true\r\n                }\r\n            };\r\n        }\r\n        case actionsMap_Code.RESTART:\r\n        {\r\n            return {\r\n                ...state,\r\n                mapState: {\r\n                    ...state.mapState, ...mapReducer(\r\n                        state.mapState,\r\n                        {type: actionsMap.LOAD_MAP, payload:\"\"}\r\n                    )\r\n                },\r\n                codeState: {\r\n                    ...state.codeState, isPlay: false, isPause: false, currentRow:0, selectedRow:0,\r\n                }\r\n            };\r\n        }\r\n        case actionsMap_Code.NEXT_MOVE:\r\n        {\r\n            // if (state.codeState.isPlay) {\r\n                const index = state.codeState.currentRow + 1;\r\n                return {\r\n                    ...state, codeState: {\r\n                        ...state.codeState, currentRow: index\r\n                    }\r\n                };\r\n            // }\r\n            break;\r\n        }\r\n        case actionsMap_Code.FIRE:\r\n        {\r\n            if (state.mapState.tank) {\r\n                console.log(`FIRE from ${state.mapState.tank.X}-${state.mapState.tank.Y}`);\r\n\r\n                const {map, tank, shellDistance, mapTracers} = state.mapState;\r\n                const {X, Y} = tank;\r\n\r\n                let newX = X;\r\n                let newY = Y;\r\n\r\n                const point = getPointByDirection(\"gunner\", tank.TurretDirection);\r\n\r\n                for (let i= 0;  i < shellDistance; i++){\r\n                    newX += point[0];\r\n                    newY += point[1];\r\n\r\n                    if (newX >= state.mapState.mapWidth\r\n                        || newX < 0\r\n                        || newY >= state.mapState.mapHeight\r\n                        || newY < 0)\r\n                        break;\r\n\r\n                    if (map[newY][newX].length > 0 ){\r\n                        switch (map[newY][newX][0].tile) {\r\n                            case tileNames.mountains:\r\n                                return {...state, mapState:{...state.mapState,\r\n                                        mapTracers: mapTracers,\r\n                                        tank: {...state.mapState.tank, TurretStatus: 0}}};\r\n\r\n                            case tileNames._3hp:\r\n                            case tileNames._2hp:\r\n                            case tileNames._1hp:\r\n                                mapTracers.push(\r\n                                    {\r\n                                        tag: point[0] * point[1] === 0? tileNames.trailVert: tileNames.trailDiag,\r\n                                        X: newX,\r\n                                        Y: newY,\r\n                                        inverted: point[1] === 0 || point[0] * point[1] > 0,\r\n                                    }\r\n                                );\r\n                                return {...state, mapState:{...state.mapState,\r\n                                        ...mapReducer(state.mapState,reduceHP(newX, newY)),\r\n                                        mapTracers: mapTracers,\r\n                                        tank: {...state.mapState.tank, TurretStatus: 0}}};\r\n\r\n                            case tileNames.swamp:\r\n                            case tileNames.empty:\r\n                                if (map[newY][newX].length === 1)\r\n                                    mapTracers.push(\r\n                                        {\r\n                                            tag: point[0] * point[1] === 0? tileNames.trailVert: tileNames.trailDiag,\r\n                                            X: newX,\r\n                                            Y: newY,\r\n                                            inverted: point[1] === 0 || point[0] * point[1] > 0,\r\n                                        }\r\n                                    );\r\n                                continue;\r\n                        }\r\n\r\n                        let offsetX = point[0] * -1;\r\n                        let offsetY = point[1] * -1;\r\n                        let j;\r\n                        for (j =0; j < 3; j++ ){\r\n                            let k = 0;\r\n                            for (k=0; k < map[newY][newX].length; k++ ){\r\n                                const obj = map[newY][newX][k];\r\n                                if (offsetX === obj.XShift\r\n                                    && offsetY === obj.YShift\r\n                                    && obj.tile === tileNames.littleMountains){\r\n                                    break;\r\n                                }\r\n                            }\r\n                            if (k !== map[newY][newX].length){\r\n                                break;\r\n                            }\r\n\r\n                            mapTracers.push(\r\n                                {\r\n                                    tag: point[0] * point[1] === 0? tileNames.littleTrailVert\r\n                                                                    : tileNames.littleTrailDiag,\r\n                                    X: newX,\r\n                                    Y: newY,\r\n                                    XShift: offsetX,\r\n                                    YShift: offsetY,\r\n                                    inverted: point[1] === 0 || point[0] * point[1] > 0,\r\n                                }\r\n                            );\r\n                            offsetX += point[0];\r\n                            offsetY += point[1];\r\n                        }\r\n                        if (j < 3)\r\n                            return {\r\n                                ...state, mapState: {\r\n                                    ...state.mapState, tank: {\r\n                                        ...state.mapState.tank,\r\n                                        TurretStatus: 0\r\n                                    },\r\n                                    mapTracers: mapTracers\r\n                                }\r\n                            };\r\n\r\n                        for (;j > 0; j--){\r\n                            mapTracers.pop()\r\n                        }\r\n                    }\r\n\r\n                    mapTracers.push(\r\n                        {\r\n                            tag: point[0] * point[1] === 0? tileNames.trailVert: tileNames.trailDiag,\r\n                            X: newX,\r\n                            Y: newY,\r\n                            inverted: point[1] === 0 || point[0] * point[1] > 0,\r\n                        }\r\n                    );\r\n                }\r\n\r\n                return {\r\n                    ...state, mapState: {\r\n                        ...state.mapState, tank: {\r\n                            ...state.mapState.tank,\r\n                            TurretStatus: 0\r\n                        },\r\n                        mapTracers: mapTracers\r\n                    }\r\n                };\r\n            }\r\n            break;\r\n        }\r\n        case actionsMap_Code.SAVE_ALG:{\r\n            const filename = \"Program.tankcrewprogram\";\r\n            const xmlDoc = document.implementation.createDocument(\"\", \"\", null );\r\n\r\n            const program = xmlDoc.createElement(\"Program\");\r\n\r\n            const rows = state.codeState.rows;\r\n            for (let i = 0; i < rows.length-1; i++){\r\n                const command = xmlDoc.createElement(\"Command\");\r\n                let elName = rows[i].gunner !== null\r\n                    ? rows[i].gunner.tag\r\n                    : gameButtons.gunner.Pause;\r\n                command.appendChild(xmlDoc.createElement(elName));\r\n\r\n                elName = rows[i].driver !== null\r\n                    ? rows[i].driver.tag\r\n                    : gameButtons.driver.Pause;\r\n                command.appendChild(xmlDoc.createElement(elName));\r\n\r\n                elName = rows[i].charger !== null\r\n                    ? \"LoadTurret_\" + rows[i].charger.tag\r\n                    : gameButtons.charger.Pause;\r\n                command.appendChild(xmlDoc.createElement(elName));\r\n\r\n                program.appendChild(command);\r\n            }\r\n\r\n            xmlDoc.appendChild(program);\r\n\r\n            const data = `<?xml version=\"1.0\" encoding=\"utf-8\"?>` + ( new XMLSerializer().serializeToString(xmlDoc));\r\n\r\n            const file = new Blob([data], {type: 'text/plain'});\r\n            if (window.navigator.msSaveOrOpenBlob) // IE10+\r\n                window.navigator.msSaveOrOpenBlob(file, filename);\r\n            else { // Others\r\n                const a = document.createElement(\"a\"),\r\n                    url = URL.createObjectURL(file);\r\n                a.href = url;\r\n                a.download = filename;\r\n                document.body.appendChild(a);\r\n\r\n                a.dataset.downloadurl = ['text/plain', a.download, a.href].join(':');\r\n\r\n                a.click();\r\n                setTimeout(function() {\r\n                    document.body.removeChild(a);\r\n                    window.URL.revokeObjectURL(url);\r\n                }, 0);\r\n            }\r\n            return state;\r\n        }\r\n        case actionsMap_Code.LOAD_ALG:{\r\n            let text = action.payload;\r\n\r\n            // const text = action.payload === \"\"? state.initialMap : action.payload;\r\n\r\n            let xmlDoc = null;\r\n\r\n            try {\r\n                if (window.DOMParser) {\r\n                    // code for modern browsers\r\n                    const parser = new DOMParser();\r\n                    xmlDoc = parser.parseFromString(text,\"text/xml\");\r\n                }\r\n                else {\r\n                    // code for old IE browsers\r\n                    // eslint-disable-next-line\r\n                    xmlDoc = new ActiveXObject(\"Microsoft.XMLDOM\");\r\n                    xmlDoc.async = false;\r\n                    xmlDoc.loadXML(text);\r\n                }\r\n\r\n                const program = xmlDoc.getElementsByTagName('Program')[0];\r\n                const commands = program.getElementsByTagName(\"Command\");\r\n\r\n                let rows = [];\r\n\r\n                for(let i = 0 ; i < commands.length; i++){\r\n\r\n                    const row = {gunner: null, driver: null, charger: null};\r\n\r\n                    const gunner = commands[i].children[0];\r\n                    const driver = commands[i].children[1];\r\n                    const charger = commands[i].children[2];\r\n\r\n                    row.gunner  = getGameButtonImage(\"gunner\", gunner.nodeName);\r\n                    row.driver  = getGameButtonImage(\"driver\", driver.nodeName);\r\n                    row.charger  = getGameButtonImage(\"charger\", charger.nodeName);\r\n\r\n                    rows.push(row);\r\n                }\r\n                while (rows.length > 0\r\n                    && rows[rows.length-1].gunner.tag === gameButtons.gunner.Pause\r\n                    && rows[rows.length-1].driver.tag === gameButtons.driver.Pause\r\n                    && rows[rows.length-1].charger.tag === gameButtons.charger.Pause )\r\n                {\r\n                    rows.pop();\r\n                }\r\n\r\n                rows.push({gunner: null, driver: null, charger: null});\r\n\r\n                return {...state, codeState: {...state.codeState, rows: rows}}\r\n            }\r\n            catch (e) {\r\n                alert('Ошибка файл алгоритма неправильно сформирован');\r\n            }\r\n            break;\r\n        }\r\n        case actionsMap_Code.CHANGE_SPEED:{\r\n\r\n            let speed = state.codeState.speed;\r\n\r\n            speed += 100 * (action.payload? -1 : 1);\r\n\r\n            if (speed > 500)\r\n                speed = 500;\r\n\r\n            if (speed < 100)\r\n                speed = 100;\r\n\r\n            return {\r\n                ...state, codeState: {\r\n                    ...state.codeState, speed: speed\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return state\r\n};\r\n\r\nexport const putStateToProps_AlgButtons = (state) =>{\r\n\r\n    return {\r\n        selectedRow: state.codeState.selectedRow,\r\n        currentRow: state.codeState.currentRow,\r\n        rows: state.codeState.rows,\r\n        shellDistance: state.mapState.shellDistance,\r\n        tank: state.mapState.tank,\r\n        mapWidth: state.mapState.width,\r\n        mapHeight: state.mapState.height,\r\n        map: state.mapState.map,\r\n        isPlay: state.codeState.isPlay,\r\n        isPause: state.codeState.isPause,\r\n        speed: state.codeState.speed\r\n    }\r\n};\r\nexport const putActionsToProps_AlgButtons = (dispatch) => {\r\n    return {\r\n        rotateTurret: bindActionCreators(RotateTurret, dispatch),\r\n        rotateTank: bindActionCreators(RotateTank, dispatch),\r\n        moveTankForward: bindActionCreators(MoveTankForward, dispatch),\r\n        moveTankBackward: bindActionCreators(MoveTankBackward, dispatch),\r\n        moveTankRotateLeftAndForward: bindActionCreators(MoveTankRotateLeftAndForward, dispatch),\r\n        moveTankRotateRightAndForward: bindActionCreators(MoveTankRotateRightAndForward, dispatch),\r\n        load: bindActionCreators(Load, dispatch),\r\n        selectRow: bindActionCreators(SelectRow, dispatch),\r\n        start: bindActionCreators(Start, dispatch),\r\n        stop: bindActionCreators(Stop, dispatch),\r\n        pause: bindActionCreators(Pause, dispatch),\r\n        nextMove: bindActionCreators(NextMove, dispatch),\r\n        restart: bindActionCreators(Restart, dispatch),\r\n        fire: bindActionCreators(Fire, dispatch),\r\n        increaseSpeed: bindActionCreators(IncreaseSpeed, dispatch),\r\n        decreaseSpeed: bindActionCreators(DecreaseSpeed, dispatch),\r\n    }\r\n};\r\n\r\nexport const putStateToProps_TankInfo = (state) =>{\r\n\r\n    return {\r\n        tank: state.mapState.tank,\r\n    }\r\n};\r\n","import {createStore} from \"redux\";\r\nimport {rootReducer} from \"./reducers.js\"\r\n\r\nexport const tileNames = {\r\n    mountains: \"mountains\",\r\n    swamp: \"swamp\",\r\n    littleMountains: \"littleMountains\",\r\n    littleSwamp: \"littleSwamp\",\r\n    trailVert: \"trailVert\",\r\n    trailDiag: \"trailDiag\",\r\n    littleTrailVert: \"littleTrailVert\",\r\n    littleTrailDiag: \"littleTrailDiag\",\r\n    tankBody: \"tankBody\",\r\n    tankHead: \"tankHead\",\r\n    tankStatus_NotLoaded: \"tankStatus_NotLoaded\",\r\n    tankStatus_PartLoaded: \"tankStatus_PartLoaded\",\r\n    tankStatus_Loaded: \"tankStatus_Loaded\",\r\n    _3hp: \"3hp\",\r\n    _2hp: \"2hp\",\r\n    _1hp: \"1hp\",\r\n    empty: \"empty\"\r\n};\r\n\r\nexport const getmapTile = (type, anotherTileSize, little = false) =>{\r\n    if (store + \"\" === \"undefined\")\r\n        return {};\r\n    let tS = anotherTileSize || store.getState().mapState.tileSize; //tileSize\r\n    let obj = {};\r\n    switch (type) {\r\n        case tileNames.mountains:\r\n        case tileNames.littleMountains:\r\n            obj = {\r\n                tag: type,\r\n                backgroundImage: \"url('../images/gametiles.svg')\",\r\n                backgroundPosition: `-${tS}px 0px`,\r\n                height: tS,\r\n                width: tS,};\r\n            break;\r\n        case tileNames.swamp:\r\n        case tileNames.littleSwamp:\r\n            obj = {\r\n                tag: type,\r\n                backgroundImage: \"url('../images/gametiles.svg')\",\r\n                backgroundPosition: `-${tS * 2}px 0px`,\r\n                height: tS,\r\n                width: tS,};\r\n            break;\r\n        case tileNames.tankBody:\r\n            obj = {\r\n                tag: type,\r\n                backgroundImage: \"url('../images/gametiles.svg')\",\r\n                backgroundPosition: `-${tS * 3}px 0px`,\r\n                height: tS,\r\n                width: tS,};\r\n            break;\r\n        case tileNames.tankHead:\r\n            obj = {\r\n                tag: type,\r\n                backgroundImage: \"url('../images/gametiles.svg')\",\r\n                backgroundPosition: `-${tS * 4}px 0px`,\r\n                height: tS,\r\n                width: tS,};\r\n            break;\r\n        case tileNames.tankStatus_NotLoaded:\r\n            obj = {\r\n                tag: type,\r\n                backgroundImage: \"url('../images/gametiles.svg')\",\r\n                backgroundPosition: `-${tS * 3}px -${tS * 2}px`,\r\n                height: tS,\r\n                width: tS,};\r\n            break;\r\n        case tileNames.tankStatus_PartLoaded:\r\n            obj = {\r\n                tag: type,\r\n                backgroundImage: \"url('../images/gametiles.svg')\",\r\n                backgroundPosition: `-${tS * 4}px -${tS * 2}px`,\r\n                height: tS,\r\n                width: tS,};\r\n            break;\r\n        case tileNames.tankStatus_Loaded:\r\n            obj = {\r\n                tag: type,\r\n                backgroundImage: \"url('../images/gametiles.svg')\",\r\n                backgroundPosition: `-${tS * 4}px -${tS * 3}px`,\r\n                height: tS,\r\n                width: tS,};\r\n            break;\r\n        case tileNames._3hp:\r\n            obj = {\r\n                tag: type,\r\n                backgroundImage: \"url('../images/gametiles.svg')\",\r\n                backgroundPosition: `0px -${tS}px`,\r\n                height: tS,\r\n                width: tS,};\r\n            break;\r\n        case tileNames._2hp:\r\n            obj = {\r\n                tag: type,\r\n                backgroundImage: \"url('../images/gametiles.svg')\",\r\n                backgroundPosition: `-${tS}px -${tS}px`,\r\n                height: tS,\r\n                width: tS,};\r\n            break;\r\n        case tileNames._1hp:\r\n            obj = {\r\n                tag: type,\r\n                backgroundImage: \"url('../images/gametiles.svg')\",\r\n                backgroundPosition: `-${tS * 2}px -${tS}px`,\r\n                height: tS,\r\n                width: tS,};\r\n            break;\r\n        case tileNames.trailVert:\r\n            console.log(1);\r\n            obj = {\r\n                tag: type,\r\n                backgroundImage: \"url('../images/gametiles.svg')\",\r\n                backgroundPosition: `-${tS * 3}px -${tS}px`,\r\n                height: tS,\r\n                width: tS,};\r\n            break;\r\n        case tileNames.littleTrailVert:\r\n            little = true;\r\n            obj = {\r\n                tag: type,\r\n                backgroundImage: \"url('../images/gametiles.svg')\",\r\n                backgroundPosition: `-${tS * 3 * 3 + tS }px -${tS * 3 }px`,\r\n                height: tS + 2*3,\r\n                width: tS,};\r\n            tS *= 3;\r\n\r\n            break;\r\n        case tileNames.trailDiag:\r\n            obj = {\r\n                tag: type,\r\n                backgroundImage: \"url('../images/gametiles.svg')\",\r\n                backgroundPosition: `-${tS * 4}px -${tS}px`,\r\n                height: tS,\r\n                width: tS,};\r\n            break;\r\n        case tileNames.littleTrailDiag:\r\n            little = true;\r\n            obj = {\r\n                tag: type,\r\n                backgroundImage: \"url('../images/gametiles.svg')\",\r\n                backgroundPosition: `-${tS * 4 * 3 + tS}px -${tS * 3}px`,\r\n                height: tS + 2*3,\r\n                width: tS,};\r\n            tS *= 3;\r\n\r\n            break;\r\n        default:\r\n            obj = {\r\n                tag: \"empty\",\r\n                backgroundImage: \"url('../images/gametiles.svg')\",\r\n                backgroundPosition: \"0px 0px\",\r\n                height: tS,\r\n                width: tS,};\r\n            break;\r\n    }\r\n    if (little){\r\n        const positionArr = obj.backgroundPosition.split(' ');\r\n        const X = Number(positionArr[0].slice(0,positionArr[0].length-2)) / 3;\r\n        const Y = Number(positionArr[1].slice(0,positionArr[1].length-2)) / 3;\r\n\r\n        obj = { ...obj,\r\n            backgroundPosition: `${Math.floor(X)}px ${Math.floor(Y)}px`,\r\n            backgroundSize: `${tS * 5 / 3 + 2 }px ${tS * 5 / 3 + 2 }px`,\r\n            height: obj.height / 3, width: obj.width / 3 ,\r\n            border:\"none\", }\r\n    }\r\n    else{\r\n        obj = {...obj, backgroundSize: `${tS * 5}px ${tS * 5}px`,}\r\n    }\r\n\r\n\r\n    return obj;\r\n};\r\n\r\nexport const gunnerBtnsCount =9;\r\nexport const driverBtnsCount =12;\r\nexport const chargerBtnsCount =3;\r\n\r\nexport const gameButtons = {\r\n    gunner:{\r\n        North: \"PauseGunner\",\r\n        East: \"TurnTurretClockwise90\",\r\n        South: \"TurnTurretAround\",\r\n        West: \"TurnTurretCounterClockwise90\",\r\n        NorthWest: \"TurnTurretCounterClockwise45\",\r\n        NorthEast: \"TurnTurretClockwise45\",\r\n        SouthWest: \"TurnTurretCounterClockwise135\",\r\n        SouthEast: \"TurnTurretClockwise135\",\r\n        Fire: \"FireCommand\",\r\n        Pause: \"PauseGunner\"\r\n    },\r\n    driver:{\r\n        North: \"StopDriver\",\r\n        East: \"TurnTankClockwise90\",\r\n        South: \"TurnTankAround\",\r\n        West: \"TurnTankCounterClockwise90\",\r\n        NorthWest: \"TurnTankCounterClockwise45\",\r\n        NorthEast: \"TurnTankClockwise45\",\r\n        SouthWest: \"TurnTankCounterClockwise135\",\r\n        SouthEast: \"TurnTankClockwise135\",\r\n        MoveForward: \"MoveForward\",\r\n        MoveBackward: \"MoveBackward\",\r\n        TurnLeftAndMoveForward: \"TurnTankCounterClockwiseAndMoveForward\",\r\n        TurnRightAndMoveForward: \"TurnTankClockwiseAndMoveForward\",\r\n        TurnLeftAndMoveBackward: \"=TBD=\",\r\n        TurnRightAndMoveBackward: \"=TBD=\",\r\n        Stop: \"StopDriver\",\r\n        Pause: \"StopDriver\"\r\n    },\r\n    charger:{\r\n        NotLoaded: 0,\r\n        PartiallyLoaded: 1,\r\n        Ready:2,\r\n        Pause: \"PauseLoader\"\r\n\r\n    }\r\n};\r\n\r\nexport function getGameButtonImage(className, index) {\r\n\r\n    if (isNaN(index)){\r\n        switch (className) {\r\n            case \"gunner\":\r\n                switch (index) {\r\n                    case gameButtons.gunner.NorthEast:\r\n                        index = 0;\r\n                        break;\r\n                    case gameButtons.gunner.East:\r\n                        index = 1;\r\n                        break;\r\n                    case gameButtons.gunner.SouthEast:\r\n                        index = 2;\r\n                        break;\r\n                    case gameButtons.gunner.NorthWest:\r\n                        index = 3;\r\n                        break;\r\n                    case gameButtons.gunner.West:\r\n                        index = 4;\r\n                        break;\r\n                    case gameButtons.gunner.SouthWest:\r\n                        index = 5;\r\n                        break;\r\n                    case gameButtons.gunner.South:\r\n                        index = 6;\r\n                        break;\r\n                    case gameButtons.gunner.Fire:\r\n                        index = 7;\r\n                        break;\r\n                    default:\r\n                        index = 8\r\n                }\r\n                break;\r\n            case \"driver\":\r\n                switch (index) {\r\n                    case gameButtons.driver.NorthEast:\r\n                        index = 0;\r\n                        break;\r\n                    case gameButtons.driver.East:\r\n                        index = 1;\r\n                        break;\r\n                    case gameButtons.driver.SouthEast:\r\n                        index = 2;\r\n                        break;\r\n                    case gameButtons.driver.NorthWest:\r\n                        index = 3;\r\n                        break;\r\n                    case gameButtons.driver.West:\r\n                        index = 4;\r\n                        break;\r\n                    case gameButtons.driver.SouthWest:\r\n                        index = 5;\r\n                        break;\r\n                    case gameButtons.driver.South:\r\n                        index = 6;\r\n                        break;\r\n                    case gameButtons.driver.MoveForward:\r\n                        index = 7;\r\n                        break;\r\n                    case gameButtons.driver.MoveBackward:\r\n                        index = 8;\r\n                        break;\r\n                    case gameButtons.driver.TurnRightAndMoveForward:\r\n                        index = 9;\r\n                        break;\r\n                    case gameButtons.driver.TurnLeftAndMoveForward:\r\n                        index = 10;\r\n                        break;\r\n                    default:\r\n                        index = 11;\r\n                }\r\n                break;\r\n            case \"charger\":\r\n                switch (index) {\r\n                    case \"LoadTurret_\" + gameButtons.charger.PartiallyLoaded:\r\n                        index = 0;\r\n                        break;\r\n                    case \"LoadTurret_\" +  gameButtons.charger.Ready:\r\n                        index = 1;\r\n                        break;\r\n                    default:\r\n                        index = 2;\r\n                }\r\n                break;\r\n        }\r\n    }\r\n\r\n\r\n    return {... [\r\n        //-----------------Gunner----------------------\r\n        {\r\n            tag:gameButtons.gunner.NorthEast,\r\n            backgroundImage: \"url('../images/actionbtns.svg')\",\r\n            backgroundPosition: \"0px 0px\",\r\n            left: 0,\r\n            height: 70,\r\n            width: 70,},\r\n        {\r\n            tag:gameButtons.gunner.East,\r\n            backgroundImage: \"url('../images/actionbtns.svg')\",\r\n            backgroundPosition: \"-70px 0px\",\r\n            left: 0,\r\n            height: 70,\r\n            width: 70,},\r\n        {\r\n            tag:gameButtons.gunner.SouthEast,\r\n            backgroundImage: \"url('../images/actionbtns.svg')\",\r\n            backgroundPosition: \"-140px 0px\",\r\n            left: 0,\r\n            height: 70,\r\n            width: 70,},\r\n        {\r\n            tag:gameButtons.gunner.NorthWest,\r\n            backgroundImage: \"url('../images/actionbtns.svg')\",\r\n            backgroundPosition: \"0px -70px\",\r\n            left: 0,\r\n            height: 70,\r\n            width: 70,},\r\n        {\r\n            tag:gameButtons.gunner.West,\r\n            backgroundImage: \"url('../images/actionbtns.svg')\",\r\n            backgroundPosition: \"-70px -70px\",\r\n            left: 0,\r\n            height: 70,\r\n            width: 70,},\r\n        {\r\n            tag:gameButtons.gunner.SouthWest,\r\n            backgroundImage: \"url('../images/actionbtns.svg')\",\r\n            backgroundPosition: \"-140px -70px\",\r\n            left: 0,\r\n            height: 70,\r\n            width: 70,},\r\n        {\r\n            tag:gameButtons.gunner.South,\r\n            backgroundImage: \"url('../images/actionbtns.svg')\",\r\n            backgroundPosition: \"0px -140px\",\r\n            left: 0,\r\n            height: 70,\r\n            width: 70,},\r\n        {\r\n            tag:gameButtons.gunner.Fire,\r\n            backgroundImage: \"url('../images/actionbtns.svg')\",\r\n            backgroundPosition: \"-140px -140px\",\r\n            left: 0,\r\n            height: 70,\r\n            width: 70,},\r\n        {\r\n            tag:gameButtons.gunner.Pause,\r\n            backgroundImage: \"url('../images/actionbtns.svg')\",\r\n            backgroundPosition: \"-210px -210px\",\r\n            left: 0,\r\n            height: 70,\r\n            width: 70,},\r\n        //---------------Driver------------\r\n        {\r\n            tag:gameButtons.driver.NorthEast,\r\n            backgroundImage: \"url('../images/actionbtns.svg')\",\r\n            backgroundPosition: \"0px -210px\",\r\n            left: 0,\r\n            height: 70,\r\n            width: 70,},\r\n        {\r\n            tag:gameButtons.driver.East,\r\n            backgroundImage: \"url('../images/actionbtns.svg')\",\r\n            backgroundPosition: \"-70px -210px\",\r\n            left: 0,\r\n            height: 70,\r\n            width: 70,},\r\n        {\r\n            tag:gameButtons.driver.SouthEast,\r\n            backgroundImage: \"url('../images/actionbtns.svg')\",\r\n            backgroundPosition: \"-140px -210px\",\r\n            left: 0,\r\n            height: 70,\r\n            width: 70,},\r\n        {\r\n            tag:gameButtons.driver.NorthWest,\r\n            backgroundImage: \"url('../images/actionbtns.svg')\",\r\n            backgroundPosition: \"0px -280px\",\r\n            left: 0,\r\n            height: 70,\r\n            width: 70,},\r\n        {\r\n            tag:gameButtons.driver.West,\r\n            backgroundImage: \"url('../images/actionbtns.svg')\",\r\n            backgroundPosition: \"-70px -280px\",\r\n            left: 0,\r\n            height: 70,\r\n            width: 70,},\r\n        {\r\n            tag:gameButtons.driver.SouthWest,\r\n            backgroundImage: \"url('../images/actionbtns.svg')\",\r\n            backgroundPosition: \"-140px -280px\",\r\n            left: 0,\r\n            height: 70,\r\n            width: 70,},\r\n        {\r\n            tag:gameButtons.driver.South,\r\n            backgroundImage: \"url('../images/actionbtns.svg')\",\r\n            backgroundPosition: \"-70px -140px\",\r\n            left: 0,\r\n            height: 70,\r\n            width: 70,},\r\n        {\r\n            tag:gameButtons.driver.MoveForward,\r\n            backgroundImage: \"url('../images/actionbtns.svg')\",\r\n            backgroundPosition: \"-210px 0px\",\r\n            left: 0,\r\n            height: 70,\r\n            width: 70,},\r\n        {\r\n            tag:gameButtons.driver.MoveBackward,\r\n            backgroundImage: \"url('../images/actionbtns.svg')\",\r\n            backgroundPosition: \"-280px 0px\",\r\n            left: 0,\r\n            height: 70,\r\n            width: 70,},\r\n        {\r\n            tag:gameButtons.driver.TurnRightAndMoveForward,\r\n            backgroundImage: \"url('../images/actionbtns.svg')\",\r\n            backgroundPosition: \"-210px -70px\",\r\n            left: 0,\r\n            height: 70,\r\n            width: 70,},\r\n        {\r\n            tag:gameButtons.driver.TurnLeftAndMoveForward,\r\n            backgroundImage: \"url('../images/actionbtns.svg')\",\r\n            backgroundPosition: \"-280px -70px\",\r\n            left: 0,\r\n            height: 70,\r\n            width: 70,},\r\n        {\r\n            tag:gameButtons.driver.Pause,\r\n            backgroundImage: \"url('../images/actionbtns.svg')\",\r\n            backgroundPosition: \"-210px -210px\",\r\n            left: 0,\r\n            height: 70,\r\n            width: 70,},\r\n        //-----------------Charger--------------\r\n        {\r\n            tag:gameButtons.charger.PartiallyLoaded,\r\n            backgroundImage: \"url('../images/actionbtns.svg')\",\r\n            backgroundPosition: \"-210px -140px\",\r\n            left: 0,\r\n            height: 70,\r\n            width: 70,},\r\n        {\r\n            tag:gameButtons.charger.Ready,\r\n            backgroundImage: \"url('../images/actionbtns.svg')\",\r\n            backgroundPosition: \"-280px -140px\",\r\n            left: 0,\r\n            height: 70,\r\n            width: 70,},\r\n        {\r\n            tag:gameButtons.charger.Pause,\r\n            backgroundImage: \"url('../images/actionbtns.svg')\",\r\n            backgroundPosition: \"-210px -210px\",\r\n            left: 0,\r\n            height: 70,\r\n            width: 70,},\r\n    ][index + (className === \"driver\" ? gunnerBtnsCount : 0) + ( className === \"charger\" ? gunnerBtnsCount + driverBtnsCount : 0 )]\r\n        , backgroundSize: \"350px 350px\"}\r\n}\r\n\r\nexport function getMenuButtons(index){\r\n    return [\r\n        {\r\n            backgroundImage: \"url('../images/menubtns.svg')\",\r\n            backgroundPosition: \"0px 0px\",\r\n            left: 0,\r\n            backgroundSize: \"200px 120px\",\r\n            height: 40,\r\n            width: 40,},\r\n        {\r\n            backgroundImage: \"url('../images/menubtns.svg')\",\r\n            backgroundPosition: \"-40px 0px\",\r\n            left: 0,\r\n            backgroundSize: \"200px 120px\",\r\n            height: 40,\r\n            width: 40,},\r\n        {\r\n            backgroundImage: \"url('../images/menubtns.svg')\",\r\n            backgroundPosition: \"-80px 0px\",\r\n            left: 0,\r\n            backgroundSize: \"200px 120px\",\r\n            height: 40,\r\n            width: 40,},\r\n        {\r\n            backgroundImage: \"url('../images/menubtns.svg')\",\r\n            backgroundPosition: \"-120px 0px\",\r\n            left: 0,\r\n            backgroundSize: \"200px 120px\",\r\n            height: 40,\r\n            width: 40,},\r\n        {\r\n            backgroundImage: \"url('../images/menubtns.svg')\",\r\n            backgroundPosition: \"-160px 0px\",\r\n            left: 0,\r\n            backgroundSize: \"200px 120px\",\r\n            height: 40,\r\n            width: 40,},\r\n        {\r\n            backgroundImage: \"url('../images/menubtns.svg')\",\r\n            backgroundPosition: \"0px -30px\",\r\n            left: 0,\r\n            backgroundSize: \"150px 90px\",\r\n            height: 30,\r\n            width: 30,},\r\n        {\r\n            backgroundImage: \"url('../images/menubtns.svg')\",\r\n            backgroundPosition: \"-30px -30px\",\r\n            left: 0,\r\n            backgroundSize: \"150px 90px\",\r\n            height: 30,\r\n            width: 30,},\r\n        {\r\n            backgroundImage: \"url('../images/menubtns.svg')\",\r\n            backgroundPosition: \"-60px -30px\",\r\n            left: 0,\r\n            backgroundSize: \"150px 90px\",\r\n            height: 30,\r\n            width: 30,},\r\n        {\r\n            backgroundImage: \"url('../images/menubtns.svg')\",\r\n            backgroundPosition: \"-60px -20px\",\r\n            left: 0,\r\n            backgroundSize: \"100px 60px\",\r\n            height: 20,\r\n            width: 20,},\r\n        {\r\n            backgroundImage: \"url('../images/menubtns.svg')\",\r\n            backgroundPosition: \"-80px -20px\",\r\n            left: 0,\r\n            backgroundSize: \"100px 60px\",\r\n            height: 20,\r\n            width: 20,},\r\n        {\r\n            backgroundImage: \"url('../images/menubtns.svg')\",\r\n            backgroundPosition: \"0px -60px\",\r\n            left: 0,\r\n            backgroundSize: \"150px 90px\",\r\n            height: 30,\r\n            width: 30,},\r\n    ][index]\r\n}\r\n\r\nexport function getAngleByDirection(direction){\r\n    switch (direction) {\r\n        case gameButtons.driver.North:\r\n        case gameButtons.gunner.North:\r\n            return 0;\r\n        case gameButtons.driver.East:\r\n        case gameButtons.gunner.East:\r\n            return 90;\r\n        case gameButtons.driver.South:\r\n        case gameButtons.gunner.South:\r\n            return 180;\r\n        case gameButtons.driver.West:\r\n        case gameButtons.gunner.West:\r\n            return -90;\r\n        case gameButtons.driver.NorthWest:\r\n        case gameButtons.gunner.NorthWest:\r\n            return -45;\r\n        case gameButtons.driver.NorthEast:\r\n        case gameButtons.gunner.NorthEast:\r\n            return 45;\r\n        case gameButtons.driver.SouthWest:\r\n        case gameButtons.gunner.SouthWest:\r\n            return -135;\r\n        case gameButtons.driver.SouthEast:\r\n        case gameButtons.gunner.SouthEast:\r\n            return 135;\r\n    }\r\n    return 0;\r\n}\r\n\r\nexport function transformAngle(angle) {\r\n    if (angle > 180 )\r\n        return angle - 360;\r\n\r\n    if (angle < -180 )\r\n        return angle + 360;\r\n\r\n    if (angle === 180 || angle === -180)\r\n        return 180;\r\n\r\n    return angle;\r\n}\r\n\r\nexport function getDirectionByAngle(className, angle){\r\n    angle = transformAngle(angle);\r\n\r\n    switch (angle) {\r\n        case 0:\r\n            return gameButtons[`${className}`].North;\r\n        case 90:\r\n            return gameButtons[`${className}`].East;\r\n        case 180:\r\n            return gameButtons[`${className}`].South;\r\n        case -90:\r\n            return gameButtons[`${className}`].West;\r\n        case -45:\r\n            return gameButtons[`${className}`].NorthWest;\r\n        case 45:\r\n            return gameButtons[`${className}`].NorthEast;\r\n        case -135:\r\n            return gameButtons[`${className}`].SouthWest;\r\n        case 135:\r\n            return gameButtons[`${className}`].SouthEast;\r\n    }\r\n    return \"undefined\";\r\n}\r\n\r\nexport const initialState_Code ={\r\n    gunnerSelectedIndex: 0,\r\n    driverSelectedIndex: 0,\r\n    chargerSelectedIndex: 0,\r\n    selectedRow: 0,\r\n    currentRow: 0,\r\n    rows: [{\r\n        gunner: null,\r\n        driver: null,\r\n        charger: null\r\n    }],\r\n    isPlay: false,\r\n    isPause: false,\r\n    speed: 500,\r\n\r\n};\r\n\r\nconst testMap=`<?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<World Height=\"10\" Width=\"10\" ShellDistance=\"8\">\r\n  <Tank X=\"4\" Y=\"4\">\r\n    <TankDirection>North</TankDirection>\r\n    <TurretDirection>North</TurretDirection>\r\n    <TurretStatus>NotLoaded</TurretStatus>\r\n  </Tank>\r\n  <Units>\r\n    <LittlePillbox X=\"4\" Y=\"2\" />\r\n    <BigPillbox X=\"7\" Y=\"1\" />\r\n    <Rock X=\"5\" Y=\"2\" />\r\n    <LittleRock X=\"6\" Y=\"2\" XShift=\"-1\" YShift=\"1\" />\r\n    <LittleRock X=\"6\" Y=\"2\" XShift=\"0\" YShift=\"0\" />\r\n    <LittleRock X=\"6\" Y=\"2\" XShift=\"1\" YShift=\"-1\" />\r\n    <LittleRock X=\"7\" Y=\"2\" XShift=\"0\" YShift=\"-1\" />\r\n    <LittleRock X=\"7\" Y=\"2\" XShift=\"0\" YShift=\"0\" />\r\n    <LittleRock X=\"7\" Y=\"2\" XShift=\"0\" YShift=\"1\" />\r\n    <Swamp X=\"3\" Y=\"3\" />\r\n    <Swamp X=\"4\" Y=\"3\" />\r\n    <Swamp X=\"5\" Y=\"3\" />\r\n    <LittleSwamp X=\"6\" Y=\"2\" XShift=\"-1\" YShift=\"0\" />\r\n    <LittleSwamp X=\"6\" Y=\"2\" XShift=\"-1\" YShift=\"-1\" />\r\n    <LittleSwamp X=\"6\" Y=\"2\" XShift=\"0\" YShift=\"-1\" />\r\n    <LittleSwamp X=\"6\" Y=\"2\" XShift=\"1\" YShift=\"0\" />\r\n    <LittleSwamp X=\"6\" Y=\"2\" XShift=\"1\" YShift=\"1\" />\r\n    <LittleSwamp X=\"6\" Y=\"2\" XShift=\"0\" YShift=\"1\" />\r\n    <LittleSwamp X=\"7\" Y=\"2\" XShift=\"-1\" YShift=\"0\" />\r\n    <LittleSwamp X=\"7\" Y=\"2\" XShift=\"-1\" YShift=\"-1\" />\r\n    <LittleSwamp X=\"7\" Y=\"2\" XShift=\"-1\" YShift=\"1\" />\r\n    <LittleSwamp X=\"7\" Y=\"2\" XShift=\"1\" YShift=\"-1\" />\r\n    <LittleSwamp X=\"7\" Y=\"2\" XShift=\"1\" YShift=\"0\" />\r\n    <LittleSwamp X=\"7\" Y=\"2\" XShift=\"1\" YShift=\"1\" />\r\n    <LittleSwamp X=\"6\" Y=\"3\" XShift=\"-1\" YShift=\"1\" />\r\n    <LittleSwamp X=\"6\" Y=\"3\" XShift=\"0\" YShift=\"0\" />\r\n    <LittleSwamp X=\"6\" Y=\"3\" XShift=\"1\" YShift=\"-1\" />\r\n    <LittleSwamp X=\"6\" Y=\"3\" XShift=\"0\" YShift=\"-1\" />\r\n    <LittleSwamp X=\"6\" Y=\"3\" XShift=\"-1\" YShift=\"-1\" />\r\n    <LittleSwamp X=\"6\" Y=\"3\" XShift=\"-1\" YShift=\"0\" />\r\n    <LittleSwamp X=\"6\" Y=\"3\" XShift=\"1\" YShift=\"0\" />\r\n    <LittleSwamp X=\"7\" Y=\"3\" XShift=\"-1\" YShift=\"-1\" />\r\n    <LittleSwamp X=\"7\" Y=\"3\" XShift=\"0\" YShift=\"-1\" />\r\n  </Units>\r\n</World>`;\r\n\r\n\r\nconst intitalTileSize = 40;\r\n\r\nexport const initialState_Map = {\r\n    tileSize:intitalTileSize,\r\n    initialMap: testMap,\r\n    mapTracers: [],\r\n    map:[],\r\n    targetCount:0\r\n};\r\n\r\nexport const initialState = {\r\n    codeState: initialState_Code,\r\n    mapState: initialState_Map\r\n};\r\n\r\nexport const store = createStore(rootReducer, initialState);\r\n\r\n\r\n","import React from \"react\";\r\nimport {getMenuButtons, getGameButtonImage, getmapTile, tileNames} from \"../store/stores\";\r\n\r\nfunction shrinkGameButtonImage (className, index){\r\n    const image = getGameButtonImage(className, index);\r\n\r\n    const positionArr = image.backgroundPosition.split(' ');\r\n    const X = Number(positionArr[0].slice(0,positionArr[0].length-2)) / image.height * 40;\r\n    const Y = Number(positionArr[1].slice(0,positionArr[1].length-2)) / image.width * 40;\r\n\r\n    return {backgroundImage: image.backgroundImage,\r\n        backgroundSize:\"200px 200px\", backgroundPosition: `${X}px ${Y}px`,\r\n        height: 40, width: 40, }\r\n}\r\nfunction shrinkgetMenuButtons (index){\r\n    const image = getMenuButtons(index);\r\n\r\n    const positionArr = image.backgroundPosition.split(' ');\r\n    const X = Number(positionArr[0].slice(0,positionArr[0].length-2)) / image.height * 30;\r\n    const Y = Number(positionArr[1].slice(0,positionArr[1].length-2)) / image.width * 30;\r\n\r\n    return {backgroundImage: image.backgroundImage,\r\n        backgroundSize:`150px 90px`, backgroundPosition: `${X}px ${Y}px`,\r\n        height: 30, width: 30, }\r\n}\r\n\r\nexport default function Info(props){\r\n    return(\r\n        <div  style={{position:\"relative\"}}>\r\n            <button style={{position: \"absolute\", right:10, padding:2}} onClick={() => props.onClick()} >✖</button>\r\n            <div className=\"flex-column\">\r\n                <div id=\"infoDiv\" className=\"flex-column margin-5\">\r\n                    <h1 style={{marginBottom:10, marginTop:0}}>\r\n                        Танковый биатлон\r\n                    </h1>\r\n                    <div className=\"flex-row flex-align-start\">\r\n                        <div className=\"flex-column flex-align-start\">\r\n                            <div style={{padding:10, border:\"1px dashed black\",}}>\r\n                                <p>\r\n                                    Игра «Танковый Биатлон» предназначена для знакомства с параллельным программированием.\r\n                                </p>\r\n                                <p>\r\n                                    Вы управляете экипажем боевого танка на биатлонной трасе,\r\n                                    задачей которого является поражение всех\r\n                                    мишеней на игровом поле за минимальное количество ходов.\r\n                                </p>\r\n                                <h2>\r\n                                    Вы управляете тремя исполнителями:\r\n                                </h2>\r\n                                <ul>\r\n                                    <li>Наводчик - управляет орудием</li>\r\n                                    <li>Водитель - управляет движением танка</li>\r\n                                    <li>Заряжающий - управляет зарядом орудия</li>\r\n                                </ul>\r\n                                <h2>\r\n                                    Ваша цель состоит в следующем:\r\n                                </h2>\r\n                                <p>\r\n                                    Написать последовательность команд (алгоритм) для параллельной работы всех трёх исполнителей,\r\n                                    чтобы совместная деятельность привела к уничтожению всех мишеней и выполнению их боевой задачи.\r\n                                </p>\r\n                                <p>\r\n                                    Все команды в строке выполняются одновременно\r\n                                    (На самом деле сначала команда Наводчика,\r\n                                    затем Водителя, затем Заряжающего).\r\n                                </p>\r\n                                <p>\r\n                                    Выстрел можно сделать только после зарядки орудий (статус заряда показывается\r\n                                    прямоугольникком около танка). Зарядка происходит в два действия, сначала необходимо\r\n                                    выполнить команду «Заряжай 1», а затем «Заряжай 2».\r\n                                </p>\r\n                                <h2>\r\n                                    На игровом поле расположены различные препятсвия:\r\n                                </h2>\r\n                                <ul>\r\n                                    <li>\r\n                                        <img style={getmapTile(tileNames.mountains, 30)} alt=\"\"/> {` `}\r\n                                        Камни - нельзя проехать, нельзя прострелить\r\n                                    </li>\r\n                                    <li>\r\n                                        <img style={getmapTile(tileNames.swamp, 30)} alt=\"\"/> {` `}\r\n                                        Деревья - нельзя проехать, можно прострелить\r\n                                    </li>\r\n                                </ul>\r\n                                <h2>\r\n                                    Цели для поражения имеют различное количества выстрелов для уничтожения:\r\n                                </h2>\r\n                                <ul>\r\n                                    <li>\r\n                                        <img style={getmapTile(tileNames._3hp, 30)} alt=\"\"/> {` `}\r\n                                        Большая мишень - 3 выстрела\r\n                                    </li>\r\n                                    <li>\r\n                                        <img style={getmapTile(tileNames._2hp, 30)} alt=\"\"/> {` `}\r\n                                        Средняя мишень - 2 выстрела\r\n                                    </li>\r\n                                    <li>\r\n                                        <img style={getmapTile(tileNames._1hp, 30)} alt=\"\"/> {` `}\r\n                                        Малая мишень - 1 выстрел\r\n                                    </li>\r\n                                </ul>\r\n                            </div>\r\n                            <div style={{padding:10, border:\"1px dashed black\"}}>\r\n                                <h2>\r\n                                    Некоторые действия выполнять нельзя:\r\n                                </h2>\r\n                                <ul>\r\n                                    <li>\r\n                                        Нельзя наехать на препятсвия или цели\r\n                                    </li>\r\n                                    <li>\r\n                                        Нельзя выехать за границы поля\r\n                                    </li>\r\n                                    <li>\r\n                                        Нельзя выстрелить пока орудие не заряжено\r\n                                    </li>\r\n                                    <li>\r\n                                        Нельзя сменить направление движения танка на противоположное после движения,\r\n                                        необходимо сделать паузу между движениями. (пример: нельзя выполнить\r\n                                        «Подвинуться вперёд», а затем «Повинуться назад»)\r\n                                    </li>\r\n                                    <li>\r\n                                        Нельзя выполнить команду «Заряжай 1», если уже была выполнена эта команда\r\n                                        или орудие заряжено.\r\n                                        (Можно выполнять одновременно с командой «Выстрел», если орудие заряжено)\r\n                                    </li>\r\n                                    <li>\r\n                                        Нельзя выполнить команду «Заряжай 2», если орудие уже заряжено\r\n                                        или команда «Заряжай 1» не была выполнена.\r\n                                    </li>\r\n                                </ul>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"flex-column flex-align-start\">\r\n                            <div style={{padding:10, border:\"1px dashed black\"}}>\r\n                                <h1>\r\n                                    Комадны для исполнителей:\r\n                                </h1>\r\n                                <h2>\r\n                                    Наводчик:\r\n                                </h2>\r\n                                <ul>\r\n                                        <li>\r\n                                            <img style={shrinkGameButtonImage(\"gunner\",0)} alt=\"\"/> {` `}\r\n                                            <img style={shrinkGameButtonImage(\"gunner\",1)} alt=\"\"/> {` `}\r\n                                            <img style={shrinkGameButtonImage(\"gunner\",2)} alt=\"\"/> {` `}\r\n                                            - поворот орудия по часовой стрелке на 45°, 90° и 135°\r\n                                        </li>\r\n                                        <li>\r\n                                            <img style={shrinkGameButtonImage(\"gunner\",3)} alt=\"\"/> {` `}\r\n                                            <img style={shrinkGameButtonImage(\"gunner\",4)} alt=\"\"/> {` `}\r\n                                            <img style={shrinkGameButtonImage(\"gunner\",5)} alt=\"\"/> {` `}\r\n                                            - поворот орудия против часовой стрелки на 45°, 90° и 135°\r\n                                        </li>\r\n                                        <li>\r\n                                            <img style={shrinkGameButtonImage(\"gunner\",7)} alt=\"\"/> {` `}\r\n                                            - выстрел\r\n                                        </li>\r\n                                        <li>\r\n                                            <img style={shrinkGameButtonImage(\"gunner\",8)} alt=\"\"/> {` `}\r\n                                            - пауза\r\n                                        </li>\r\n                                    </ul>\r\n                                <h2>\r\n                                    Водитель:\r\n                                </h2>\r\n                                <ul>\r\n                                    <li>\r\n                                        <img style={shrinkGameButtonImage(\"driver\",0)} alt=\"\"/> {` `}\r\n                                        <img style={shrinkGameButtonImage(\"driver\",1)} alt=\"\"/> {` `}\r\n                                        <img style={shrinkGameButtonImage(\"driver\",2)} alt=\"\"/> {` `}\r\n                                        - поворот танка по часовой стрелке на 45°, 90° и 135°\r\n                                    </li>\r\n                                    <li>\r\n                                        <img style={shrinkGameButtonImage(\"driver\",3)} alt=\"\"/> {` `}\r\n                                        <img style={shrinkGameButtonImage(\"driver\",4)} alt=\"\"/> {` `}\r\n                                        <img style={shrinkGameButtonImage(\"driver\",5)} alt=\"\"/> {` `}\r\n                                        - поворот танка против часовой стрелки на 45°, 90° и 135°\r\n                                    </li>\r\n                                    <li>\r\n                                        <img style={shrinkGameButtonImage(\"driver\",7)} alt=\"\"/> {` `}\r\n                                        - подвинуться вперёд\r\n                                    </li>\r\n                                    <li>\r\n                                        <img style={shrinkGameButtonImage(\"driver\",8)} alt=\"\"/> {` `}\r\n                                        - подвинуться назад\r\n                                    </li>\r\n                                    <li>\r\n                                        <img style={shrinkGameButtonImage(\"driver\",9)} alt=\"\"/> {` `}\r\n                                        - повернуть на 45° по часовой стрелке и подвинуться вперёд\r\n                                    </li>\r\n                                    <li>\r\n                                        <img style={shrinkGameButtonImage(\"driver\",10)} alt=\"\"/> {` `}\r\n                                        - повернуть на 45° против часовой стрелки и подвинуться вперёд\r\n                                    </li>\r\n                                    <li>\r\n                                        <img style={shrinkGameButtonImage(\"driver\",11)} alt=\"\"/> {` `}\r\n                                        - пауза\r\n                                    </li>\r\n                                </ul>\r\n                                <h2>\r\n                                    Заряжающий:\r\n                                </h2>\r\n                                <ul>\r\n                                    <li>\r\n                                        <img style={shrinkGameButtonImage(\"charger\",0)} alt=\"\"/> {` `}\r\n                                        - зарядить первую половину\r\n                                    </li>\r\n                                    <li>\r\n                                        <img style={shrinkGameButtonImage(\"charger\",1)} alt=\"\"/> {` `}\r\n                                        - зарядить вторую половину\r\n                                    </li>\r\n                                    <li>\r\n                                        <img style={shrinkGameButtonImage(\"charger\",2)} alt=\"\"/> {` `}\r\n                                        - пауза\r\n                                    </li>\r\n                                </ul>\r\n                            </div>\r\n                            <div style={{padding:10, border:\"1px dashed black\"}}>\r\n                                <h2>\r\n                                    Кнопки управления:\r\n                                </h2>\r\n                                <ul>\r\n                                    <li>\r\n                                        <img style={shrinkgetMenuButtons(0)} alt=\"\"/> {` `}\r\n                                        - выполнить весь алгоритм\r\n                                    </li>\r\n                                    <li>\r\n                                        <img style={shrinkgetMenuButtons(1)} alt=\"\"/> {` `}\r\n                                        - приостановить выполнение\r\n                                    </li>\r\n                                    <li>\r\n                                        <img style={shrinkgetMenuButtons(2)} alt=\"\"/> {` `}\r\n                                        - остановить выполнение или сбросить\r\n                                    </li>\r\n                                    <li>\r\n                                        <img style={shrinkgetMenuButtons(3)} alt=\"\"/> {` `}\r\n                                        - выполнить алгоритм до выбранной строки (красной)\r\n                                    </li>\r\n                                    <li>\r\n                                        <img style={shrinkgetMenuButtons(4)} alt=\"\"/> {` `}\r\n                                        - выполнить строку и перейти к следующей\r\n                                    </li>\r\n                                    <li>\r\n                                        <img style={shrinkgetMenuButtons(5)} alt=\"\"/> {` `}\r\n                                        - сохранить файл\r\n                                    </li>\r\n                                    <li>\r\n                                        <img style={shrinkgetMenuButtons(6)} alt=\"\"/> {` `}\r\n                                        - загрузить файл\r\n                                    </li>\r\n                                </ul>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React, {Component} from \"react\";\r\nimport ReactModal from \"react-modal\";\r\nimport {connect, Provider} from \"react-redux\";\r\nimport {store} from '../store/stores.js'\r\nimport {gunnerBtnsCount, driverBtnsCount, chargerBtnsCount, gameButtons} from '../store/stores.js'\r\nimport {putActionsToProps_Code, putStateToProps_Code} from \"../store/reducers.js\";\r\nimport {putStateToProps_AlgButtons, putActionsToProps_AlgButtons, putStateToProps_TankInfo} from \"../store/reducers.js\";\r\nimport {getmapTile,getGameButtonImage, getMenuButtons, tileNames} from \"../store/stores\";\r\nimport Info from \"../components/info\"\r\n\r\nconst error = {\r\n    cannotChangeDirection: 'Невозможно изменить направление во время движения, необходимо остановить танк (сделать паузу)',\r\n    outOfBounds: 'Танк выехал за границу',\r\n    moveOnMountain: 'Танк не может проехать по горам',\r\n    moveOnSwamp: 'Танк не может проехать по лесам',\r\n    moveOnTarget: 'Танк не может проехать по мишеням',\r\n    moveOnSmth: 'Танк не может проехать по этой клетке',\r\n    cannotPartiallyLoad: 'Команду \"Заряжай 1\" можно выполнить только если орудие не заряжено',\r\n    cannotFullyLoad: 'Команду \"Заряжай 2\" можно выполнить только если уже выполнена команда \"Заряжай 1\"',\r\n    cannotFire: 'Нельзя выстрелить, пока орудие не полностью заряжено',\r\n};\r\n\r\nclass Menu extends Component {\r\n    render() {\r\n        return (\r\n            <div id=\"menuDiv\" className=\"flex-row flex-align-start\" >\r\n                <div  className=\"margin-10\">\r\n                    <Provider store={store}>\r\n                        <WrappedGameTable />\r\n                    </Provider>\r\n                </div>\r\n                <div  className=\"flex-column flex-align-start\">\r\n                    <Provider store={store}>\r\n                        <WrappedMenuButtons />\r\n                    </Provider>\r\n                    <Provider store={store}>\r\n                        <WrappedGameButtonsTable />\r\n                    </Provider>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nclass MenuButtons extends Component {\r\n    handlePlay(){\r\n        if (!this.props.isPlay) {\r\n            this.props.start();\r\n            setTimeout(() => this.playNext(), this.props.speed)\r\n        }\r\n    }\r\n    handleStop(){\r\n        this.props.restart();\r\n    }\r\n    handlePause(){\r\n        if (this.props.isPlay)\r\n            this.props.pause();\r\n    }\r\n    handleNextStep(){\r\n        if (this.props.isPlay) {\r\n            this.props.pause();\r\n        }\r\n        else {\r\n            this.props.start();\r\n        }\r\n\r\n        setTimeout(() => {\r\n            if (this.nextMove(this.props.currentRow)) {\r\n                this.props.nextMove();\r\n                this.props.pause();\r\n            }\r\n            else {\r\n                this.props.stop();\r\n            }\r\n        }, this.props.speed)\r\n    }\r\n    handleUntilRow(){\r\n        if (!this.props.isPlay) {\r\n            this.props.start();\r\n            setTimeout( ()=> {\r\n                this.playUntilRow();\r\n                }, 0\r\n            )\r\n        }\r\n    }\r\n    playUntilRow(){\r\n        if (this.props.isPlay) {\r\n            console.log(`1 ${this.props.isPlay} ${this.props.isPause}`)\r\n\r\n            setTimeout(() => {\r\n                if (this.props.currentRow < this.props.selectedRow) {\r\n                    if (this.props.isPlay && this.nextMove(this.props.currentRow)) {\r\n                        this.props.nextMove();\r\n                        this.playUntilRow();\r\n\r\n                        console.log(`2 ${this.props.isPlay} ${this.props.isPause}`)\r\n                    }\r\n                }\r\n                else {\r\n                    this.props.pause();\r\n                }\r\n            }, this.props.speed)\r\n        }\r\n        else{\r\n            // console.log(`3 ${this.props.isPlay} ${this.props.isPause}`)\r\n            // if (!this.props.isPause)\r\n            //     console.log(`4 ${this.props.isPlay} ${this.props.isPause}`)\r\n            //     setTimeout(() => {\r\n            //         this.props.pause();\r\n            //     }, this.props.speed)\r\n        }\r\n\r\n    }\r\n\r\n    playNext(){\r\n        if (this.props.isPlay) {\r\n            if (this.nextMove(this.props.currentRow)) {\r\n                this.props.nextMove();\r\n                setTimeout(()=> {\r\n                    if (this.props.isPlay && !this.props.isPause)\r\n                        this.playNext();\r\n                },this.props.speed);\r\n            } else\r\n                {\r\n                    this.props.stop();}\r\n        }\r\n        else {\r\n            this.props.stop();\r\n        }\r\n    }\r\n    nextMove(indexRow){\r\n        // const state = store.getState();\r\n        const {tank, map, mapWidth, mapHeight} = this.props;//state.mapState;\r\n        const {rows} = this.props;//state.codeState;\r\n        const currRowIndex = indexRow;\r\n\r\n        if (currRowIndex >= rows.length - 1)\r\n            return false;\r\n\r\n        const currRow = rows[currRowIndex];\r\n        const {gunner, driver,  charger} = currRow;\r\n\r\n        if (gunner !== null){\r\n            const tag = gunner.tag;\r\n            switch (tag) {\r\n                case gameButtons.gunner.North:\r\n                case gameButtons.gunner.NorthEast:\r\n                case gameButtons.gunner.East:\r\n                case gameButtons.gunner.SouthEast:\r\n                case gameButtons.gunner.South:\r\n                case gameButtons.gunner.SouthWest:\r\n                case gameButtons.gunner.West:\r\n                case gameButtons.gunner.NorthWest:{\r\n                    this.props.rotateTurret(tag);\r\n                    break;\r\n                }\r\n                case gameButtons.gunner.Fire:{\r\n                    /*TODO кнопка стрельбы*/\r\n                    if (tank.TurretStatus !== 2)\r\n                    {\r\n                        alert(error.cannotFire + `\\nОшибка в строке (${indexRow + 1})`);\r\n                        return false;\r\n                    }\r\n                    this.props.fire();\r\n                    break;\r\n                }\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n\r\n        if (driver !== null){\r\n            const tag = driver.tag;\r\n            switch (tag) {\r\n                case gameButtons.driver.North:\r\n                case gameButtons.driver.NorthEast:\r\n                case gameButtons.driver.East:\r\n                case gameButtons.driver.SouthEast:\r\n                case gameButtons.driver.South:\r\n                case gameButtons.driver.SouthWest:\r\n                case gameButtons.driver.West:\r\n                case gameButtons.driver.NorthWest:{\r\n                    this.props.rotateTank(tag);\r\n                    break;\r\n                }\r\n\r\n                case gameButtons.driver.MoveForward:\r\n                case gameButtons.driver.MoveBackward:{\r\n                    if (currRowIndex > 0\r\n                        && rows[currRowIndex - 1].driver !== null\r\n                        && (\r\n                        (tag === gameButtons.driver.MoveForward\r\n                            && rows[currRowIndex -1].driver.tag === gameButtons.driver.MoveBackward)\r\n                            ||\r\n                        (tag === gameButtons.driver.MoveBackward\r\n                            && rows[currRowIndex -1].driver.tag === gameButtons.driver.MoveForward)\r\n                            )){\r\n                        alert(error.cannotChangeDirection + `\\nОшибка в строке (${indexRow + 1})`);\r\n                        return false;\r\n                    }\r\n\r\n                    if (tag === gameButtons.driver.MoveForward)\r\n                        this.props.moveTankForward();\r\n                    else this.props.moveTankBackward();\r\n\r\n                    const {X,Y} = this.props.tank;\r\n\r\n                    if (X < 0 || X >= mapWidth\r\n                        || Y < 0 || Y >= mapHeight)\r\n                    {\r\n                        alert(error.outOfBounds + `\\nОшибка в строке (${indexRow + 1})`);\r\n                        return false;\r\n                    }\r\n\r\n                    if (map[Y][X].length > 0){\r\n                        let msg = error.moveOnSmth;\r\n                        switch (map[Y][X][0].tile) {\r\n                            case tileNames.swamp:\r\n                                msg = error.moveOnSwamp;\r\n                                break;\r\n                            case tileNames.mountains:\r\n                                msg = error.moveOnMountain;\r\n                                break;\r\n                            case tileNames._3hp:\r\n                            case tileNames._2hp:\r\n                            case tileNames._1hp:\r\n                                msg = error.moveOnTarget;\r\n                                break;\r\n                        }\r\n                        alert(msg + `\\nОшибка в строке (${indexRow + 1})`);\r\n                        return false;\r\n                    }\r\n\r\n                    break;\r\n                }\r\n\r\n                case gameButtons.driver.TurnLeftAndMoveForward:\r\n                case gameButtons.driver.TurnRightAndMoveForward:\r\n                {\r\n                    if (currRowIndex > 0\r\n                        && rows[currRowIndex - 1].driver !== null\r\n                        && rows[currRowIndex -1].driver.tag === gameButtons.driver.MoveBackward)\r\n                    {\r\n                        alert(error.cannotChangeDirection + `\\nОшибка в строке (${indexRow + 1})`);\r\n                        return false;\r\n                    }\r\n\r\n                    if (tag === gameButtons.driver.TurnLeftAndMoveForward)\r\n                        this.props.moveTankRotateLeftAndForward();\r\n                    else this.props.moveTankRotateRightAndForward();\r\n\r\n                    const {X,Y} = this.props.tank;\r\n\r\n                    if (X < 0 || X >= mapWidth\r\n                        || Y < 0 || Y >= mapHeight)\r\n                    {\r\n                        alert(error.outOfBounds + `\\nОшибка в строке (${indexRow + 1})`);\r\n                        return false;\r\n                    }\r\n\r\n                    if (map[Y][X].length > 0){\r\n                        let msg = error.moveOnSmth;\r\n                        switch (map[Y][X][0].tile) {\r\n                            case tileNames.swamp:\r\n                                msg = error.moveOnSwamp;\r\n                                break;\r\n                            case tileNames.mountains:\r\n                                msg = error.moveOnMountain;\r\n                                break;\r\n                            case tileNames._3hp:\r\n                            case tileNames._2hp:\r\n                            case tileNames._1hp:\r\n                                msg = error.moveOnTarget;\r\n                                break;\r\n                        }\r\n                        alert(msg + `\\nОшибка в строке (${indexRow + 1})`);\r\n                        return false;\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (charger !== null){\r\n            switch (charger.tag) {\r\n                case gameButtons.charger.PartiallyLoaded: {\r\n                    if (tank.TurretStatus === 1 || (tank.TurretStatus === 2\r\n                        && (gunner === null || gunner.tag !== gameButtons.gunner.Fire)))\r\n                    {\r\n                        alert(error.cannotPartiallyLoad + `\\nОшибка в строке (${indexRow + 1})`);\r\n                        return false;\r\n                    }\r\n                    break;\r\n                }\r\n                case gameButtons.charger.Ready:{\r\n                    if (tank.TurretStatus >= 2){\r\n                        alert(error.cannotFullyLoad + `\\nОшибка в строке (${indexRow + 1})`);\r\n                        return false;\r\n                    }\r\n                    break;\r\n                }\r\n                default:\r\n                    return true\r\n            }\r\n            this.props.load();\r\n        }\r\n        return true;\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"flex-row \">\r\n                <div className=\"flex-column flex-justify-evenly margin-10\">\r\n                    <InfoButton />\r\n                    <Provider store={store}>\r\n                        <WrappedTankInfo />\r\n                    </Provider>\r\n                </div>\r\n                <div className=\"flex-column flex-justify-center widthAll\">\r\n                    <div className=\"flex-column\">\r\n                        <SpeedRange\r\n                            onIncreaseClick={() => this.props.increaseSpeed()}\r\n                            onDecreaseClick={() => this.props.decreaseSpeed()}\r\n                            speed = {this.props.speed}\r\n                        />\r\n                        <div style={{display:\"none\"}}>{this.props.isPlay + ``}</div>\r\n                        <div style={{display:\"none\"}}>{this.props.isPause + ``}</div>\r\n                    </div>\r\n                    <div id=\"moveBtnDiv\" className=\"flex-row\">\r\n                        <div className=\"flex-row flex-justify-center\">\r\n                            <div className=\"flex-row flex-wrap\">\r\n                                <div className=\"flex-row\">\r\n                                    <MenuButton image={getMenuButtons(0)} onClick={() => this.handlePlay()} />\r\n                                    <MenuButton image={getMenuButtons(1)} onClick={() => this.handlePause()} />\r\n                                    <MenuButton image={getMenuButtons(2)} onClick={() =>this.handleStop()} />\r\n                                </div>\r\n                                <div className=\"flex-row\">\r\n                                    <MenuButton image={getMenuButtons(3)} onClick={() =>this.handleUntilRow()} />\r\n                                    <MenuButton image={getMenuButtons(4)} onClick={() =>this.handleNextStep()} />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div style={{width: 50}}> </div>\r\n                    </div>\r\n                    <div style={{textAlign: 'right'}} >\r\n                        <span>Дальность стрельбы: </span>\r\n                        <span>{this.props.shellDistance}</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport function MenuButton(props) {\r\n    return (\r\n        <button className=\"margin-5\" onClick={()=> props.onClick()} style={props.image} />\r\n    )\r\n}\r\n\r\nconst WrappedMenuButtons = connect(putStateToProps_AlgButtons, putActionsToProps_AlgButtons)(MenuButtons);\r\n\r\n// =============================================\r\n\r\nclass InfoButton extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state={\r\n            isOpen: false\r\n        }\r\n    }\r\n\r\n    handleClick(){\r\n        this.setState({isOpen: false});\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <button id=\"infoButton\" className=\"flex-row\" onClick={() => this.setState({isOpen: true})}>\r\n                    <span>INFO</span>\r\n                    <div style={getMenuButtons(10)} />\r\n                </button>\r\n                <ReactModal isOpen={this.state.isOpen} onRequestClose={() => this.handleClick()} >\r\n                    <Info onClick={() => this.handleClick()} />\r\n                </ReactModal>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nclass TankInfo extends Component {\r\n\r\n    loadTank(){\r\n        const {tank} = this.props;\r\n        if (!tank) return null;\r\n        const valueBody = {...getmapTile(tileNames.tankBody, 100),position: \"absolute\",\r\n            zIndex:9998,\r\n            left: 0,\r\n            top: 0,\r\n            transform: `rotate(${tank.TankDirection}deg)`,\r\n        };\r\n        const valueHead = {...getmapTile(tileNames.tankHead, 100),position: \"absolute\",\r\n            zIndex:9999,\r\n            left: 0,\r\n            top: 0,\r\n            transform: `rotate(${tank.TurretDirection}deg)`,\r\n        };\r\n        const status = this.props.tank.TurretStatus === 0\r\n            ? tileNames.tankStatus_NotLoaded\r\n            : this.props.tank.TurretStatus === 1\r\n                ? tileNames.tankStatus_PartLoaded\r\n                : tileNames.tankStatus_Loaded;\r\n\r\n        const valueStatus = {...getmapTile(status, 100),position: \"absolute\",\r\n            zIndex:9999,\r\n            left: 0,\r\n            top: 0,\r\n        };\r\n        return (\r\n            [\r\n                <div style={valueBody}></div>,\r\n                <div style={valueHead}></div>,\r\n                <div style={valueStatus}></div>,\r\n            ])\r\n    }\r\n\r\n    render()\r\n    {\r\n        return (\r\n            <div id=\"tankDiv\" style={{position: \"relative\", height:100, width:100}}>\r\n                {this.loadTank()}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst WrappedTankInfo = connect(putStateToProps_TankInfo)(TankInfo);\r\n\r\nfunction SpeedRange(props){\r\n    return (\r\n        <div className=\"flex-column\">\r\n            <div>Скорость воспроизведения</div>\r\n            <div className = \"flex-row\">\r\n                <MenuButton image={getMenuButtons(8)} onClick={()=>props.onIncreaseClick()} />\r\n                <MenuButton image={getMenuButtons(9)} onClick={()=>props.onDecreaseClick()} />\r\n                <span style={{width:50}} >{600 - props.speed}</span>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n// ========================================\r\n\r\nclass GameTable extends Component{\r\n    renderRows(){\r\n        let arr=[];\r\n        const {rows} = this.props;\r\n        for(let i = 0; i < rows.length; i++){\r\n            arr.push(\r\n                <GameTableRow\r\n                    selected ={this.props.selectedRow === i}\r\n                    current = {this.props.currentRow === i}\r\n                    index={i}\r\n                    value={rows[i]}\r\n                    OnRowClick={(o)=> {\r\n                        if (!this.props.isPlay)\r\n                            this.props.selectRow(o)}}\r\n                    onClickTD_LMB={(className) => {\r\n                        if (!this.props.isPlay && !this.props.isPause){\r\n                            this.props.addPictureInTD(className, i)}}}\r\n                    onClickTD_RMB={(className) => {\r\n                        if (!this.props.isPlay && !this.props.isPause)\r\n                            this.props.removePictureInTD(className, i)}}\r\n                />\r\n            )\r\n        }\r\n\r\n        return arr;\r\n    }\r\n\r\n    handleSaveAlg(){\r\n        if (this.props.rows[0].gunner !== null\r\n            || this.props.rows[0].driver !== null\r\n            || this.props.rows[0].charger !== null\r\n            || this.props.rows.length > 1)\r\n        {\r\n            this.props.saveAlg();\r\n        }\r\n    }\r\n    handleClear(){\r\n        if (!this.props.isPlay && !this.props.isPlay)\r\n            this.props.clear();\r\n    }\r\n\r\n    fileLoad(evt){\r\n        var files = evt.target.files; // FileList object\r\n        var reader = new FileReader();\r\n        const {loadAlg} = this.props;\r\n        reader.onload = (e) => {\r\n            loadAlg(e.target.result);\r\n            this.props.restart();\r\n            //console.log(typeof e.target.result)\r\n        };\r\n        reader.readAsText(files[0].slice());\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <div className=\"flex-row flex-justify-between\">\r\n                    <div className=\"flex-row\">\r\n                        <MenuButton image={getMenuButtons(5)}\r\n                                    onClick={() =>this.handleSaveAlg()}\r\n                        />\r\n                        <label id=\"labelFor_uploadAlg\" htmlFor=\"uploadAlg\">\r\n                            <div style={getMenuButtons(6)} />\r\n                        </label>\r\n                        <input id=\"uploadAlg\" type=\"file\" onChange={(e)=> this.fileLoad(e)}/>\r\n                    </div>\r\n                    <MenuButton image={getMenuButtons(7)}\r\n                                onClick={() =>this.handleClear()}\r\n                    />\r\n                </div>\r\n                <div id=\"commandsDiv\" className=\"overflow overflow-y-visible\">\r\n                    <table id=\"commands\">\r\n                        <tbody>\r\n                        <tr>\r\n                            <th>#</th>\r\n                            <th>Наводчик</th>\r\n                            <th>Водитель</th>\r\n                            <th>Заряжающий</th>\r\n                        </tr>\r\n                        {this.renderRows()}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst WrappedGameTable = connect(putStateToProps_Code, putActionsToProps_Code)(GameTable);\r\n\r\nclass GameTableRow extends Component{\r\n    render() {\r\n        return (\r\n            <tr className={(this.props.selected ? \"selectedRow\": \"\") + (this.props.current ? \" currentRow\": \"\") }\r\n                onClick={()=>this.props.OnRowClick(this.props.index)}>\r\n                <td style={{width: 20}} >{this.props.index+1}</td>\r\n                <GameTableCell\r\n                    value={this.props.value.gunner}\r\n                    onClickTD_LMB={() => this.props.onClickTD_LMB(\"gunner\")}\r\n                    onClickTD_RMB={() => this.props.onClickTD_RMB(\"gunner\")}\r\n                />\r\n                <GameTableCell\r\n                    value={this.props.value.driver}\r\n                    onClickTD_LMB={() => this.props.onClickTD_LMB(\"driver\")}\r\n                    onClickTD_RMB={() => this.props.onClickTD_RMB(\"driver\")}\r\n                />\r\n                <GameTableCell\r\n                    value={this.props.value.charger}\r\n                    onClickTD_LMB={() => this.props.onClickTD_LMB(\"charger\")}\r\n                    onClickTD_RMB={() => this.props.onClickTD_RMB(\"charger\")}\r\n                />\r\n            </tr>\r\n        );\r\n    }\r\n}\r\n\r\nfunction GameTableCell(props) {\r\n    return (\r\n        <td className=\"gameTD\" onClick={() => props.onClickTD_LMB()} onContextMenu={(e) => {e.preventDefault(); props.onClickTD_RMB()} }>\r\n            <div className=\"flex-column flex-justify-center\">\r\n                <div style={props.value} />\r\n            </div>\r\n        </td>\r\n    );\r\n}\r\n\r\n// ========================================\r\n\r\nclass GameButtonsTable extends Component{\r\n    renderButtons(className) {\r\n        let arr = [];\r\n        const {gunnerSelectedIndex,driverSelectedIndex,chargerSelectedIndex,\r\n                changeSelectedButton} = this.props;\r\n        switch (className) {\r\n            case \"gunner\": {\r\n                for (let i = 0; i < gunnerBtnsCount; i++) {\r\n                    arr.push(\r\n                        <GameButton key={`${className} - ${i}`}\r\n                                    index={i} class={className} selected={gunnerSelectedIndex === i}\r\n                                    onClick={() => changeSelectedButton(i, className)}/>\r\n                    );\r\n                }\r\n                break;\r\n            }\r\n            case \"driver\":{\r\n                for (let i = 0; i < driverBtnsCount; i++) {\r\n                    arr.push(\r\n                        <GameButton key={`${className} - ${i}`}\r\n                                    index={i} class={className} selected={driverSelectedIndex === i}\r\n                                    onClick={() => changeSelectedButton(i, className)}/>\r\n                    );\r\n                }\r\n                break;\r\n            }\r\n            case \"charger\":{\r\n                for (let i = 0; i < chargerBtnsCount; i++) {\r\n                    arr.push(\r\n                        <GameButton key={`${className} - ${i}`}\r\n                                    index={i} class={className} selected={chargerSelectedIndex === i}\r\n                                    onClick={() => changeSelectedButton(i, className)}/>\r\n                    );\r\n                }\r\n                break;\r\n            }\r\n            default:\r\n        }\r\n        return arr;\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"flex-row flex-align-start overflow\">\r\n                <div className=\"flex-column\">\r\n                    <div style={{height: 20}} className=\"padding-5\">Наводчик</div>\r\n                    <div className=\"gameButtonsColumn flex-row flex-wrap\">\r\n                        {this.renderButtons(\"gunner\")}\r\n                    </div>\r\n                </div>\r\n                <div className=\"flex-column\">\r\n                    <div style={{height: 20}} className=\"padding-5\">Водитель</div>\r\n                    <div className=\"gameButtonsColumn flex-row flex-wrap\">\r\n                        {this.renderButtons(\"driver\")}\r\n                    </div>\r\n                </div>\r\n                <div className=\"flex-column\">\r\n                    <div style={{height: 20, }} className=\"padding-5\">Заряжающий</div>\r\n                    <div className=\"gameButtonsColumn flex-row flex-wrap\">\r\n                        {this.renderButtons(\"charger\")}\r\n                    </div>\r\n                </div>\r\n                <div className=\"flex-column\">\r\n\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst WrappedGameButtonsTable = connect(putStateToProps_Code, putActionsToProps_Code)(GameButtonsTable);\r\n\r\nfunction GameButton(props) {\r\n    return (\r\n        <button className={props.class + (props.selected? \" selected\":\"\") + \" margin-1\"}\r\n                style={getGameButtonImage(props.class, props.index)}\r\n                onClick={props.onClick}/>\r\n    )\r\n}\r\n\r\nexport default Menu\r\n","import React, {Component} from \"react\";\r\nimport { connect, Provider } from 'react-redux'\r\nimport {store} from '../store/stores.js'\r\nimport ReactModal from \"react-modal\";\r\nimport {putStateToProps_Map, putActionsToProps_Map} from '../store/reducers.js'\r\nimport '../styles/game.css';\r\nimport {tileNames, getmapTile, getMenuButtons} from \"../store/stores\";\r\nimport {MenuButton} from \"../components/menu.js\";\r\n\r\n\r\nclass Map extends Component {\r\n    render() {\r\n        return (\r\n            <div id=\"mapDiv\">\r\n                <Provider store={store}>\r\n                    <WrappedMapTable />\r\n                </Provider>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nclass MapTable extends Component {\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state={sonic:false};\r\n\r\n        props.loadMap(\"\")\r\n    }\r\n\r\n\r\n    renderTable(){\r\n        const tileSize = this.props.tileSize;\r\n        const {map, mapWidth, mapHeight, reduceHP} = this.props;\r\n        const elements = [];\r\n\r\n        for (let i = 0; i < mapHeight; i++){\r\n            const row =[];\r\n\r\n            for (let j = 0; j < mapWidth; j++){\r\n                if (map[i][j].length > 0\r\n                    && (map[i][j][0].tile === tileNames.littleMountains\r\n                    || map[i][j][0].tile === tileNames.littleSwamp)\r\n                    &&(map[i][j][0].XShift !== null && map[i][j][0].YShift !== null)){\r\n                    let combinedTile =[[null, null, null],[null, null, null],[null, null, null]];\r\n                    for (let k = 0; k < map[i][j].length; k++){\r\n\r\n                        combinedTile[map[i][j][k].YShift + 1][map[i][j][k].XShift + 1] =\r\n                            (<MapTile key={`tile ${i} - ${j}: ${map[i][j][k].YShift + 1} - ${map[i][j][k].XShift + 1}`}\r\n                                      value={getmapTile(map[i][j][k].tile, this.props.tileSize, true)} />)\r\n                    }\r\n                    for (let k = 0; k < 9; k++){\r\n                        if (!combinedTile[Math.floor(k / 3)][k %3]){\r\n                            combinedTile[Math.floor(k / 3)][k % 3]\r\n                                = (<MapTile key={`tile ${i} - ${j}: ${Math.floor(k / 3)} - ${k %3}`}\r\n                                            value={getmapTile(tileNames.empty,this.props.tileSize, true)} />);\r\n                        }\r\n                    }\r\n                    const combinedDiv=[];\r\n                    for (let k = 0; k < 3; k++){\r\n                        const combinedRow = [];\r\n                        for (let t = 0; t < 3; t++){\r\n                            combinedRow.push(combinedTile[k][t])\r\n                        }\r\n                        combinedDiv.push(\r\n                            <div className=\"flex-row\">\r\n                                {combinedRow}\r\n                            </div>);\r\n                    }\r\n                    row.push(\r\n                        <div key={`div ${i} - ${j}`} className=\"mapTile flex-column\" style={{height: tileSize, width: tileSize }}>\r\n                            {combinedDiv}\r\n                        </div>);\r\n                }\r\n                else\r\n                for (let k = 0; k < map[i][j].length; k++){\r\n                    row.push(\r\n                        <MapTile key={`tile ${i} - ${j}`} value={getmapTile( map[i][j][k].tile, this.props.tileSize)} />\r\n                    );\r\n                }\r\n                if (map[i][j].length  === 0){\r\n                    const tile = /*{...*/getmapTile(tileNames.empty, this.props.tileSize,);\r\n                    row.push(\r\n                        <MapTile key={`tile ${i} - ${j}`} value={tile} />\r\n                    );\r\n                }\r\n            }\r\n            elements.push(\r\n                <div className=\"flex-row\">\r\n                    {row}\r\n                </div>\r\n            )\r\n        }\r\n        return (\r\n            <div className=\"flex-column flex-align-start\" style={{position: \"relative\"}} >\r\n                {this.loadTank()}\r\n                {this.loadTrails()}\r\n                {elements}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    loadTank(){\r\n        const tileSize= this.props.tileSize;\r\n        const {tank} = this.props;\r\n        if (!tank) return null;\r\n        const valueBody = {...getmapTile(tileNames.tankBody, this.props.tileSize),position: \"absolute\",\r\n            zIndex:9997,\r\n            left: tank.X * (tileSize + 2),\r\n            top: tank.Y * (tileSize + 2),\r\n            transform: `rotate(${tank.TankDirection}deg)`\r\n\r\n        };\r\n        const valueHead = {...getmapTile(tileNames.tankHead, this.props.tileSize),position: \"absolute\",\r\n            zIndex:9998,\r\n            left: tank.X * (tileSize + 2),\r\n            top: tank.Y * (tileSize + 2),\r\n            transform: `rotate(${tank.TurretDirection}deg)`\r\n        };\r\n        const status = this.props.tank.TurretStatus === 0\r\n            ? tileNames.tankStatus_NotLoaded\r\n            : this.props.tank.TurretStatus === 1\r\n                ? tileNames.tankStatus_PartLoaded\r\n                : tileNames.tankStatus_Loaded;\r\n\r\n        const valueStatus = {...getmapTile(status, this.props.tileSize),position: \"absolute\",\r\n            zIndex:9999,\r\n            left: tank.X * (tileSize + 2),\r\n            top: tank.Y * (tileSize + 2),\r\n        };\r\n        return (\r\n            [\r\n                 <div style={valueBody}></div>,\r\n                 <div style={valueHead}></div>,\r\n                 <div style={valueStatus}></div>\r\n            ])\r\n    }\r\n    loadTrails(){\r\n        const tileSize= this.props.tileSize;\r\n        const {mapTracers} = this.props;\r\n        if (mapTracers.length === 0) return null;\r\n\r\n        const arr = [];\r\n        const length = mapTracers.length;\r\n\r\n        for (let i = 0; i < length; i++){\r\n            const little = mapTracers[i].tag === tileNames.littleTrailDiag\r\n                            || mapTracers[i].tag === tileNames.littleTrailVert;\r\n            let left = mapTracers[i].X * (tileSize + 2)\r\n                + (little? (tileSize / 3 ) * (mapTracers[i].XShift + 1) : 0);\r\n            let top = mapTracers[i].Y * (tileSize + 2)\r\n                + (little? -2 + (tileSize / 3 ) * (mapTracers[i].YShift + 1) :0);\r\n\r\n\r\n            const value = {...getmapTile(mapTracers[i].tag, this.props.tileSize, little),position: \"absolute\",\r\n                zIndex:9996,\r\n                left: left,\r\n                top: top,\r\n                transform: `rotate(${mapTracers[i].inverted? 90 : 0 }deg)`\r\n            };\r\n            arr.push(\r\n                <div style={value}></div>\r\n            )\r\n        }\r\n\r\n        return arr;\r\n    }\r\n\r\n    fileLoad(evt){\r\n        var files = evt.target.files; // FileList object\r\n        var reader = new FileReader();\r\n        const {loadMap} = this.props;\r\n        reader.onload = (e) => {\r\n            if (e.target.result === \"sonic\") {\r\n                this.setState({sonic: true});\r\n                document.getElementById('audio').play();\r\n                document.getElementById('audio').volume=0.05;\r\n            }\r\n            else\r\n            {\r\n                loadMap(e.target.result);\r\n                this.props.restart();\r\n            }\r\n\r\n            //console.log(typeof e.target.result)\r\n        };\r\n        reader.readAsText(files[0].slice());\r\n    }\r\n\r\n    hideSonic(){\r\n        const t =document.getElementById('audio');\r\n        t.pause();\r\n        t.currentTime =0;\r\n        this.setState({sonic: false});\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <div id=\"mapTitle\" className=\"flex-row flex-justify-between\">\r\n                    <label id=\"labelFor_uploadMap\" htmlFor=\"uploadMap\">\r\n                        <div style={getMenuButtons(6)}/>\r\n                    </label>\r\n                    <input id=\"uploadMap\" type=\"file\" onChange={(e) => this.fileLoad(e)}/>\r\n                    <div className=\"flex-row\">\r\n                        <span>Приближение</span>\r\n                        <MenuButton image={getMenuButtons(8)}\r\n                                    onClick={()=>this.props.zoomIn()}\r\n                        />\r\n                        <MenuButton image={getMenuButtons(9)}\r\n                                    onClick={()=>this.props.zoomOut()}\r\n                        />\r\n                        <div >{this.props.tileSize} </div>\r\n                    </div>\r\n                </div>\r\n                <div id=\"mapCont\" className=\"overflow-visible\" >\r\n                        {this.renderTable()}\r\n                </div>\r\n                <audio id=\"audio\" src=\"../sanic.mp3\" preload=\"auto\" style={{display:\"none\"}} loop  />\r\n\r\n                <ReactModal id=\"her\" isOpen={this.state.sonic}\r\n                            onRequestClose={() => this.hideSonic()} >\r\n                    <style>\r\n                        {\r\n                            `\r\n                            @-webkit-keyframes sonic {\r\n                                0% {\r\n                                    left: -50%;\r\n                                    top:0\r\n                                    transform: scale(1, 1);\r\n                                }\r\n                                50% {\r\n                                    left: 130%;\r\n                                    top:0;\r\n                                    transform: scale(1, 1);\r\n                                }\r\n                                51% {\r\n                                    left: 130%;\r\n                                    top:70%;\r\n                                    transform: scale(-1, 1);\r\n                                }\r\n                                99% {\r\n                                    left: -50%;\r\n                                    top:70%;\r\n                                }\r\n                                100% {\r\n                                    left: -50%;\r\n                                    top:0;\r\n                                    transform: scale(-1, 1);\r\n                                }\r\n                                }`\r\n                        }\r\n                    </style>\r\n                    {/*<div style={{width:\"90%\", height:\"90%\", textAlign:\"center\", verticalAlign:\"center\",*/}\r\n                                {/*position: \"relative\"}} >*/}\r\n                        <img src=\"../images/sanic.png\" alt =\"\" style={{width:300, height:300, position:\"fixed\",\r\n                            animation: \"sonic 2s infinite linear\"}} onClick={()=>this.hideSonic()} />\r\n                    {/*</div>*/}\r\n                </ReactModal>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nfunction MapTile(props) {\r\n    const value = {\r\n        backgroundImage: props.value.backgroundImage,\r\n        backgroundPosition:  props.value.backgroundPosition,\r\n        border: props.value.border,\r\n        height: props.value.height,\r\n        width: props.value.width,\r\n        backgroundSize: props.value.backgroundSize,\r\n    };\r\n    return(\r\n        <div className=\"mapTile\" style={value} onClickCapture={()=>props.onClick()}>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst WrappedMapTable = connect(putStateToProps_Map, putActionsToProps_Map)(MapTable);\r\n\r\nexport default Map","import React, {Component} from 'react';\nimport Menu from './components/menu.js'\nimport Map from './components/map.js'\nimport ReactDOM from 'react-dom';\nimport './styles/game.css';\nimport './styles/scroll.css';\n\n\nclass Game extends Component {\n    render() {\n        return (\n            <div style={{display:\"flex\", flexDirection:\"column\"}}>\n                <div id=\"snavigator\">Танковый Биатлон</div>\n                <div id=\"gridMain\" >\n                    <Map />\n                    <Menu />\n                </div>\n            </div>\n        )\n    }\n}\n\n// ========================================\n\nReactDOM.render(\n    <Game />,\n    document.getElementById('root')\n);\n\n"],"sourceRoot":""}