{"version":3,"sources":["components/Auth.js","components/Profile.js","components/Loading.js","components/App.js","reportWebVitals.js","index.js"],"names":["errorMessages","Auth","props","state","isLoading","errorMessage","login","pass","setIsLoading","setData","event","this","setState","target","value","password_hash","sha256","axios","get","params","then","data","catch","error","response","status","className","onSubmit","e","preventDefault","getData","data-testid","onChange","onLoginChange","type","onPassChange","disabled","React","Component","Profile","name","department","role","products","Array","isArray","style","verticalAlign","map","x","i","toString","Loading","App","isLoginError","page","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById","console","log"],"mappings":"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","file":"static/js/main.dc9f5ac1.chunk.js","sourcesContent":["import '../styles/Auth.css';\r\nimport axios from 'axios';\r\nimport React from 'react';\r\nimport { sha256 } from 'js-sha256';\r\n\r\nconst authUrl = 'https://68652f92-a080-4012-aad7-20ff13355f4e.mock.pstmn.io/auth';\r\n\r\nconst errorMessages = {\r\n    EmptyLoginOrPass: 'Необходимо заполнить логин и пароль',\r\n    IncorrectAuth: 'Неправильный логин или пароль',\r\n}\r\n\r\nclass Auth extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            isLoading: props.isLoading,\r\n            errorMessage: '',\r\n            login: '',\r\n            pass: ''\r\n        };\r\n\r\n        this.setIsLoading = props.setIsLoading;\r\n        this.setData = props.setData;\r\n    }\r\n\r\n    // Login input change handler.\r\n    onLoginChange(event) {\r\n        this.setState({\r\n            login: event.target.value,\r\n            errorMessage: ''\r\n        });\r\n    }\r\n\r\n    // Password input change handler.\r\n    onPassChange(event) {\r\n        this.setState({\r\n            pass: event.target.value,\r\n            errorMessage: ''\r\n        });\r\n    }\r\n\r\n    // Get Data from server.\r\n    getData() {\r\n        const login = this.state.login;\r\n        const pass = this.state.pass;\r\n\r\n        if (!login || !pass) {\r\n            this.setState({\r\n                errorMessage: errorMessages.EmptyLoginOrPass\r\n            })\r\n            return;\r\n        }\r\n\r\n        this.setIsLoading(true);\r\n\r\n        const password_hash = sha256(pass);\r\n        \r\n        axios.get(authUrl, {\r\n            params: {\r\n                login,\r\n                password_hash\r\n            }\r\n        } )\r\n        .then(data => {\r\n            this.setData(data.data);\r\n        })\r\n        .catch(error => {\r\n            if (error && error.response && error.response.status === 401) {\r\n                this.setState({\r\n                    errorMessage: errorMessages.IncorrectAuth\r\n                })\r\n            }\r\n        })\r\n        .then(() => {\r\n            this.setIsLoading(false);\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <form className=\"auth\" onSubmit={(e) => {e.preventDefault(); this.getData()}}>\r\n                <label>Логин</label>\r\n                <input data-testid=\"login\" value={this.state.login} onChange={(e) => this.onLoginChange(e)} />\r\n                <label>Пароль</label>\r\n                <input data-testid=\"password\" type=\"password\" value={this.state.pass} onChange={(e) => this.onPassChange(e)} />\r\n                <button data-testid=\"submit\"  type=\"submit\" disabled={this.state.isLoading}>Войти</button>\r\n                <label data-testid=\"error\">{this.state.errorMessage}</label>\r\n            </form>\r\n        )\r\n    };\r\n  }\r\n  \r\n  export default Auth;","import '../styles/Profile.css'\r\n\r\nfunction Profile(props) {\r\n    let { name, department, role, products } = props.data;\r\n    products = Array.isArray(products) ? products : [];\r\n\r\n    return (\r\n        <table className=\"profile\">\r\n          <tbody>\r\n            <tr>\r\n              <td>Имя</td>\r\n              <td data-testid=\"name\">{name}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Подразделение</td>\r\n              <td data-testid=\"department\">{department}</td>\r\n            </tr>\r\n            <tr>\r\n              <td>Роль</td>\r\n              <td data-testid=\"role\">{role}</td>\r\n            </tr>\r\n            <tr>\r\n              <td style={{ verticalAlign: 'top' }}>Продукты</td>\r\n              <td>\r\n                <table data-testid=\"products\">\r\n                  <tbody>\r\n                    {products.map((x, i) => <tr key={i.toString()} data-testid=\"product\"><td>{x}</td></tr> )}\r\n                  </tbody>\r\n                </table>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n    );\r\n  }\r\n  \r\n  export default Profile;","import '../styles/Loading.css';\r\n\r\nexport default function Loading() {\r\n    return (\r\n        <div className=\"loadingWrapper\">\r\n            <div data-testid='loading' className=\"loading\"></div>\r\n        </div>\r\n    )\r\n}","import '../styles/App.css';\nimport Auth from './Auth.js';\nimport Profile from './Profile.js';\nimport Loading from './Loading.js';\nimport React from 'react';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: null,\n      isLoading: false,\n      isLoginError: false,\n    }\n  }\n\n  // Change loading State\n  setIsLoading(state = false) {\n    this.setState({\n      isLoading: state\n    })\n  }\n\n  render() {\n    const page = \n      this.state.data \n        ? <Profile data={this.state.data} />  \n        : <Auth \n            isLoading={this.state.isLoading}\n            setIsLoading={(state) => this.setIsLoading(state)}\n            setData={(data) => this.setState({ data })} \n          />\n\n    return (\n      <div className=\"app\">\n        { this.state.isLoading && <Loading /> }\n        <div className=\"page\">\n          { page }\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './styles/index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\nreportWebVitals(console.log);\n"],"sourceRoot":""}